!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("child_process"),require("fs")):"function"==typeof define&&define.amd?define(["child_process","fs"],t):"object"==typeof exports?exports.twinql=t(require("child_process"),require("fs")):e.twinql=t(e.child_process,e.fs)}(this,function(e,t){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=155)}([function(e,t){var r=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=r)},function(e,t,r){var n=r(80)("wks"),i=r(53),o=r(3).Symbol,a="function"==typeof o;(e.exports=function(e){return n[e]||(n[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=n},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(e){if(l===setTimeout)return setTimeout(e,0);if((l===r||!l)&&setTimeout)return l=setTimeout,setTimeout(e,0);try{return l(e,0)}catch(t){try{return l.call(null,e,0)}catch(t){return l.call(this,e,0)}}}function o(e){if(f===clearTimeout)return clearTimeout(e);if((f===n||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function a(){v&&p&&(v=!1,p.length?d=p.concat(d):y=-1,d.length&&s())}function s(){if(!v){var e=i(a);v=!0;for(var t=d.length;t;){for(p=d,d=[];++y<t;)p&&p[y].run();y=-1,t=d.length}p=null,v=!1,o(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var l,f,h=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:r}catch(e){l=r}try{f="function"==typeof clearTimeout?clearTimeout:n}catch(e){f=n}}();var p,d=[],v=!1,y=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];d.push(new u(e,t)),1!==d.length||v||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.binding=function(e){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(e){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(30),u=r(6),c=function(e){function t(e){n(this,t);var r=i(this,Object.getPrototypeOf(t).call(this));if(r.termType=t.termType,!e.includes(":"))throw new Error('NamedNode IRI "'+e+'" must be absolute.');if(e.includes(" ")){var o='Error: NamedNode IRI "'+e+'" must not contain unencoded spaces.';throw new Error(o)}return r.value=e,r}return o(t,e),a(t,[{key:"dir",value:function(){var e=this.uri.split("#")[0],r=e.slice(0,-1).lastIndexOf("/"),n=e.indexOf("//");return n>=0&&r<n+2||r<0?null:new t(e.slice(0,r+1))}},{key:"site",value:function(){var e=this.uri.split("#")[0],r=e.indexOf("//");if(r<0)throw new Error("This URI does not have a web site part (origin)");var n=e.indexOf("/",r+2);if(n<0)throw new Error("This URI does not have a web site part. (origin)");return new t(e.slice(0,n+1))}},{key:"doc",value:function(){return this.uri.indexOf("#")<0?this:new t(this.uri.split("#")[0])}},{key:"toString",value:function(){return"<"+this.uri+">"}},{key:"uri",get:function(){return this.value},set:function(e){this.value=e}}],[{key:"fromValue",value:function(e){return void 0===e||null===e?e:e&&e.termType?e:new t(e)}}]),t}(u);c.termType="NamedNode",c.prototype.classOrder=s.NamedNode,c.prototype.isVar=0,e.exports=c},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){n(this,e)}return i(e,[{key:"substitute",value:function(e){return console.log("@@@ node substitute"+this),this}},{key:"compareTerm",value:function(e){return this.classOrder<e.classOrder?-1:this.classOrder>e.classOrder?1:this.value<e.value?-1:this.value>e.value?1:0}},{key:"equals",value:function(e){return!!e&&(this.termType===e.termType&&this.value===e.value)}},{key:"hashString",value:function(){return this.toCanonical()}},{key:"sameTerm",value:function(e){return this.equals(e)}},{key:"toCanonical",value:function(){return this.toNT()}},{key:"toNT",value:function(){return this.toString()}},{key:"toString",value:function(){throw new Error("Node.toString() is abstract - see the subclasses instead")}}]),e}();e.exports=o,o.fromValue=function(e){var t=r(55),n=r(31);r(5);return void 0===e||null===e?e:e&&e.termType?e:Array.isArray(e)?new t(e):n.fromValue(e)}},function(e,t,r){"use strict";function n(e){var t;return t=e.indexOf("#"),t<0?e:e.slice(0,t)}function i(e){return new l(n(e.uri))}function o(e){var t=/[^\/]*\/\/([^\/]*)\//.exec(e);return t?t[1]:""}function a(e,t){var r,n,i,o,a,s=t.indexOf("#");if(s>0&&(t=t.slice(0,s)),0===e.length)return t;if(0===e.indexOf("#"))return t+e;if(e.indexOf(":")>=0)return e;if(r=t.indexOf(":"),0===t.length)return e;if(r<0)return c("Invalid base: "+t+" in join with given: "+e),e;if(n=t.slice(0,+r+1||9e9),0===e.indexOf("//"))return n+e;if(t.indexOf("//",r)===r+1){if((i=t.indexOf("/",r+3))<0)return t.length-r-3>0?t+"/"+e:n+e}else if((i=t.indexOf("/",r+1))<0)return t.length-r-1>0?t+"/"+e:n+e;if(0===e.indexOf("/"))return t.slice(0,i)+e;if(a=t.slice(i),(o=a.lastIndexOf("/"))<0)return n+e;for(o>=0&&o<a.length-1&&(a=a.slice(0,+o+1||9e9)),a+=e;a.match(/[^\/]*\/\.\.\//);)a=a.replace(/[^\/]*\/\.\.\//,"");return a=a.replace(/\.\//g,""),a=a.replace(/\/\.$/,"/"),t.slice(0,i)+a}function s(e){var t;return t=e.indexOf(":"),t<0?null:e.slice(0,t)}function u(e,t){var r,n,i,o,a,s,u,c,l,f,h,p,d=new RegExp("^[-_a-zA-Z0-9.]+:(//[^/]*)?/[^/]*$");if(!e)return t;if(e===t)return"";for(r=u=0,o=t.length;u<o&&t[r]===e[r];r=++u);if(e.slice(0,r).match(d)&&(n=t.indexOf("//"),n<0&&(n=-2),i=t.indexOf("/",n+2),"/"!==t[i+1]&&"/"!==e[i+1]&&t.slice(0,i)===e.slice(0,i)))return t.slice(i);if("#"===t[r]&&e.length===r)return t.slice(r);for(;r>0&&"/"!==t[r-1];)r--;if(r<3)return t;if(e.indexOf("//",r-2)>0||t.indexOf("//",r-2)>0)return t;if(e.indexOf(":",r)>0)return t;for(s=0,f=e.slice(r),c=0,a=f.length;c<a;c++)"/"===f[c]&&s++;if(0===s&&r<t.length&&"#"===t[r])return"./"+t.slice(r);if(0===s&&r===t.length)return"./";if(p="",s>0)for(l=1,h=s;h>=1?l<=h:l>=h;h>=1?++l:--l)p+="../";return p+t.slice(r)}var c=c||console.log;e.exports.docpart=n,e.exports.document=i,e.exports.hostpart=o,e.exports.join=a,e.exports.protocol=s,e.exports.refTo=u;var l=r(5)},function(e,t,r){var n=r(3),i=r(0),o=r(15),a=r(16),s=function(e,t,r){var u,c,l,f=e&s.F,h=e&s.G,p=e&s.S,d=e&s.P,v=e&s.B,y=e&s.W,g=h?i:i[t]||(i[t]={}),m=g.prototype,b=h?n:p?n[t]:(n[t]||{}).prototype;h&&(r=t);for(u in r)(c=!f&&b&&void 0!==b[u])&&u in g||(l=c?b[u]:r[u],g[u]=h&&"function"!=typeof b[u]?r[u]:v&&c?o(l,n):y&&b[u]==l?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(l):d&&"function"==typeof l?o(Function.call,l):l,d&&((g.virtual||(g.virtual={}))[u]=l,e&s.R&&m&&!m[u]&&a(m,u,l)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,e.exports=s},function(e,t,r){var n=r(12),i=r(115),o=r(82),a=Object.defineProperty;t.f=r(11)?Object.defineProperty:function(e,t,r){if(n(e),t=o(t,!0),n(r),i)try{return a(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},function(e,t,r){"use strict";(function(e){function n(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,t){if(n()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,r){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return a(this,e,t,r)}function a(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?h(e,t,r,n):"string"==typeof t?l(e,t,r):p(e,t)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function u(e,t,r,n){return s(t),t<=0?i(e,t):void 0!==r?"string"==typeof n?i(e,t).fill(r,n):i(e,t).fill(r):i(e,t)}function c(e,t){if(s(t),e=i(e,t<0?0:0|d(t)),!o.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function l(e,t,r){if("string"==typeof r&&""!==r||(r="utf8"),!o.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|y(t,r);e=i(e,n);var a=e.write(t,r);return a!==n&&(e=e.slice(0,a)),e}function f(e,t){var r=t.length<0?0:0|d(t.length);e=i(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function h(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n),o.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=o.prototype):e=f(e,t),e}function p(e,t){if(o.isBuffer(t)){var r=0|d(t.length);return e=i(e,r),0===e.length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||Q(t.length)?i(e,0):f(e,t);if("Buffer"===t.type&&K(t.data))return f(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function d(e){if(e>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|e}function v(e){return+e!=e&&(e=0),o.alloc(+e)}function y(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return X(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return G(e).length;default:if(n)return X(e).length;t=(""+t).toLowerCase(),n=!0}}function g(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,r);case"utf8":case"utf-8":return I(this,t,r);case"ascii":return R(this,t,r);case"latin1":case"binary":return j(this,t,r);case"base64":return N(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function m(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function b(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=o.from(t,n)),o.isBuffer(t))return 0===t.length?-1:w(e,t,r,n,i);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):w(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function w(e,t,r,n,i){function o(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}var a=1,s=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,r/=2}var c;if(i){var l=-1;for(c=r;c<s;c++)if(o(e,c)===o(t,l===-1?0:c-l)){if(l===-1&&(l=c),c-l+1===u)return l*a}else l!==-1&&(c-=c-l),l=-1}else for(r+u>s&&(r=s-u),c=r;c>=0;c--){for(var f=!0,h=0;h<u;h++)if(o(e,c+h)!==o(t,h)){f=!1;break}if(f)return c}return-1}function _(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[r+a]=s}return a}function x(e,t,r,n){return J(X(t,e.length-r),e,r,n)}function k(e,t,r,n){return J(V(t),e,r,n)}function T(e,t,r,n){return k(e,t,r,n)}function E(e,t,r,n){return J(G(t),e,r,n)}function S(e,t,r,n){return J(W(t,e.length-r),e,r,n)}function N(e,t,r){return 0===t&&r===e.length?$.fromByteArray(e):$.fromByteArray(e.slice(t,r))}function I(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=r){var u,c,l,f;switch(s){case 1:o<128&&(a=o);break;case 2:u=e[i+1],128==(192&u)&&(f=(31&o)<<6|63&u)>127&&(a=f);break;case 3:u=e[i+1],c=e[i+2],128==(192&u)&&128==(192&c)&&(f=(15&o)<<12|(63&u)<<6|63&c)>2047&&(f<55296||f>57343)&&(a=f);break;case 4:u=e[i+1],c=e[i+2],l=e[i+3],128==(192&u)&&128==(192&c)&&128==(192&l)&&(f=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&l)>65535&&f<1114112&&(a=f)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=s}return O(n)}function O(e){var t=e.length;if(t<=Z)return String.fromCharCode.apply(String,e);for(var r="",n=0;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=Z));return r}function R(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function j(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function C(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=H(e[o]);return i}function A(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function L(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,r,n,i,a){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function M(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function U(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function P(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function q(e,t,r,n,i){return i||P(e,t,r,4,3.4028234663852886e38,-3.4028234663852886e38),Y.write(e,t,r,n,23,4),r+4}function F(e,t,r,n,i){return i||P(e,t,r,8,1.7976931348623157e308,-1.7976931348623157e308),Y.write(e,t,r,n,52,8),r+8}function z(e){if(e=B(e).replace(ee,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function B(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function H(e){return e<16?"0"+e.toString(16):e.toString(16)}function X(e,t){t=t||1/0;for(var r,n=e.length,i=null,o=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function V(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function W(e,t){for(var r,n,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function G(e){return $.toByteArray(z(e))}function J(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function Q(e){return e!==e}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var $=r(168),Y=r(224),K=r(128);t.Buffer=o,t.SlowBuffer=v,t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=n(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,r){return a(null,e,t,r)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,r){return u(null,e,t,r)},o.allocUnsafe=function(e){return c(null,e)},o.allocUnsafeSlow=function(e){return c(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!K(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=o.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var a=e[r];if(!o.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},o.byteLength=y,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?I(this,0,e):g.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,r,n,i){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var a=i-n,s=r-t,u=Math.min(a,s),c=this.slice(n,i),l=e.slice(t,r),f=0;f<u;++f)if(c[f]!==l[f]){a=c[f],s=l[f];break}return a<s?-1:s<a?1:0},o.prototype.includes=function(e,t,r){return this.indexOf(e,t,r)!==-1},o.prototype.indexOf=function(e,t,r){return b(this,e,t,r,!0)},o.prototype.lastIndexOf=function(e,t,r){return b(this,e,t,r,!1)},o.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return _(this,e,t,r);case"utf8":case"utf-8":return x(this,e,t,r);case"ascii":return k(this,e,t,r);case"latin1":case"binary":return T(this,e,t,r);case"base64":return E(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;o.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n;if(o.TYPED_ARRAY_SUPPORT)n=this.subarray(e,t),n.__proto__=o.prototype;else{var i=t-e;n=new o(i,void 0);for(var a=0;a<i;++a)n[a]=this[a+e]}return n},o.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||L(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},o.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||L(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},o.prototype.readUInt8=function(e,t){return t||L(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||L(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||L(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||L(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},o.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||L(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||L(e,1,this.length),128&this[e]?(255-this[e]+1)*-1:this[e]},o.prototype.readInt16LE=function(e,t){t||L(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(e,t){t||L(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(e,t){return t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||L(e,4,this.length),Y.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||L(e,4,this.length),Y.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||L(e,8,this.length),Y.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||L(e,8,this.length),Y.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){D(this,e,t,r,Math.pow(2,8*r)-1,0)}var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},o.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t|=0,r|=0,!n){D(this,e,t,r,Math.pow(2,8*r)-1,0)}var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},o.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):M(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):U(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):U(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);D(this,e,t,r,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<r&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},o.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);D(this,e,t,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},o.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):M(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):M(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):U(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||D(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):U(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,r){return q(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return q(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return F(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return F(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,a=n-r;if(this===e&&r<t&&t<n)for(i=a-1;i>=0;--i)e[i+t]=this[i+r];else if(a<1e3||!o.TYPED_ARRAY_SUPPORT)for(i=0;i<a;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+a),t);return a},o.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0);var a;if("number"==typeof e)for(a=t;a<r;++a)this[a]=e;else{var s=o.isBuffer(e)?e:X(new o(e,n).toString()),u=s.length;for(a=0;a<r-t;++a)this[a+t]=s[a%u]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,r(2))},function(e,t,r){e.exports=!r(20)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,r){var n=r(17);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t,r){"use strict";(function(e){function t(e,t,r){var n=null;if(void 0!==e.fetcher&&(n=e.fetcher,"NamedNode"===t.termType)){var i,o=b(t.uri);if(t.uri.indexOf("#")<0){if(v(t.uri,"http://dbpedia.org/resource/Category:"))return;v(t.uri,"http://purl.org/dc/elements/1.1/")||v(t.uri,"http://purl.org/dc/terms/")?i="http://dublincore.org/2005/06/13/dcq":v(t.uri,"http://xmlns.com/wot/0.1/")?i="http://xmlns.com/wot/0.1/index.rdf":v(t.uri,"http://web.resource.org/cc/")&&(i="http://web.resource.org/cc/schema.rdf")}i&&(o=i),n&&"unrequested"!==n.getState(o)||(i&&w.warn("Assuming server still broken, faking redirect of <"+t.uri+"> to <"+o+">"),n.requestURI(o,r))}}function n(e,t,r){r||(r=0);var n=e.length;for(r<0&&(r=n+r);r<n;r++)if(e[r]===t)return r;return-1}function i(e,t){e.callbacks={};for(var r=t.length-1;r>=0;r--)e.callbacks[t[r]]=[];e.addHook=function(t){e.callbacks[t]||(e.callbacks[t]=[])},e.addCallback=function(t,r){e.callbacks[t].push(r)},e.removeCallback=function(t,r){for(var n=0;n<e.callbacks[t].length;n++)if(e.callbacks[t][n].name===r)return e.callbacks[t].splice(n,1),!0;return!1},e.insertCallback=function(t,r){e.callbacks[t].unshift(r)},e.fireCallbacks=function(t,r){var n,i=[],o=[],a=e.callbacks[t].length;for(n=a-1;n>=0;n--)e.callbacks[t][n].apply(e,r)&&i.push(e.callbacks[t][n]);for(n=i.length-1;n>=0;n--)o.push(i[n]);for(n=a;n<e.callbacks[t].length;n++)o.push(e.callbacks[t][n]);e.callbacks[t]=o}}function o(){return tabulator&&tabulator.isExtension?Components.classes["@mozilla.org/xmlextras/domparser;1"].getService(Components.interfaces.nsIDOMParser):window.DOMParser?new DOMParser:!!window.ActiveXObject&&new ActiveXObject("Microsoft.XMLDOM")}function a(e,t){t=t||{};var r=[];"selfClosing"in t&&t.selfClosing.split(" ").forEach(function(e){r[e]=!0});var n=[];return"skipAttributes"in t&&t.skipAttributes.split(" ").forEach(function(e){n[e]=!0}),s(e,t,r,n)}function s(e,t,r,n){var i,o="",a=[!1];if(void 0===e.nodeType)return o;if(1===e.nodeType){if(e.hasAttribute("class")&&"classWithChildText"in t&&e.matches(t.classWithChildText.class))o+=e.querySelector(t.classWithChildText.element).textContent;else if(!("skipNodeWithClass"in t&&e.matches("."+t.skipNodeWithClass))){var u=e.nodeName.toLowerCase();o+="<"+u;var c=[];for(i=e.attributes.length-1;i>=0;i--){var l=e.attributes[i];if(!(n.length>0&&n[l.name])&&!/^\d+$/.test(l.name)){if("class"===l.name&&"replaceClassItemWith"in t&&l.value.split(" ").indexOf(t.replaceClassItemWith.source)>-1){var f=new RegExp(t.replaceClassItemWith.source,"g");l.value=l.value.replace(f,t.replaceClassItemWith.target).trim()}"class"===l.name&&"skipClassWithValue"in t&&t.skipClassWithValue===l.value||c.push(l.name+"='"+l.value.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&quot;")+"'")}}if(c.length>0&&("sortAttributes"in t&&t.sortAttributes&&c.sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}),o+=" "+c.join(" ")),r[u])o+=" />";else{for(o+=">",o+="html"===u?"\n  ":"",a.push("style"===u||"script"===u),i=0;i<e.childNodes.length;i++)o+=s(e.childNodes[i]);a.pop(),o+="body"===u?"</"+u+">\n":"</"+u+">"}}}else if(8===e.nodeType)o+="<!--"+e.nodeValue+"-->";else if(3===e.nodeType||4===e.nodeType){var h=e.nodeValue.replace(/\n+$/,"");o+=a[a.length-1]?h:h.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}else console.log("Warning; Cannot handle serialising nodes of type: "+e.nodeType),console.log(e);return o}function u(){var e=new Date,t=e.getYear()+1900,r=e.getMonth()+1,n=e.getDate(),i=e.getUTCHours(),o=e.getUTCMinutes(),a=e.getSeconds();return r<10&&(r="0"+r),n<10&&(n="0"+n),i<10&&(i="0"+i),o<10&&(o="0"+o),a<10&&(a="0"+a),t+"-"+r+"-"+n+"T"+i+":"+o+":"+a+"Z"}function c(e){for(var t,r=e.getAllResponseHeaders().split("\n"),n={},i=0;i<r.length;i++)if(r[i].length>0){var o=r[i].split(": ");void 0===o[1]?n[t]+="\n"+o[0]:(t=o[0].toLowerCase(),n[t]=o[1])}return n}function l(e,t,r){var n=function(e){return"BlankNode"===e.termType?null:e},i=function(t){var i=r.statementsMatching(e).map(function(e){return n(e.subject)+" "+n(e.predicate)+" "+n(e.object)}).concat(r.statementsMatching(void 0,void 0,e).map(function(e){return n(e.subject)+" "+n(e.predicate)+" "+n(e.object)}));return i.sort(),i.join("\n")};return"BlankNode"===e.termType||"BlankNode"===t.termType?0===e.compareTerm(t)?0:i()>i()?1:i()<i()?-1:e.compareTerm(t):e.compareTerm(t)}function f(e,t,r){var n=l(e.subject,t.subject,r);return n||((n=l(e.predicate,t.predicate,r))||l(e.object,t.object,r))}function h(e){var t=document.createElement("div");t.textContent=e,document.body.appendChild(t)}function p(t,n){var i;if(n=n||{},"undefined"!=typeof tabulator&&tabulator.isExtension)i=Components.classes["@mozilla.org/xmlextras/domparser;1"].getService(Components.interfaces.nsIDOMParser);else{if(void 0!==e&&e&&e.exports){var o=r(264).DOMParser;return(new o).parseFromString(t,n.contentType||"application/xhtml+xml")}i="undefined"!=typeof window&&window.DOMParser?new window.DOMParser:new o}return i.parseFromString(t,"application/xml")}function d(e,t){for(var r=0;r<e.length;r++)if(e[r].subject.sameTerm(t.subject)&&e[r].predicate.sameTerm(t.predicate)&&e[r].object.sameTerm(t.object)&&e[r].why.sameTerm(t.why))return void e.splice(r,1);throw new Error("RDFArrayRemove: Array did not contain "+t+" "+t.why)}function v(e,t){return e.slice(0,t.length)===t}function y(e,t){for(var r=e.split("%s"),n="",i=0;i<t.length;i++)t[i]+="",n+=r[i]+t[i];return n+r.slice(t.length).join()}function g(e){var t=e+"\n";if(!e.stack)return t+"No stack available.\n";for(var r=e.stack.toString().split("\n"),n=[],i=0;i<r.length;i++){var o=r[i];if(o.indexOf("ecmaunit.js")>-1)break;"("==o.charAt(0)&&(o="function"+o);var a=o.split("@");n.push(a)}for(var i=0;i<n.length;i++)t+="  "+n[i][1]+"\n    "+n[i][0];return t}function m(){if("undefined"!=typeof tabulator&&tabulator.isExtension)return Components.classes["@mozilla.org/xmlextras/xmlhttprequest;1"].createInstance().QueryInterface(Components.interfaces.nsIXMLHttpRequest);if("undefined"!=typeof window&&"XMLHttpRequest"in window)return new(0,window.XMLHttpRequest);if(void 0!==e&&e&&e.exports)return new(0,r(266).XMLHttpRequest);if(!window.ActiveXObject)return!1;try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){return new ActiveXObject("Microsoft.XMLHTTP")}}var b=r(7).docpart,w=r(24),_=r(5);e.exports.AJAR_handleNewTerm=t,e.exports.ArrayIndexOf=n,e.exports.callbackify=i,e.exports.dtstamp=u,e.exports.DOMParserFactory=o,e.exports.domToString=a,e.exports.dumpNode=s,e.exports.getHTTPHeaders=c,e.exports.heavyCompare=l,e.exports.heavyCompareSPO=f,e.exports.output=h,e.exports.parseXML=p,e.exports.RDFArrayRemove=d,e.exports.stackString=g,e.exports.string_startswith=v,e.exports.string={},e.exports.string.template=y,e.exports.uri=r(7),e.exports.XMLHTTPFactory=m,e.exports.log=w,e.exports.mediaTypeClass=function(e){return e=e.split(";")[0].trim(),new _("http://www.w3.org/ns/iana/media-types/"+e+"#Resource")}}).call(t,r(102)(e))},function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,r){var n=r(68);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},function(e,t,r){var n=r(9),i=r(35);e.exports=r(11)?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,r){var n=r(72),i=r(47);e.exports=function(e){return n(i(e))}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t){},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(30),u=r(6),c=function(e){function t(e){n(this,t);var r=i(this,Object.getPrototypeOf(t).call(this));return r.termType=t.termType,r.id=t.nextId++,r.value=e||r.id.toString(),r}return o(t,e),a(t,[{key:"compareTerm",value:function(e){return this.classOrder<e.classOrder?-1:this.classOrder>e.classOrder?1:this.id<e.id?-1:this.id>e.id?1:0}},{key:"copy",value:function(e){var r=new t;return e.copyTo(this,r),r}},{key:"toCanonical",value:function(){return"_:"+this.value}},{key:"toString",value:function(){return t.NTAnonymousNodePrefix+this.id}}]),t}(u);c.nextId=0,c.termType="BlankNode",c.NTAnonymousNodePrefix="_:n",c.prototype.classOrder=s.BlankNode,c.prototype.isBlank=1,c.prototype.isVar=1,e.exports=c},function(e,t,r){"use strict";e.exports={debug:function(e){},warn:function(e){},info:function(e){},error:function(e){},success:function(e){},msg:function(e){}}},function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);c.call(this,e),l.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",i)}function i(){this.allowHalfOpen||this._writableState.ended||s(o,this)}function o(e){e.end()}var a=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=n;var s=r(91),u=r(38);u.inherits=r(19);var c=r(141),l=r(99);u.inherits(n,c);for(var f=a(l.prototype),h=0;h<f.length;h++){var p=f[h];n.prototype[p]||(n.prototype[p]=l.prototype[p])}},function(e,t){e.exports={}},function(e,t,r){var n=r(123),i=r(71);e.exports=Object.keys||function(e){return n(e,i)}},function(e,t,r){var n=r(47);e.exports=function(e){return Object(n(e))}},function(e,t,r){"use strict";var n=r(204)(!0);r(73)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},function(e,t,r){"use strict";var n={Literal:1,Collection:3,Formula:4,NamedNode:5,BlankNode:6,Variable:7};e.exports=n},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=r(30),c=r(5),l=r(6),f=r(139),h=function(e){function t(e,r,o){n(this,t);var a=i(this,Object.getPrototypeOf(t).call(this));return a.termType=t.termType,a.value=e,r&&(a.lang=r,o=f.langString),o&&(a.datatype=c.fromValue(o)),a}return o(t,e),s(t,[{key:"copy",value:function(){return new t(this.value,this.lang,this.datatype)}},{key:"equals",value:function(e){return!!e&&(this.termType===e.termType&&this.value===e.value&&this.language===e.language&&(!this.datatype&&!e.datatype||this.datatype&&this.datatype.equals(e.datatype)))}},{key:"toNT",value:function(){if("number"==typeof this.value)return this.toString();if("string"!=typeof this.value)throw new Error("Value of RDF literal is not string or number: "+this.value);var e=this.value;return e=e.replace(/\\/g,"\\\\"),e=e.replace(/\"/g,'\\"'),e=e.replace(/\n/g,"\\n"),e='"'+e+'"',this.language?e+="@"+this.language:this.datatype.equals(f.string)||(e+="^^"+this.datatype.toCanonical()),e}},{key:"toString",value:function(){return""+this.value}},{key:"language",get:function(){return this.lang},set:function(e){this.lang=e||""}}],[{key:"fromBoolean",value:function(e){return new t(e?"1":"0",null,f.boolean)}},{key:"fromDate",value:function(e){if(!(e instanceof Date))throw new TypeError("Invalid argument to Literal.fromDate()");var r=function(e){return(""+(100+e)).slice(1,3)};return new t(e.getUTCFullYear()+"-"+r(e.getUTCMonth()+1)+"-"+r(e.getUTCDate())+"T"+r(e.getUTCHours())+":"+r(e.getUTCMinutes())+":"+r(e.getUTCSeconds())+"Z",null,f.dateTime)}},{key:"fromNumber",value:function(e){if("number"!=typeof e)throw new TypeError("Invalid argument to Literal.fromNumber()");var r=void 0,n=e.toString();return r=n.indexOf("e")<0&&Math.abs(e)<=Number.MAX_SAFE_INTEGER?Number.isInteger(e)?f.integer:f.decimal:f.double,new t(n,null,r)}},{key:"fromValue",value:function(e){if(void 0===e||null===e)return e;if("object"===(void 0===e?"undefined":a(e))&&e.termType)return e;switch(void 0===e?"undefined":a(e)){case"object":if(e instanceof Date)return t.fromDate(e);case"boolean":return t.fromBoolean(e);case"number":return t.fromNumber(e);case"string":return new t(e)}throw new Error("Can't make literal from "+e+" of type "+(void 0===e?"undefined":a(e)))}}]),t}(l);h.termType="Literal",h.prototype.classOrder=u.Literal,h.prototype.datatype=f.string,h.prototype.lang="",h.prototype.isVar=0,e.exports=h},function(e,t,r){"use strict";t.__esModule=!0;var n=r(108),i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,i.default)(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}()},function(e,t,r){e.exports=r(243)},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,r){var n=r(9).f,i=r(21),o=r(1)("toStringTag");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,o)&&n(e,o,{configurable:!0,value:t})}},function(e,t,r){r(209);for(var n=r(3),i=r(16),o=r(26),a=r(1)("toStringTag"),s=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],u=0;u<5;u++){var c=s[u],l=n[c],f=l&&l.prototype;f&&!f[a]&&i(f,a,c),o[c]=o.Array}},function(e,t,r){(function(e){function r(e){return Array.isArray?Array.isArray(e):"[object Array]"===y(e)}function n(e){return"boolean"==typeof e}function i(e){return null===e}function o(e){return null==e}function a(e){return"number"==typeof e}function s(e){return"string"==typeof e}function u(e){return"symbol"==typeof e}function c(e){return void 0===e}function l(e){return"[object RegExp]"===y(e)}function f(e){return"object"==typeof e&&null!==e}function h(e){return"[object Date]"===y(e)}function p(e){return"[object Error]"===y(e)||e instanceof Error}function d(e){return"function"==typeof e}function v(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function y(e){return Object.prototype.toString.call(e)}t.isArray=r,t.isBoolean=n,t.isNull=i,t.isNullOrUndefined=o,t.isNumber=a,t.isString=s,t.isSymbol=u,t.isUndefined=c,t.isRegExp=l,t.isObject=f,t.isDate=h,t.isError=p,t.isFunction=d,t.isPrimitive=v,t.isBuffer=e.isBuffer}).call(t,r(10).Buffer)},function(e,t,r){"use strict";function n(e){return new g(e)}function i(e){return new m(e)}function o(){return new b}function a(e,t,r){return new w(e,t,r)}function s(){return new y.default}function u(e,t,r){return new _(""+e,t,r)}function c(e,t){return"string"==typeof t?t.indexOf(":")===-1?new _(e,t):new _(e,null,l(t)):new _(e,null,t)}function l(e){return new x(e)}function f(e,t,r,n){return n=n||new b,new k(e,t,r,n)}function h(e,t,r,n){return new k(e,t,r,n)}function p(e,t,r){return f(e,t,r)}function d(e){return new T(e)}var v=r(56),y=function(e){return e&&e.__esModule?e:{default:e}}(v),g=r(23),m=r(55),b=r(232),w=r(92),_=r(31),x=r(5),k=r(59),T=r(60);e.exports.blankNode=n,e.exports.defaultGraph=o,e.exports.graph=s,e.exports.literal=c,e.exports.namedNode=l,e.exports.quad=f,e.exports.triple=p,e.exports.variable=d,e.exports.collection=i,e.exports.fetcher=a,e.exports.lit=u,e.exports.st=h},function(e,t,r){"use strict";function n(e){return function(t){return new i(e+(t||""))}}var i=r(5);e.exports=n},function(e,t,r){function n(){i.call(this)}e.exports=n;var i=r(54).EventEmitter;r(19)(n,i),n.Readable=r(100),n.Writable=r(242),n.Duplex=r(238),n.Transform=r(241),n.PassThrough=r(240),n.Stream=n,n.prototype.pipe=function(e,t){function r(t){e.writable&&!1===e.write(t)&&c.pause&&c.pause()}function n(){c.readable&&c.resume&&c.resume()}function o(){l||(l=!0,e.end())}function a(){l||(l=!0,"function"==typeof e.destroy&&e.destroy())}function s(e){if(u(),0===i.listenerCount(this,"error"))throw e}function u(){c.removeListener("data",r),e.removeListener("drain",n),c.removeListener("end",o),c.removeListener("close",a),c.removeListener("error",s),e.removeListener("error",s),c.removeListener("end",u),c.removeListener("close",u),e.removeListener("close",u)}var c=this;c.on("data",r),e.on("drain",n),e._isStdio||t&&t.end===!1||(c.on("end",o),c.on("close",a));var l=!1;return c.on("error",s),e.on("error",s),c.on("end",u),c.on("close",u),e.on("close",u),e.emit("pipe",c),e}},function(e,t,r){function n(e,t){this._id=e,this._clearFn=t}var i=Function.prototype.apply;t.setTimeout=function(){return new n(i.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new n(i.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r(245),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return w.has(e.name)}function o(e){var t=e.name,r=e.message,n={type:t,message:r};switch(t){case"HttpError":return(0,s.default)({},n,{status:e.status});default:return n}}Object.defineProperty(t,"__esModule",{value:!0}),t.NotImplementedError=t.AbstractClassError=t.QueryError=t.UnexpectedTokenError=t.UnrecognizedTokenError=t.UnterminatedTokenError=t.EndOfInputError=t.IllegalCharacterError=void 0;var a=r(111),s=n(a),u=r(64),c=n(u),l=r(44),f=n(l),h=r(14),p=n(h),d=r(66),v=n(d),y=r(65),g=n(y);t.isInlineError=i,t.formatErrorForResponse=o;var m=function(e){function t(e,r,n){return(0,p.default)(this,t),(0,v.default)(this,(t.__proto__||(0,f.default)(t)).call(this,r+":"+n+": "+e))}return(0,g.default)(t,e),t}(Error),b=(t.IllegalCharacterError=function(e){function t(){return(0,p.default)(this,t),(0,v.default)(this,(t.__proto__||(0,f.default)(t)).apply(this,arguments))}return(0,g.default)(t,e),t}(m),t.EndOfInputError=function(e){function t(){return(0,p.default)(this,t),(0,v.default)(this,(t.__proto__||(0,f.default)(t)).apply(this,arguments))}return(0,g.default)(t,e),t}(m),t.UnterminatedTokenError=function(e){function t(){return(0,p.default)(this,t),(0,v.default)(this,(t.__proto__||(0,f.default)(t)).apply(this,arguments))}return(0,g.default)(t,e),t}(m),t.UnrecognizedTokenError=function(e){function t(){return(0,p.default)(this,t),(0,v.default)(this,(t.__proto__||(0,f.default)(t)).apply(this,arguments))}return(0,g.default)(t,e),t}(m),function(e){function t(){return(0,p.default)(this,t),(0,v.default)(this,(t.__proto__||(0,f.default)(t)).apply(this,arguments))}return(0,g.default)(t,e),t}(Error)),w=(t.UnexpectedTokenError=function(e){function t(e,r){return(0,p.default)(this,t),(0,v.default)(this,(t.__proto__||(0,f.default)(t)).call(this,"Expected a token of type(s) ["+e.join(", ")+"], but got token '"+r.value+"' of type "+r.type+" at ("+r.line+":"+r.column+")"))}return(0,g.default)(t,e),t}(b),t.QueryError=function(e){function t(){return(0,p.default)(this,t),(0,v.default)(this,(t.__proto__||(0,f.default)(t)).apply(this,arguments))}return(0,g.default)(t,e),t}(Error),t.AbstractClassError=function(e){function t(e,r){return(0,p.default)(this,t),(0,v.default)(this,(t.__proto__||(0,f.default)(t)).call(this,"<"+e+"> class is abstract and cannot be directly instantiated.  "+r))}return(0,g.default)(t,e),t}(Error),t.NotImplementedError=function(e){function t(e,r){return(0,p.default)(this,t),(0,v.default)(this,(t.__proto__||(0,f.default)(t)).call(this,e+" not implemented on "+r))}return(0,g.default)(t,e),t}(Error),new c.default(["HttpError"]))},function(e,t,r){e.exports={default:r(177),__esModule:!0}},function(e,t,r){"use strict";t.__esModule=!0;var n=r(109),i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e){return function(){var t=e.apply(this,arguments);return new i.default(function(e,r){function n(o,a){try{var s=t[o](a),u=s.value}catch(e){return void r(e)}if(!s.done)return i.default.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}return n("next")})}}},function(e,t,r){var n=r(34),i=r(1)("toStringTag"),o="Arguments"==n(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,r,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=a(t=Object(e),i))?r:o?n(t):"Object"==(s=n(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,r){var n=r(15),i=r(118),o=r(116),a=r(12),s=r(52),u=r(85),c={},l={},t=e.exports=function(e,t,r,f,h){var p,d,v,y,g=h?function(){return e}:u(e),m=n(r,f,t?2:1),b=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(o(g)){for(p=s(e.length);p>b;b++)if((y=t?m(a(d=e[b])[0],d[1]):m(e[b]))===c||y===l)return y}else for(v=g.call(e);!(d=v.next()).done;)if((y=i(v,m,d.value,t))===c||y===l)return y};t.BREAK=c,t.RETURN=l},function(e,t){e.exports=!0},function(e,t,r){var n=r(12),i=r(200),o=r(71),a=r(79)("IE_PROTO"),s=function(){},u=function(){var e,t=r(70)("iframe"),n=o.length;for(t.style.display="none",r(114).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object</script>"),e.close(),u=e.F;n--;)delete u.prototype[o[n]];return u()};e.exports=Object.create||function(e,t){var r;return null!==e?(s.prototype=n(e),r=new s,s.prototype=null,r[a]=e):r=u(),void 0===t?r:i(r,t)}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,r){var n=r(81),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function i(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,i,s,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var l=new Error('Uncaught, unspecified "error" event. ('+t+")");throw l.context=t,l}if(r=this._events[e],a(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(o(r))for(s=Array.prototype.slice.call(arguments,1),c=r.slice(),i=c.length,u=0;u<i;u++)c[u].apply(this,s);return!0},r.prototype.addListener=function(e,t){var i;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(i=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),i||(i=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var i=!1;return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var r,i,a,s;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],a=r.length,i=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(r)){for(s=a;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){i=s;break}if(i<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],n(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(23),u=r(30),c=r(6),l=function(e){function t(e){n(this,t);var r=i(this,Object.getPrototypeOf(t).call(this));return r.termType=t.termType,r.id=s.nextId++,r.elements=[],r.closed=!1,e&&e.length>0&&e.forEach(function(e){r.elements.push(c.fromValue(e))}),r}return o(t,e),a(t,[{key:"append",value:function(e){return this.elements.push(e)}},{key:"close",value:function(){return this.closed=!0,this.closed}},{key:"shift",value:function(){return this.elements.shift()}},{key:"substitute",value:function(e){return new t(this.elements.map(function(t){t.substitute(e)}))}},{key:"toNT",value:function(){return s.NTAnonymousNodePrefix+this.id}},{key:"toString",value:function(){return"("+this.elements.join(" ")+")"}},{key:"unshift",value:function(e){return this.elements.unshift(e)}}]),t}(c);l.termType="collection",l.prototype.classOrder=u.Collection,l.prototype.compareTerm=s.prototype.compareTerm,l.prototype.isVar=0,e.exports=l},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t,r,n){var i=e.any(t,r,void 0);return!!i&&(e.equate(i,n),!0)}function s(e,t,r,n){var i=e.any(void 0,r,n);return!!i&&(e.equate(i,t),!0)}function u(e,t,r,n,i){e.typeCallback&&e.typeCallback(e,n,i);var o=e.classActions[n.hashString()],a=!1;if(o)for(var s=0;s<o.length;s++)a=a||o[s](e,t,r,n,i);return a}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(13).ArrayIndexOf,f=r(135),h=r(13).RDFArrayRemove,p=r(59),d=r(6),v=r(60),y="http://www.w3.org/2002/07/owl#",g=function(e){function t(e){n(this,t);var r=i(this,Object.getPrototypeOf(t).call(this));return r.propertyActions=[],r.classActions=[],r.redirections=[],r.aliases=[],r.HTTPRedirects=[],r.subjectIndex=[],r.predicateIndex=[],r.objectIndex=[],r.whyIndex=[],r.index=[r.subjectIndex,r.predicateIndex,r.objectIndex,r.whyIndex],r.namespaces={},r.features=e||["sameAs","InverseFunctionalProperty","FunctionalProperty"],r.initPropertyActions(r.features),r}return o(t,e),c(t,[{key:"substitute",value:function(e){var r=this.statements.map(function(t){return t.substitute(e)}),n=new t;return n.add(r),n}},{key:"applyPatch",value:function(e,t,n){var i,o=r(58).Query,a=this,s=null,u=function(r){if(e.delete){i=e.delete,s&&(i=i.substitute(s)),i=i.statements;var o=[],u=i.map(function(e){var r=a.statementsMatching(e.subject,e.predicate,e.object,t);return 0===r.length?(o.push(e),null):r[0]});if(o.length)return n("Could not find to delete: "+o.join("\n or "));u.map(function(e){a.remove(e)})}e.insert&&(i=e.insert,s&&(i=i.substitute(s)),i=i.statements,i.map(function(e){e.why=t,a.add(e.subject,e.predicate,e.object,e.why)})),r()};if(e.where){var c=new o("patch");c.pat=e.where,c.pat.statements.map(function(e){e.why=t});var l=[];a.query(c,function(e){l.push(e)},a.fetcher,function(){return 0===l.length?n("No match found to be patched:"+e.where):l.length>1?n("Patch ambiguous. No patch done."):(s=l[0],void u(n))})}else u(n)}},{key:"declareExistential",value:function(e){return this._existentialVariables||(this._existentialVariables=[]),this._existentialVariables.push(e),e}},{key:"initPropertyActions",value:function(e){this.propertyActions["<http://www.w3.org/1999/02/22-rdf-syntax-ns#type>"]=[u],l(e,"sameAs")>=0&&(this.propertyActions["<http://www.w3.org/2002/07/owl#sameAs>"]=[function(e,t,r,n,i){return e.equate(t,n),!0}]),l(e,"InverseFunctionalProperty")>=0&&(this.classActions["<"+y+"InverseFunctionalProperty>"]=[function(e,t,r,n,i){return e.newPropertyAction(t,s)}]),l(e,"FunctionalProperty")>=0&&(this.classActions["<"+y+"FunctionalProperty>"]=[function(e,t,r,n,i){return e.newPropertyAction(t,a)}])}},{key:"add",value:function(e,r,n,i){var o;if(1===arguments.length){if(e instanceof Array)for(o=0;o<e.length;o++)this.add(e[o]);else e instanceof p?this.add(e.subject,e.predicate,e.object,e.why):e instanceof t&&this.add(e.statements);return this}var a,s;i||(i=this.fetcher?this.fetcher.appNode:this.sym("chrome:theSession")),e=d.fromValue(e),r=d.fromValue(r),n=d.fromValue(n),i=d.fromValue(i),this.predicateCallback&&this.predicateCallback(this,r,i);var u=this.canon(r).hashString();a=this.propertyActions[u];var c=!1;if(a)for(o=0;o<a.length;o++)c=c||a[o](this,e,r,n,i);if(this.holds(e,r,n,i))return null;var l=[this.canon(e).hashString(),u,this.canon(n).hashString(),this.canon(i).hashString()];for(s=new p(e,r,n,i),o=0;o<4;o++){var f=this.index[o],h=l[o];f[h]||(f[h]=[]),f[h].push(s)}return this.statements.push(s),s}},{key:"addAll",value:function(e){var t=this;e.forEach(function(e){t.add(e.subject,e.predicate,e.object,e.graph)})}},{key:"any",value:function(e,t,r,n){var i=this.anyStatementMatching(e,t,r,n);if(null!=i)return null==e?i.subject:null==t?i.predicate:null==r?i.object:void 0}},{key:"anyValue",value:function(e,t,r,n){var i=this.any(e,t,r,n);return i?i.value:void 0}},{key:"anyStatementMatching",value:function(e,t,r,n){var i=this.statementsMatching(e,t,r,n,!0);if(i&&0!==i.length)return i[0]}},{key:"canon",value:function(e){if(!e)return e;var t=this.redirections[e.hashString()];return t||e}},{key:"check",value:function(){this.checkStatementList(this.statements);for(var e=0;e<4;e++){var t=this.index[e];for(var r in t)t.hasOwnProperty(r)&&this.checkStatementList(t[r],e)}}},{key:"checkStatementList",value:function(e,t){for(var r,n=["subject","predicate","object","why"],i=" found in "+n[t]+" index.",o=0;o<e.length;o++){r=e[o];for(var a=[r.subject,r.predicate,r.object,r.why],s=function(e,t){for(var r=0;r<e.length;r++)if(e[r].subject.sameTerm(t.subject)&&e[r].predicate.sameTerm(t.predicate)&&e[r].object.sameTerm(t.object)&&e[r].why.sameTerm(t.why))return!0},u=0;u<4;u++){var c=this.canon(a[u]),l=c.hashString();this.index[u][l]&&s(this.index[u][l],r)}if(!s(this.statements,r))throw new Error("Statement list does not statement "+r+"@"+r.why+i)}}},{key:"close",value:function(){return this}},{key:"copyTo",value:function(e,t,r){r||(r=[]);var n=this.statementsMatching(e);l(r,"two-direction")!==-1&&n.concat(this.statementsMatching(void 0,void 0,e));for(var i=0;i<n.length;i++){var o=n[i];switch(o.object.termType){case"NamedNode":this.add(t,o.predicate,o.object);break;case"Literal":case"BlankNode":case"collection":this.add(t,o.predicate,o.object.copy(this))}l(r,"delete")!==-1&&this.remove(o)}}},{key:"equate",value:function(e,t){e=this.canon(e),t=this.canon(t);var r=e.compareTerm(t);return!r||(r<0?this.replaceWith(t,e):this.replaceWith(e,t))}},{key:"formula",value:function(e){return new t(e)}},{key:"match",value:function(e,t,r,n){return this.statementsMatching(d.fromValue(e),d.fromValue(t),d.fromValue(r),d.fromValue(n))}},{key:"mentionsURI",value:function(e){var t="<"+e+">";return!!this.subjectIndex[t]||!!this.objectIndex[t]||!!this.predicateIndex[t]}},{key:"newExistential",value:function(e){if(!e)return this.bnode();var t=this.sym(e);return this.declareExistential(t)}},{key:"newPropertyAction",value:function(e,t){var r=e.hashString();this.propertyActions[r]||(this.propertyActions[r]=[]),this.propertyActions[r].push(t);for(var n=this.statementsMatching(void 0,e,void 0),i=!1,o=0;o<n.length;o++)i=i||t(this,n[o].subject,e,n[o].object);return i}},{key:"newUniversal",value:function(e){var t=this.sym(e);return this._universalVariables||(this._universalVariables=[]),this._universalVariables.push(t),t}},{key:"variable",value:function(e){return new v(e)}},{key:"nextSymbol",value:function(e){for(var t=0;;t++){var r=e.uri+"#n"+t;if(!this.mentionsURI(r))return this.sym(r)}}},{key:"query",value:function(e,t,n,i){return r(58).indexedFormulaQuery.call(this,e,t,n,i)}},{key:"remove",value:function(e){if(e instanceof Array){for(var r=0;r<e.length;r++)this.remove(e[r]);return this}if(e instanceof t)return this.remove(e.statements);var n=this.statementsMatching(e.subject,e.predicate,e.object,e.why);if(!n.length)throw new Error("Statement to be removed is not on store: "+e);return this.removeStatement(n[0]),this}},{key:"removeDocument",value:function(e){for(var t=this.statementsMatching(void 0,void 0,void 0,e).slice(),r=0;r<t.length;r++)this.removeStatement(t[r]);return this}},{key:"removeMany",value:function(e,t,r,n,i){for(var o=this.statementsMatching(e,t,r,n,!1),a=[],s=0;s<o.length;s++)a.push(o[s]);for(i&&(a=a.slice(0,i)),s=0;s<a.length;s++)this.remove(a[s])}},{key:"removeMatches",value:function(e,t,r,n){return this.removeStatements(this.statementsMatching(e,t,r,n)),this}},{key:"removeStatement",value:function(e){for(var t=[e.subject,e.predicate,e.object,e.why],r=0;r<4;r++){var n=this.canon(t[r]),i=n.hashString();this.index[r][i]&&h(this.index[r][i],e)}return h(this.statements,e),this}},{key:"removeStatements",value:function(e){for(var t=0;t<e.length;t++)this.remove(e[t]);return this}},{key:"replaceWith",value:function(e,t){for(var r=e.hashString(),n=t.hashString(),i=function(e){var t=e[r];if(t){var i=e[n];e[n]=i?t.concat(i):t,delete e[r]}},o=0;o<4;o++)i(this.index[o]);if(this.redirections[r]=t,e.uri){if(this.aliases[n]||(this.aliases[n]=[]),this.aliases[n].push(e),this.aliases[r])for(o=0;o<this.aliases[r].length;o++)this.redirections[this.aliases[r][o].hashString()]=t,this.aliases[n].push(this.aliases[r][o]);this.add(t,this.sym("http://www.w3.org/2007/ont/link#uri"),e.uri),this.fetcher&&this.fetcher.nowKnownAs(e,t)}return i(this.classActions),i(this.propertyActions),!0}},{key:"allAliases",value:function(e){var t=this.aliases[this.canon(e).hashString()]||[];return t.push(this.canon(e)),t}},{key:"sameThings",value:function(e,t){if(e.sameTerm(t))return!0;var r=this.canon(e);if(!r)return!1;var n=this.canon(t);return!!n&&r.uri===n.uri}},{key:"setPrefixForURI",value:function(e,t){"tab"===e&&this.namespaces.tab||"ns"!==e.slice(0,2)&&"default"!==e.slice(0,7)&&(this.namespaces[e]=t)}},{key:"statementsMatching",value:function(e,t,r,n,i){var o,a,s=[e,t,r,n],u=[],c=[],l=[],f=[];for(o=0;o<4;o++)u[o]=this.canon(d.fromValue(s[o])),u[o]?(f.push(o),c[o]=u[o].hashString()):l.push(o);if(0===f.length)return this.statements;if(1===f.length)return o=f[0],a=this.index[o][c[o]],a&&i&&a.length>1&&(a=a.slice(0,1)),a=a||[];var h,p,v=1e10;for(p=0;p<f.length;p++){if(o=f[p],!(a=this.index[o][c[o]]))return[];a.length<v&&(v=a.length,h=p)}for(var y=f[h],g=this.index[y][c[y]],m=f.slice(0,h).concat(f.slice(h+1)),b=[],w=["subject","predicate","object","why"],_=0;_<g.length;_++){var x=g[_];for(p=0;p<m.length;p++)if(o=m[p],!this.canon(x[w[o]]).sameTerm(u[o])){x=null;break}if(null!=x&&(b.push(x),i))break}return b}},{key:"uris",value:function(e){var t=this.canon(e),r=this.aliases[t.hashString()];if(!t.uri)return[];var n=[t.uri];if(r)for(var i=0;i<r.length;i++)n.push(r[i].uri);return n}},{key:"length",get:function(){return this.statements.length}}]),t}(f);t.default=g,g.handleRDFType=u},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=r(7),o=r(13).ArrayIndexOf,a=function(){function e(e){return encodeURI(e)}function t(e,t,n,i,o,a,s,u){return new r(e,t,n,i,o,a,s,u)}function r(e,t,r,n,i,o,a,s){void 0===t&&(t=null),void 0===r&&(r=""),void 0===n&&(n=null),void 0===i&&(i=""),void 0===o&&(o=null),void 0===a&&(a=""),void 0===s&&(s=null),this._bindings=new h([]),this._flags=a,""!=r&&(m(r.indexOf(":")>=0,"Document URI not absolute: "+r),this._bindings[""]=r+"#"),this._store=e,i&&e.setGenPrefix(i),this._thisDoc=r,this.source=e.sym(r),this.lines=0,this.statementCount=0,this.startOfLine=0,this.previousLine=0,this._genPrefix=i,this.keywords=new f(["a","this","bind","has","is","of","true","false"]),this.keywordsSet=0,this._anonymousNodes=new h([]),this._variables=new h([]),this._parentVariables=new h([]),this._reason=s,this._reason2=null,_&&(this._reason2=why_BecauseOfData(e.sym(r),this._reason)),this._baseURI=n||(r||null),m(!this._baseURI||this._baseURI.indexOf(":")>=0),this._genPrefix||(this._thisDoc?this._genPrefix=this._thisDoc+"#_g":this._genPrefix=RDFSink_uniqueURI()),null==t?this._thisDoc?this._formula=e.formula(r+"#_formula"):this._formula=e.formula():this._formula=t,this._context=this._formula,this._parentContext=null}function a(e,t,r,n,i){this._str=r.encode("utf-8"),this._str=r,this._i=n,this._why=i,this.lines=t,this._uri=e}function s(e,t,r,n,i){return"Line "+(t+1)+" of <"+e+">: Bad syntax: "+i+'\nat: "'+d(r,n,n+30)+'"'}var u={encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var n=e.charCodeAt(r);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},decode:function(e){for(var t="",r=0;r<e.length;){var n=e.charCodeAt(r);n<128?(t+=String.fromCharCode(n),r++):n>191&&n<224?(t+=String.fromCharCode((31&n)<<6|63&e.charCodeAt(r+1)),r+=2):(t+=String.fromCharCode((15&n)<<12|(63&e.charCodeAt(r+1))<<6|63&e.charCodeAt(r+2)),r+=3)}return t}},c="http://www.w3.org/2000/10/swap/log#",l=function(e){return e},f=function(e){return e},h=function(e){if(e.length>0)throw"missing.js: oops nnonempty dict not imp";return[]},p=function(e){return e.length},d=function(e,t,r){if(void 0===e.slice)throw"@@ mising.js: No .slice function for "+e+" of type "+(void 0===e?"undefined":n(e));return void 0===r||null==r?e.slice(t):e.slice(t,r)},v=Error("dummy error stop iteration"),y=function(e){return this.last=0,this.li=e,this.next=function(){if(this.last==this.li.length)throw v;return this.li[this.last++]},this},g=function(e,t){return e.indexOf(t)},m=function(e,t){if(!e){if(t)throw"python Assertion failed: "+t;throw"(python) Assertion failed."}},b=function(e){return String.fromCharCode(e)};String.prototype.encode=function(e){if("utf-8"!=e)throw"UTF8_converter: can only do utf-8";return u.encode(this)},String.prototype.decode=function(e){if("utf-8"!=e)throw"UTF8_converter: can only do utf-8";return this};var w=function(e,t){return i.join(t,e)},_=0,x="\t\r\n !\"#$%&'()*.,+/;<=>?@[\\]^`{|}~",k=x+":",T=(new RegExp("^[ \\t]*(#[^\\n]*)?\\r?\\n","g"),new RegExp("^[ \\t]*(#[^\\n]*)?$","g"),new RegExp("^[ \\t]*","g"),new RegExp("^[-+]?[0-9]+","g"),new RegExp("^([-+]?[0-9]+)(\\.[0-9]+)?(e[-+]?[0-9]+)?","g")),E=new RegExp("^[0-9][0-9][0-9][0-9]-[0-9][0-9]-[0-9][0-9](T[0-9][0-9]:[0-9][0-9](:[0-9][0-9](\\.[0-9]*)?)?)?Z?"),S=(new RegExp("^[0-9]+","g"),new RegExp('[\\\\\\r\\n\\"]',"g")),N=new RegExp("^[a-zA-Z0-9]+(-[a-zA-Z0-9]+)*","g");return r.prototype.here=function(e){return this._genPrefix+"_L"+this.lines+"C"+(e-this.startOfLine+1)},r.prototype.formula=function(){return this._formula},r.prototype.loadStream=function(e){return this.loadBuf(e.read())},r.prototype.loadBuf=function(e){return this.startDoc(),this.feed(e),this.endDoc()},r.prototype.feed=function(e){for(var t=e.decode("utf-8"),r=0;r>=0;){var n=this.skipSpace(t,r);if(n<0)return;var r=this.directiveOrStatement(t,n);if(r<0)throw s(this._thisDoc,this.lines,t,n,"expected directive or statement")}},r.prototype.directiveOrStatement=function(e,t){var r=this.skipSpace(e,t);if(r<0)return r;var n=this.directive(e,r);if(n>=0)return this.checkDot(e,n);var n=this.statement(e,r);return n>=0?this.checkDot(e,n):n},r.prototype.tok=function(e,t,r){if("@"==d(t,r,r+1))var r=r+1;else if(o(this.keywords,e)<0)return-1;var n=r+p(e);return d(t,r,n)==e&&x.indexOf(t.charAt(n))>=0?n:-1},r.prototype.directive=function(t,r){var n=this.skipSpace(t,r);if(n<0)return n;var i=new f([]),n=this.tok("bind",t,r);if(n>0)throw s(this._thisDoc,this.lines,t,r,"keyword bind is obsolete: use @prefix");var n=this.tok("keywords",t,r);if(n>0){var r=this.commaSeparatedList(t,n,i,!1);if(r<0)throw s(this._thisDoc,this.lines,t,r,"'@keywords' needs comma separated list of words");return this.setKeywords(d(i,null,null)),r}var n=this.tok("forAll",t,r);if(n>0){var r=this.commaSeparatedList(t,n,i,!0);if(r<0)throw s(this._thisDoc,this.lines,t,r,"Bad variable list after @forAll");var a=new y(i);try{for(;;){var u=a.next();(o(this._variables,u)<0||o(this._parentVariables,u)>=0)&&(this._variables[u]=this._context.newUniversal(u))}}catch(e){if(e!=v)throw e}return r}var n=this.tok("forSome",t,r);if(n>0){var r=this.commaSeparatedList(t,n,i,this.uri_ref2);if(r<0)throw s(this._thisDoc,this.lines,t,r,"Bad variable list after @forSome");var a=new y(i);try{for(;;){var u=a.next();this._context.declareExistential(u)}}catch(e){if(e!=v)throw e}return r}var n=this.tok("prefix",t,r);if(n>=0){var c=new f([]),r=this.qname(t,n,c);if(r<0)throw s(this._thisDoc,this.lines,t,n,"expected qname after @prefix");var n=this.uri_ref2(t,r,c);if(n<0)throw s(this._thisDoc,this.lines,t,r,"expected <uriref> after @prefix _qname_");var l=c[1].uri;if(this._baseURI)var l=w(this._baseURI,l);else m(l.indexOf(":")>=0,"With no base URI, cannot handle relative URI for NS");return m(l.indexOf(":")>=0),this._bindings[c[0][0]]=l,this.bind(c[0][0],e(l)),n}var n=this.tok("base",t,r);if(n>=0){var c=new f([]),r=this.uri_ref2(t,n,c);if(r<0)throw s(this._thisDoc,this.lines,t,n,"expected <uri> after @base ");var l=c[0].uri;if(!this._baseURI)throw s(this._thisDoc,this.lines,t,n,"With no previous base URI, cannot use relative URI in @base  <"+l+">");var l=w(this._baseURI,l);return m(l.indexOf(":")>=0),this._baseURI=l,r}return-1},r.prototype.bind=function(e,t){""==e||this._store.setPrefixForURI(e,t)},r.prototype.setKeywords=function(e){null==e?this.keywordsSet=0:(this.keywords=e,this.keywordsSet=1)},r.prototype.startDoc=function(){},r.prototype.endDoc=function(){return this._formula},r.prototype.makeStatement=function(e){e[0].add(e[2],e[1],e[3],this.source),this.statementCount+=1},r.prototype.statement=function(e,t){var r=new f([]),t=this.object(e,t,r);if(t<0)return t;var n=this.property_list(e,t,r[0]);if(n<0)throw s(this._thisDoc,this.lines,e,t,"expected propertylist");return n},r.prototype.subject=function(e,t,r){return this.item(e,t,r)},r.prototype.verb=function(e,t,r){var n=this.skipSpace(e,t);if(n<0)return n;var i=new f([]),n=this.tok("has",e,t);if(n>=0){var t=this.prop(e,n,i);if(t<0)throw s(this._thisDoc,this.lines,e,n,"expected property after 'has'");return r.push(new l(["->",i[0]])),t}var n=this.tok("is",e,t);if(n>=0){var t=this.prop(e,n,i);if(t<0)throw s(this._thisDoc,this.lines,e,n,"expected <property> after 'is'");var n=this.skipSpace(e,t);if(n<0)throw s(this._thisDoc,this.lines,e,t,"End of file found, expected property after 'is'");var t=n,n=this.tok("of",e,t);if(n<0)throw s(this._thisDoc,this.lines,e,t,"expected 'of' after 'is' <prop>");return r.push(new l(["<-",i[0]])),n}var n=this.tok("a",e,t);if(n>=0)return r.push(new l(["->",this._store.sym("http://www.w3.org/1999/02/22-rdf-syntax-ns#type")])),n;if("<="==d(e,t,t+2))return r.push(new l(["<-",this._store.sym(c+"implies")])),t+2;if("="==d(e,t,t+1))return">"==d(e,t+1,t+2)?(r.push(new l(["->",this._store.sym(c+"implies")])),t+2):(r.push(new l(["->",this._store.sym("http://www.w3.org/2002/07/owl#sameAs")])),t+1);if(":="==d(e,t,t+2))return r.push(new l(["->",c+"becomes"])),t+2;var n=this.prop(e,t,i);if(n>=0)return r.push(new l(["->",i[0]])),n;if(">-"==d(e,t,t+2)||"<-"==d(e,t,t+2))throw s(this._thisDoc,this.lines,e,n,">- ... -> syntax is obsolete.");return-1},r.prototype.prop=function(e,t,r){return this.item(e,t,r)},r.prototype.item=function(e,t,r){return this.path(e,t,r)},r.prototype.blankNode=function(e){return this._context.bnode(e,this._reason2)},r.prototype.path=function(e,t,r){var n=this.nodeOrLiteral(e,t,r);if(n<0)return n;for(;"!^.".indexOf(d(e,n,n+1))>=0;){var i=d(e,n,n+1);if("."==i){var o=d(e,n+1,n+2);if(!o||k.indexOf(o)>=0&&":?<[{(".indexOf(o)<0)break}var a=r.pop(),u=this.blankNode(this.here(n)),n=this.node(e,n+1,r);if(n<0)throw s(this._thisDoc,this.lines,e,n,"EOF found in middle of path syntax");var c=r.pop();"^"==i?this.makeStatement(new l([this._context,c,u,a])):this.makeStatement(new l([this._context,c,a,u])),r.push(u)}return n},r.prototype.anonymousNode=function(e){var t=this._anonymousNodes[e];if(t)return t;var t=this._store.bnode(this._context,this._reason2);return this._anonymousNodes[e]=t,t},r.prototype.node=function(e,t,r,n){void 0===n&&(n=null);var i=n,o=this.skipSpace(e,t);if(o<0)return o;var t=o,a=d(e,t,t+1);if("["==a){var u=this.here(t),o=this.skipSpace(e,t+1);if(o<0)throw s(this._thisDoc,this.lines,e,t,"EOF after '['");if("="==d(e,o,o+1)){var t=o+1,c=new f([]),o=this.objectList(e,t,c);if(!(o>=0))throw s(this._thisDoc,this.lines,e,t,"objectList expected after [= ");var i=c[0];if(p(c)>1){var g=new y(c);try{for(;;){var m=g.next();this.makeStatement(new l([this._context,this._store.sym("http://www.w3.org/2002/07/owl#sameAs"),i,m]))}}catch(e){if(e!=v)throw e}}var o=this.skipSpace(e,o);if(o<0)throw s(this._thisDoc,this.lines,e,t,"EOF when objectList expected after [ = ");if(";"==d(e,o,o+1))var o=o+1}if(null==i)var i=this.blankNode(u);var t=this.property_list(e,o,i);if(t<0)throw s(this._thisDoc,this.lines,e,o,"property_list expected");var o=this.skipSpace(e,t);if(o<0)throw s(this._thisDoc,this.lines,e,t,"EOF when ']' expected after [ <propertyList>");if("]"!=d(e,o,o+1))throw s(this._thisDoc,this.lines,e,o,"']' expected");return r.push(i),o+1}if("{"==a){var b=d(e,t+1,t+2);if("$"==b){t+=1;for(var o=t+1,w=new f([]),_=!0;;){var t=this.skipSpace(e,o);if(t<0)throw s(this._thisDoc,this.lines,e,t,"needed '$}', found end.");if("$}"==d(e,t,t+2)){var o=t+2;break}if(_)var _=!1;else{if(","!=d(e,t,t+1))throw s(this._thisDoc,this.lines,e,t,"expected: ','");t+=1}var x=new f([]),o=this.item(e,t,x);if(o<0)throw s(this._thisDoc,this.lines,e,t,"expected item in set or '$}'");w.push(x[0])}return r.push(this._store.newSet(w,this._context)),o}var o=t+1,k=this._parentContext;this._parentContext=this._context;var T=this._anonymousNodes,E=this._parentVariables;this._parentVariables=this._variables,this._anonymousNodes=new h([]),this._variables=this._variables.slice();var S=this._reason2;if(this._reason2=null,null==i)var i=this._store.formula();for(this._context=i;;){var t=this.skipSpace(e,o);if(t<0)throw s(this._thisDoc,this.lines,e,t,"needed '}', found end.");if("}"==d(e,t,t+1)){var o=t+1;break}var o=this.directiveOrStatement(e,t);if(o<0)throw s(this._thisDoc,this.lines,e,t,"expected statement or '}'")}return this._anonymousNodes=T,this._variables=this._parentVariables,this._parentVariables=E,this._context=this._parentContext,this._reason2=S,this._parentContext=k,r.push(i.close()),o}if("("==a){var N=this._store.list,b=d(e,t+1,t+2);if("$"==b){var N=this._store.newSet;t+=1}for(var o=t+1,w=new f([]);;){var t=this.skipSpace(e,o);if(t<0)throw s(this._thisDoc,this.lines,e,t,"needed ')', found end.");if(")"==d(e,t,t+1)){var o=t+1;break}var x=new f([]),o=this.item(e,t,x);if(o<0)throw s(this._thisDoc,this.lines,e,t,"expected item in list or ')'");w.push(x[0])}return r.push(N(w,this._context)),o}var o=this.tok("this",e,t);if(o>=0)throw s(this._thisDoc,this.lines,e,t,"Keyword 'this' was ancient N3. Now use @forSome and @forAll keywords.");var o=this.tok("true",e,t);if(o>=0)return r.push(!0),o;var o=this.tok("false",e,t);if(o>=0)return r.push(!1),o;if(null==i){var o=this.uri_ref2(e,t,r);if(o>=0)return o}return-1},r.prototype.property_list=function(e,t,r){for(;;){var n=this.skipSpace(e,t);if(n<0)throw s(this._thisDoc,this.lines,e,t,"EOF found when expected verb in property list");if(":-"!=d(e,n,n+2)){var t=n,i=new f([]),n=this.verb(e,t,i);if(n<=0)return t;var o=new f([]),t=this.objectList(e,n,o);if(t<0)throw s(this._thisDoc,this.lines,e,n,"objectList expected");var a=new y(o);try{for(;;){var u=a.next(),c=i[0],h=c[0],p=c[1];"->"==h?this.makeStatement(new l([this._context,p,r,u])):this.makeStatement(new l([this._context,p,u,r]))}}catch(e){if(e!=v)throw e}var n=this.skipSpace(e,t);if(n<0)throw s(this._thisDoc,this.lines,e,n,"EOF found in list of objects");if(";"!=d(e,t,t+1))return t;var t=t+1}else{var t=n+2,g=new f([]),n=this.node(e,t,g,r);if(n<0)throw s(this._thisDoc,this.lines,e,t,"bad {} or () or [] node after :- ");var t=n}}},r.prototype.commaSeparatedList=function(e,t,r,n){var i=this.skipSpace(e,t);if(i<0)throw s(this._thisDoc,this.lines,e,i,"EOF found expecting comma sep list");if("."==e.charAt(i))return t;if(n)var i=this.uri_ref2(e,i,r);else var i=this.bareWord(e,i,r);if(i<0)return-1;for(;;){var t=this.skipSpace(e,i);if(t<0)return t;var o=d(e,t,t+1);if(","!=o)return"."!=o?-1:t;if(n)var i=this.uri_ref2(e,t+1,r);else var i=this.bareWord(e,t+1,r);if(i<0)throw s(this._thisDoc,this.lines,e,i,"bad list content")}},r.prototype.objectList=function(e,t,r){var t=this.object(e,t,r);if(t<0)return-1;for(;;){var n=this.skipSpace(e,t);if(n<0)throw s(this._thisDoc,this.lines,e,n,"EOF found after object");if(","!=d(e,n,n+1))return n;var t=this.object(e,n+1,r);if(t<0)return t}},r.prototype.checkDot=function(e,t){var r=this.skipSpace(e,t);if(r<0)return r;if("."==d(e,r,r+1))return r+1;if("}"==d(e,r,r+1))return r;if("]"==d(e,r,r+1))return r;throw s(this._thisDoc,this.lines,e,r,"expected '.' or '}' or ']' at end of statement")},r.prototype.uri_ref2=function(e,t,r){var n=new f([]),i=this.qname(e,t,n);if(i>=0){var a=n[0],u=a[0],c=a[1];if(null==u){m(0,"not used?");var l=this._baseURI+"#"}else{var l=this._bindings[u];if(!l){if("_"==u)return r.push(this.anonymousNode(c)),i;throw s(this._thisDoc,this.lines,e,t,"Prefix "+u+" not bound.")}}var h=this._store.sym(l+c);return o(this._variables,h)>=0?r.push(this._variables[h]):r.push(h),i}var t=this.skipSpace(e,t);if(t<0)return-1;if("?"==e.charAt(t)){var v=new f([]),i=this.variable(e,t,v);return i>0?(r.push(v[0]),i):-1}if("<"==e.charAt(t)){for(var t=t+1,y=t;t<p(e);){if(">"==e.charAt(t)){var g=d(e,y,t);if(this._baseURI)var g=w(this._baseURI,g);else m(g.indexOf(":")>=0,"With no base URI, cannot deal with relative URIs");if("#"==d(e,t-1,t)&&"#"!=d(g,-1,null))var g=g+"#";var h=this._store.sym(g);return o(this._variables,h)>=0?r.push(this._variables[h]):r.push(h),t+1}var t=t+1}throw s(this._thisDoc,this.lines,e,i,"unterminated URI reference")}if(this.keywordsSet){var v=new f([]),i=this.bareWord(e,t,v);if(i<0)return-1;if(o(this.keywords,v[0])>=0)throw s(this._thisDoc,this.lines,e,t,'Keyword "'+v[0]+'" not allowed here.');return r.push(this._store.sym(this._bindings[""]+v[0])),i}return-1},r.prototype.skipSpace=function(e,t){for(var r=" \n\r\t\f\v            ​\u2028\u2029　",n=t||0;n<e.length;n++){var i=e.charAt(n);if(r.indexOf(i)<0){if("#"!==e.charAt(n))return n;for(;;n++){if(n===e.length)return-1;if("\n"===e.charAt(n)){this.lines=this.lines+1;break}}}else"\n"===e.charAt(n)&&(this.lines=this.lines+1)}return-1},r.prototype.variable=function(e,t,r){var n=this.skipSpace(e,t);if(n<0)return-1;if("?"!=d(e,n,n+1))return-1;var n=n+1,t=n;if("0123456789-".indexOf(e.charAt(n))>=0)throw s(this._thisDoc,this.lines,e,n,"Varible name can't start with '"+e.charAt(n)+"s'");for(;t<p(e)&&k.indexOf(e.charAt(t))<0;)var t=t+1;if(null==this._parentContext)throw s(this._thisDoc,this.lines,e,n,"Can't use ?xxx syntax for variable in outermost level: "+d(e,n-1,t));return r.push(this._store.variable(d(e,n,t))),t},r.prototype.bareWord=function(e,t,r){var n=this.skipSpace(e,t);if(n<0)return-1;var i=e.charAt(n);if("0123456789-".indexOf(i)>=0)return-1;if(k.indexOf(i)>=0)return-1;for(var t=n;t<p(e)&&k.indexOf(e.charAt(t))<0;)var t=t+1;return r.push(d(e,n,t)),t},r.prototype.qname=function(e,t,r){var t=this.skipSpace(e,t);if(t<0)return-1;var n=e.charAt(t);if("0123456789-+".indexOf(n)>=0)return-1;if(k.indexOf(n)<0)for(var i=n,t=t+1;t<p(e);){var n=e.charAt(t);if(!(k.indexOf(n)<0))break;var i=i+n,t=t+1}else var i="";if(t<p(e)&&":"==e.charAt(t)){for(var a=i,t=t+1,i="";t<p(e);){var n=e.charAt(t);if(!(k.indexOf(n)<0))break;var i=i+n,t=t+1}return r.push(new l([a,i])),t}return i&&this.keywordsSet&&o(this.keywords,i)<0?(r.push(new l(["",i])),t):-1},r.prototype.object=function(e,t,r){var n=this.subject(e,t,r);if(n>=0)return n;var n=this.skipSpace(e,t);if(n<0)return-1;var t=n;if('"'==e.charAt(t)){if('"""'==d(e,t,t+3))var i='"""';else var i='"';var t=t+p(i),o=this.strconst(e,t,i),n=o[0],a=o[1];return r.push(this._store.literal(a)),n}return-1},r.prototype.nodeOrLiteral=function(e,t,r){var n=this.node(e,t,r);if(n>=0)return n;var n=this.skipSpace(e,t);if(n<0)return-1;var t=n,i=e.charAt(t);if("-+0987654321".indexOf(i)>=0){E.lastIndex=0;var o=E.exec(e.slice(t));if(null!=o){var a=o[0];n=t+a.length,a.indexOf("T")>=0?r.push(this._store.literal(a,void 0,this._store.sym("http://www.w3.org/2001/XMLSchema#dateTime"))):r.push(this._store.literal(a,void 0,this._store.sym("http://www.w3.org/2001/XMLSchema#date")))}else{T.lastIndex=0;var o=T.exec(e.slice(t));if(null==o)throw s(this._thisDoc,this.lines,e,t,"Bad number or date syntax");n=t+T.lastIndex;var a=d(e,t,n);a.indexOf("e")>=0?r.push(this._store.literal(parseFloat(a),void 0,this._store.sym("http://www.w3.org/2001/XMLSchema#double"))):d(e,t,n).indexOf(".")>=0?r.push(this._store.literal(parseFloat(a),void 0,this._store.sym("http://www.w3.org/2001/XMLSchema#decimal"))):r.push(this._store.literal(parseInt(a),void 0,this._store.sym("http://www.w3.org/2001/XMLSchema#integer")))}return n}if('"'==e.charAt(t)){if('"""'==d(e,t,t+3))var u='"""';else var u='"';var t=t+p(u),c=null,l=this.strconst(e,t,u),n=l[0],h=l[1],v=null;if("@"==d(e,n,n+1)){N.lastIndex=0;var o=N.exec(e.slice(n+1));if(null==o)throw s(this._thisDoc,startline,e,t,"Bad language code syntax on string literal, after @");var t=N.lastIndex+n+1,v=d(e,n+1,t),n=t}if("^^"==d(e,n,n+2))var y=new f([]),n=this.uri_ref2(e,n+2,y),c=y[0];return r.push(this._store.literal(h,v,c)),n}return-1},r.prototype.strconst=function(e,t,r){for(var n=t,i="",o=this.lines;n<p(e);){var t=n+p(r);if(d(e,n,t)==r)return new l([t,i]);if('"'!=e.charAt(n)){S.lastIndex=0;if(!S.exec(e.slice(n)))throw s(this._thisDoc,o,e,n,"Closing quote missing in string at ^ in "+d(e,n-20,n)+"^"+d(e,n,n+20));var t=n+S.lastIndex-1,i=i+d(e,n,t),a=e.charAt(t);if('"'!=a)if("\r"!=a){if("\n"==a){if('"'==r)throw s(this._thisDoc,o,e,t,"newline found in string literal");this.lines=this.lines+1;var i=i+a,n=t+1;this.previousLine=this.startOfLine,this.startOfLine=n}else if("\\"==a){var n=t+1,a=d(e,n,n+1);if(!a)throw s(this._thisDoc,o,e,t,"unterminated string literal (2)");var u=g('abfrtvn\\"',a);if(u>=0)var c='a\b\f\r\t\v\n\\"'.charAt(u),i=i+c,n=n+1;else if("u"==a)var f=this.uEscape(e,n+1,o),n=f[0],a=f[1],i=i+a;else{if("U"!=a)throw s(this._thisDoc,this.lines,e,t,"bad escape");var f=this.UEscape(e,n+1,o),n=f[0],a=f[1],i=i+a}}}else var n=t+1;else var n=t}else var i=i+'"',n=n+1}throw s(this._thisDoc,this.lines,e,t,"unterminated string literal")},r.prototype.uEscape=function(e,t,r){for(var n=t,i=0,o=0;i<4;){var a=d(e,n,n+1),u=a.toLowerCase(),n=n+1;if(""==u)throw s(this._thisDoc,r,e,t,"unterminated string literal(3)");var c=g("0123456789abcdef",u);if(c<0)throw s(this._thisDoc,r,e,t,"bad string literal hex escape");var o=16*o+c,i=i+1}var f=String.fromCharCode(o);return new l([n,f])},r.prototype.UEscape=function(e,t,r){for(var n=t,i=0,o="\\U";i<8;){var a=d(e,n,n+1),u=a.toLowerCase(),n=n+1;if(""==u)throw s(this._thisDoc,r,e,t,"unterminated string literal(3)");if(g("0123456789abcdef",u)<0)throw s(this._thisDoc,r,e,t,"bad string literal hex escape");var o=o+u,i=i+1}var c=b("0x"+d(o,2,10)-0);return new l([n,c])},a.prototype.toString=function(){var e=this._str,t=this._i,r=0;if(t>60)var n="...",r=t-60;else var n="";if(p(e)-t>60)var i="...";else var i="";return'Line %i of <%s>: Bad syntax (%s) at ^ in:\n"%s%s^%s%s"'%new l([this.lines+1,this._uri,this._why,n,d(e,r,t),d(e,t,t+60),i])},t}();e.exports=a},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,r,n){function i(e,t){return e.nvars!==t.nvars?e.nvars-t.nvars:e.index.length-t.index.length}var o=function(e){var t,r="";for(t in e)e.hasOwnProperty(t)&&(r+="    "+t+" -> "+e[t]);return r},a=function(e){var t,r="Bindings: ",n=e.length;for(t=0;t<n;t++)r+=o(e[t][0])+";\n\t";return r},c=function(e,t,r,n){var i=r[e];if(void 0===i){if(e.isVar){var o=[];return o[e]=t,[[o,null]]}i=e}if(!i.complexType)return n.redirections[i]&&(i=n.redirections[i]),n.redirections[t]&&(t=n.redirections[t]),i.sameTerm(t)?[[[],null]]:[];if(e instanceof Array)return t instanceof Array?l(e,t,r):[];throw new Error("query.js: oops - code not written yet")},l=function e(t,r,n,i){var o;if(t.length!==r.length)return[];if(!t.length)return[[[],null]];var a=c(t[0],r[0],n,i);if(0===a.length)return a;var s,u,l,f,h,p,d,v=[],y=a.length;for(s=0;s<y;s++){u=a[s][0],d=[];for(h in u)u.hasOwnProperty(h)&&(d[h]=u[h]);for(h in n)n.hasOwnProperty(h)&&(d[h]=n[h]);for(o=e(t.slice(1),r.slice(1),d,i),f=o.length,l=0;l<f;l++){p=o[l][0];for(h in u)u.hasOwnProperty(h)&&(p[h]=u[h]);v.push([p,null])}}return v},f=function(e,t){var r=t[e];return void 0===r?e:r},h=function(e,t){var r,n={};for(r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);for(r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n},p=function(e,t){return this.trunkBindings=t,this.originalCallback=e,this.branches=[],this};p.prototype.checkAllDone=function(){var e;for(e=0;e<this.branches.length;e++)if(!this.branches[e].done)return;s.debug("OPTIONAL BIDNINGS ALL DONE:"),this.doCallBacks(this.branches.length-1,this.trunkBindings)},p.prototype.doCallBacks=function(e,t){var r;if(e<0)return this.originalCallback(t);for(r=0;r<this.branches[e].results.length;r++)this.doCallBacks(e-1,h(t,this.branches[e].results[r]))};var d=function(e,t){return this.count=0,this.success=!1,this.done=!1,this.callback=e,this.onDone=t,this};d.prototype.reportMatch=function(e){this.callback(e),this.success=!0},d.prototype.reportDone=function(){this.done=!0,s.info("Mandatory query branch finished.***"),void 0!==this.onDone&&this.onDone()};var v=function(e){return this.count=0,this.done=!1,this.results=[],this.junction=e,e.branches.push(this),this};v.prototype.reportMatch=function(e){this.results.push(e)},v.prototype.reportDone=function(){s.debug("Optional branch finished - results.length = "+this.results.length),0===this.results.length&&(this.results.push({}),s.debug("Optional branch FAILED - that's OK.")),this.done=!0,this.junction.checkAllDone()};var y=function(e,t,r){var n,i,o,a,s;for(t.nvars=0,t.index=null,i=[t.subject,t.predicate,t.object],s=[e.subjectIndex,e.predicateIndex,e.objectIndex],a=0;a<3;a++)if(i[a].isVar&&void 0===r[i[a]])t.nvars++;else{if(n=f(i[a],r),e.redirections[n.hashString()]&&(n=e.redirections[n.hashString()]),!(o=s[a][n.hashString()]))return t.index=[],!1;(null===t.index||t.index.length>o.length)&&(t.index=o)}return null===t.index&&(t.index=e.statements),!0},g=0,m=function e(r,n,i,a,c,l,f){s.debug("Match begins, Branch count now: "+f.count+" for "+f.pattern_debug);var h=r.fetcher?r.fetcher:null,d=n.statements;if(0===d.length){if(s.debug("FOUND MATCH WITH BINDINGS:"+o(i)),0===n.optional.length)f.reportMatch(i);else{s.debug("OPTIONAL: "+n.optional);var y,m=new p(t,i),b=[];for(y=0;y<n.optional.length;y++)b[y]=new v(m),b[y].pattern_debug=n.optional[y];for(y=0;y<n.optional.length;y++)b[y].count=b[y].count+1,e(r,n.optional[y],i,"",c,t,b[y])}return f.count--,void s.debug("Match ends -- success , Branch count now: "+f.count+" for "+f.pattern_debug)}var _,x,k=d.length;if(h){var T=(g++,function(t,o){var s=t.uri.split("#")[0];h.nowOrWhenFetched(s,void 0,function(o,s,u){o&&console.log("Error following link to <"+t.uri+"> in query: "+s),e(r,n,i,a,c,l,f)})});for(x=0;x<k;x++){if(_=d[x],void 0!==i[_.subject]&&i[_.subject].uri&&h&&"unrequested"===h.getState(u(i[_.subject].uri)))return void T(i[_.subject]);if(void 0!==i[_.object]&&i[_.object].uri&&h&&"unrequested"===h.getState(u(i[_.object].uri)))return void T(i[_.object])}}w(r,n,i,a,c,l,f)},b=function(e,t){var r,n,i=!0;for(r in e)e.hasOwnProperty(r)&&t[r]&&(n=t[r].test)&&!n(e[r])&&(i=!1);return i},w=function(e,t,r,n,u,c,f){var h,p,d,v,g,w,_,x=t.statements,k=x.length;for(h=0;h<k;h++)_=x[h],s.info("match2: item="+_+", bindingsSoFar="+o(r)),y(e,_,r);x.sort(i),_=x[0];var T=e.formula();T.optional=t.optional,T.constraints=t.constraints,T.statements=x.slice(1),s.debug(n+"match2 searching "+_.index.length+" for "+_+"; bindings so far="+o(r));var E,S,N,I=_.index.length,O=0;for(E=0;E<I;E++)for(N=_.index[E],S=l([_.subject,_.predicate,_.object],[N.subject,N.predicate,N.object],r,e),s.info(n+" From first: "+S.length+": "+a(S)),d=S.length,p=0;p<d;p++)if(g=[],w=S[p][0],b(w,t.constraints)){for(v in w)w.hasOwnProperty(v)&&(g[v]=w[v]);for(v in r)r.hasOwnProperty(v)&&(g[v]=r[v]);f.count++,O++,m(e,T,g,n+"  ",u,c,f)}else s.debug("Branch count CS: "+f.count);f.count--,0===O&&s.debug("Match2 fails completely on "+_),s.debug("Match2 ends, Branch count: "+f.count+" for "+f.pattern_debug),0===f.count&&(s.debug("Branch finished."),f.reportDone())},_=this;s.debug("Query on "+this.statements.length);var x=new d(t,n);x.count++,setTimeout(function(){m(_,e.pat,e.pat.initBindings,"",r,t,x)},0)}var o=r(56),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=r(24),u=r(7).docpart,c=function e(t,r){n(this,e),this.pat=new a.default,this.vars=[],this.name=t,this.id=r};e.exports.Query=c,e.exports.indexedFormulaQuery=i},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(6),a=function(){function e(t,r,i,a){n(this,e),this.subject=o.fromValue(t),this.predicate=o.fromValue(r),this.object=o.fromValue(i),this.why=a}return i(e,[{key:"equals",value:function(e){return e.subject.equals(this.subject)&&e.predicate.equals(this.predicate)&&e.object.equals(this.object)&&e.graph.equals(this.graph)}},{key:"substitute",value:function(t){var r=new e(this.subject.substitute(t),this.predicate.substitute(t),this.object.substitute(t),this.why.substitute(t));return console.log("@@@ statement substitute:"+r),r}},{key:"toCanonical",value:function(){var e=[this.subject.toCanonical(),this.predicate.toCanonical(),this.object.toCanonical()];return this.graph&&"DefaultGraph"!==this.graph.termType&&e.push(this.graph.toCanonical()),e.join(" ")+" ."}},{key:"toNT",value:function(){return[this.subject.toNT(),this.predicate.toNT(),this.object.toNT()].join(" ")+" ."}},{key:"toString",value:function(){return this.toNT()}},{key:"graph",get:function(){return this.why},set:function(e){this.why=e}}]),e}();e.exports=a},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(30),u=r(6),c=r(7),l=function(e){function t(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];n(this,t);var r=i(this,Object.getPrototypeOf(t).call(this));return r.termType=t.termType,r.value=e,r.base="varid:",r.uri=c.join(e,r.base),r}return o(t,e),a(t,[{key:"equals",value:function(e){return!!e&&(this.termType===e.termType&&this.value===e.value)}},{key:"hashString",value:function(){return this.toString()}},{key:"substitute",value:function(e){var t;return null!=(t=e[this.toNT()])?t:this}},{key:"toString",value:function(){return this.uri.slice(0,this.base.length)===this.base?"?"+this.uri.slice(this.base.length):"?"+this.uri}}]),t}(u);l.termType="Variable",l.prototype.classOrder=s.Variable,l.prototype.isVar=1,e.exports=l},function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return o.default.Set(e.map(s))}Object.defineProperty(t,"__esModule",{value:!0}),t.Node=void 0,t.nodeSet=n;var i=r(225),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=r(93),s=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);t.default=e}(a),t.Node=o.default.Record({termType:"",value:"",language:"",datatype:""}))},function(e,t,r){e.exports={default:r(171),__esModule:!0}},function(e,t,r){e.exports={default:r(178),__esModule:!0}},function(e,t,r){e.exports={default:r(181),__esModule:!0}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=r(162),o=n(i),a=r(160),s=n(a),u=r(113),c=n(u);t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,c.default)(t)));e.prototype=(0,s.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(o.default?(0,o.default)(e,t):e.__proto__=t)}},function(e,t,r){"use strict";t.__esModule=!0;var n=r(113),i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,i.default)(t))&&"function"!=typeof t?e:t}},function(e,t,r){"use strict";(function(e){var n=r(10),i=n.Buffer,o=n.SlowBuffer,a=n.kMaxLength||2147483647;t.alloc=function(e,t,r){if("function"==typeof i.alloc)return i.alloc(e,t,r);if("number"==typeof r)throw new TypeError("encoding must not be number");if("number"!=typeof e)throw new TypeError("size must be a number");if(e>a)throw new RangeError("size is too large");var n=r,o=t;void 0===o&&(n=void 0,o=0);var s=new i(e);if("string"==typeof o)for(var u=new i(o,n),c=u.length,l=-1;++l<e;)s[l]=u[l%c];else s.fill(o);return s},t.allocUnsafe=function(e){if("function"==typeof i.allocUnsafe)return i.allocUnsafe(e);if("number"!=typeof e)throw new TypeError("size must be a number");if(e>a)throw new RangeError("size is too large");return new i(e)},t.from=function(t,r,n){if("function"==typeof i.from&&(!e.Uint8Array||Uint8Array.from!==i.from))return i.from(t,r,n);if("number"==typeof t)throw new TypeError('"value" argument must not be a number');if("string"==typeof t)return new i(t,r);if("undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer){var o=r;if(1===arguments.length)return new i(t);void 0===o&&(o=0);var a=n;if(void 0===a&&(a=t.byteLength-o),o>=t.byteLength)throw new RangeError("'offset' is out of bounds");if(a>t.byteLength-o)throw new RangeError("'length' is out of bounds");return new i(t.slice(o,o+a))}if(i.isBuffer(t)){var s=new i(t.length);return t.copy(s,0,0,t.length),s}if(t){if(Array.isArray(t)||"undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return new i(t);if("Buffer"===t.type&&Array.isArray(t.data))return new i(t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},t.allocUnsafeSlow=function(e){if("function"==typeof i.allocUnsafeSlow)return i.allocUnsafeSlow(e);if("number"!=typeof e)throw new TypeError("size must be a number");if(e>=a)throw new RangeError("size is too large");return new o(e)}}).call(t,r(2))},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},function(e,t,r){var n=r(17),i=r(3).document,o=n(i)&&n(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,r){var n=r(34);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t,r){"use strict";var n=r(49),i=r(8),o=r(124),a=r(16),s=r(21),u=r(26),c=r(196),l=r(36),f=r(122),h=r(1)("iterator"),p=!([].keys&&"next"in[].keys()),d=function(){return this};e.exports=function(e,t,r,v,y,g,m){c(r,t,v);var b,w,_,x=function(e){if(!p&&e in S)return S[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},k=t+" Iterator",T="values"==y,E=!1,S=e.prototype,N=S[h]||S["@@iterator"]||y&&S[y],I=N||x(y),O=y?T?x("entries"):I:void 0,R="Array"==t?S.entries||N:N;if(R&&(_=f(R.call(new e)))!==Object.prototype&&(l(_,k,!0),n||s(_,h)||a(_,h,d)),T&&N&&"values"!==N.name&&(E=!0,I=function(){return N.call(this)}),n&&!m||!p&&!E&&S[h]||a(S,h,I),u[t]=I,u[k]=d,y)if(b={values:T?I:x("values"),keys:g?I:x("keys"),entries:O},m)for(w in b)w in S||o(S,w,b[w]);else i(i.P+i.F*(p||E),t,b);return b}},function(e,t,r){var n=r(53)("meta"),i=r(17),o=r(21),a=r(9).f,s=0,u=Object.isExtensible||function(){return!0},c=!r(20)(function(){return u(Object.preventExtensions({}))}),l=function(e){a(e,n,{value:{i:"O"+ ++s,w:{}}})},f=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,n)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[n].i},h=function(e,t){if(!o(e,n)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[n].w},p=function(e){return c&&d.NEED&&u(e)&&!o(e,n)&&l(e),e},d=e.exports={KEY:n,NEED:!1,fastKey:f,getWeak:h,onFreeze:p}},function(e,t,r){var n=r(51),i=r(35),o=r(18),a=r(82),s=r(21),u=r(115),c=Object.getOwnPropertyDescriptor;t.f=r(11)?c:function(e,t){if(e=o(e),t=a(t,!0),u)try{return c(e,t)}catch(e){}if(s(e,t))return i(!n.f.call(e,t),e[t])}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,r){var n=r(8),i=r(0),o=r(20);e.exports=function(e,t){var r=(i.Object||{})[e]||Object[e],a={};a[e]=t(r),n(n.S+n.F*o(function(){r(1)}),"Object",a)}},function(e,t,r){var n=r(16);e.exports=function(e,t,r){for(var i in t)r&&e[i]?e[i]=t[i]:n(e,i,t[i]);return e}},function(e,t,r){var n=r(80)("keys"),i=r(53);e.exports=function(e){return n[e]||(n[e]=i(e))}},function(e,t,r){var n=r(3),i=n["__core-js_shared__"]||(n["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t,r){var n=r(17);e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,r){var n=r(3),i=r(0),o=r(49),a=r(84),s=r(9).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,r){t.f=r(1)},function(e,t,r){var n=r(46),i=r(1)("iterator"),o=r(26);e.exports=r(0).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||o[n(e)]}},function(e,t){},function(e,t,r){(function(t){function r(e){if(!(this instanceof r))return new r(e);if(e&&e.lineMode){this._tripleQuotedString=this._number=this._boolean=/$0^/;var t=this;this._tokenize=this.tokenize,this.tokenize=function(e,r){this._tokenize(e,function(e,n){!e&&/^(?:IRI|prefixed|literal|langcode|type|\.|eof)$/.test(n.type)?r&&r(e,n):r&&r(e||t._syntaxError(n.type,r=null))})}}}var n=String.fromCharCode,i="function"==typeof t?t:function(e){setTimeout(e,0)},o={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},a=/[\x00-\x20<>\\"\{\}\|\^\`]/;r.prototype={_iri:/^<((?:[^>\\]|\\[uU])+)>/,_unescapedIri:/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>/,_unescapedString:/^"[^"\\]+"(?=[^"\\])/,_singleQuotedString:/^"[^"\\]*(?:\\.[^"\\]*)*"(?=[^"\\])|^'[^'\\]*(?:\\.[^'\\]*)*'(?=[^'\\])/,_tripleQuotedString:/^""("[^"\\]*(?:(?:\\.|"(?!""))[^"\\]*)*")""|^''('[^'\\]*(?:(?:\\.|'(?!''))[^'\\]*)*')''/,_langcode:/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,_prefix:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,_prefixed:/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?=\.?[,;\s#()\[\]\{\}"'<])/,_blank:/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=\.?[,;:\s#()\[\]\{\}"'<])/,_number:/^[\-+]?(?:\d+\.?\d*([eE](?:[\-\+])?\d+)|\d*\.?\d+)(?=[.,;:\s#()\[\]\{\}"'<])/,_boolean:/^(?:true|false)(?=[.,;:\s#()\[\]\{\}"'<])/,_keyword:/^@[a-z]+(?=[\s#<:])/,_sparqlKeyword:/^(?:PREFIX|BASE|GRAPH)(?=[\s#<:])/i,_shortPredicates:/^a(?=\s+|<)/,_newline:/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,_whitespace:/^[ \t]+/,_endOfFile:/^(?:#[^\n\r]*)?$/,_tokenizeToEnd:function(e,t){function r(t){e(t._syntaxError(/^\S*/.exec(n)[0]))}for(var n=this._input;;){for(var i;i=this._newline.exec(n);)n=n.substr(i[0].length,n.length),this._line++;if((i=this._whitespace.exec(n))&&(n=n.substr(i[0].length,n.length)),this._endOfFile.test(n))return t&&e(n=null,{line:this._line,type:"eof",value:"",prefix:""}),this._input=n;var o,s=this._line,u="",c="",l="",f=n[0],h=null,p=0,d=!1;switch(f){case"^":if(1===n.length)break;if("^"!==n[1])return r(this);if(this._prevTokenType="^",n=n.substr(2),"<"!==n[0]){d=!0;break}case"<":if(h=this._unescapedIri.exec(n))u="IRI",c=h[1];else if(h=this._iri.exec(n)){if(null===(o=this._unescape(h[1]))||a.test(o))return r(this);u="IRI",c=o}break;case"_":((h=this._blank.exec(n))||t&&(h=this._blank.exec(n+" ")))&&(u="prefixed",l="_",c=h[1]);break;case'"':case"'":if(h=this._unescapedString.exec(n))u="literal",c=h[0];else if(h=this._singleQuotedString.exec(n)){if(null===(o=this._unescape(h[0])))return r(this);u="literal",c=o.replace(/^'|'$/g,'"')}else if(h=this._tripleQuotedString.exec(n)){if(o=h[1]||h[2],this._line+=o.split(/\r\n|\r|\n/).length-1,null===(o=this._unescape(o)))return r(this);u="literal",c=o.replace(/^'|'$/g,'"')}break;case"@":"literal"===this._prevTokenType&&(h=this._langcode.exec(n))?(u="langcode",c=h[1]):(h=this._keyword.exec(n))&&(u=h[0]);break;case".":if(1===n.length?t:n[1]<"0"||n[1]>"9"){u=".",p=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(h=this._number.exec(n))&&(u="literal",c='"'+h[0]+'"^^http://www.w3.org/2001/XMLSchema#'+(h[1]?"double":/^[+\-]?\d+$/.test(h[0])?"integer":"decimal"));break;case"B":case"b":case"p":case"P":case"G":case"g":(h=this._sparqlKeyword.exec(n))?u=h[0].toUpperCase():d=!0;break;case"f":case"t":(h=this._boolean.exec(n))?(u="literal",c='"'+h[0]+'"^^http://www.w3.org/2001/XMLSchema#boolean'):d=!0;break;case"a":(h=this._shortPredicates.exec(n))?(u="abbreviation",c="http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):d=!0;break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":p=1,u=f;break;default:d=!0}if(d&&("@prefix"!==this._prevTokenType&&"PREFIX"!==this._prevTokenType||!(h=this._prefix.exec(n))?((h=this._prefixed.exec(n))||t&&(h=this._prefixed.exec(n+" ")))&&(u="prefixed",l=h[1]||"",c=this._unescape(h[2])):(u="prefix",c=h[1]||"")),"^"===this._prevTokenType&&(u="IRI"===u||"prefixed"===u?"type":""),!u)return t||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?r(this):this._input=n;e(null,{line:s,type:u,value:c,prefix:l}),this._prevTokenType=u,n=n.substr(p||h[0].length,n.length)}},_unescape:function(e){try{return e.replace(/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\[uU]|\\(.)/g,function(e,t,r,i){var a;if(t){if(a=parseInt(t,16),isNaN(a))throw new Error;return n(a)}if(r){if(a=parseInt(r,16),isNaN(a))throw new Error;return a<=65535?n(a):n(55296+(a-=65536)/1024,56320+(1023&a))}var s=o[i];if(!s)throw new Error;return s})}catch(e){return null}},_syntaxError:function(e){return this._input=null,new Error('Syntax error: unexpected "'+e+'" on line '+this._line+".")},tokenize:function(e,t){function r(e){null!==o._input&&(o._input+=e,o._tokenizeToEnd(t,!1))}function n(){null!==o._input&&o._tokenizeToEnd(t,!0)}var o=this;this._line=1,"string"==typeof e?(this._input=e,i(function(){o._tokenizeToEnd(t,!0)})):(this._input="",e&&"function"!=typeof e?("function"==typeof e.setEncoding&&e.setEncoding("utf8"),e.on("data",r),e.on("end",n)):(this.addChunk=r,this.end=n,t||(t=e)))}},e.exports=r}).call(t,r(42).setImmediate)},function(e,t,r){function n(e){if(!(this instanceof n))return new n(e);this._tripleStack=[],this._graph=null,e=e||{},this._setBase(e.documentIRI);var t="string"==typeof e.format&&e.format.match(/\w*$/)[0].toLowerCase(),r="turtle"===t,a="trig"===t,s=/triple/.test(t),u=/quad/.test(t),c=s||u;(this._supportsNamedGraphs=!r)||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(r||a||s),c&&(this._base="",this._resolveIRI=function(e){return this._error("Disallowed relative IRI",e),this._callback=i,this._subject=null}),this._blankNodePrefix="string"!=typeof e.blankNodePrefix?"":"_:"+e.blankNodePrefix.replace(/^_:/,""),this._lexer=e.lexer||new o({lineMode:c})}function i(){}var o=r(87),a="http://www.w3.org/1999/02/22-rdf-syntax-ns#",s=a+"nil",u=/^[a-z][a-z0-9+.-]*:/i,c=/(?:^|\/)\.\.?(?:$|[\/#?])/,l=0,f=0;n._resetBlankNodeIds=function(){l=f=0},n.prototype={_setBase:function(e){if(e){if(e.indexOf("#")>=0)throw new Error("Invalid base IRI "+e)}else e=null;(this._base=e)&&(this._basePath=e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1])},_readInTopContext:function(e){switch(e.type){case"eof":return null!==this._graph?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"@prefix":return this._sparqlStyle=!1,this._readPrefix;case"PREFIX":return this._sparqlStyle=!0,this._readPrefix;case"@base":return this._sparqlStyle=!1,this._readBaseIRI;case"BASE":return this._sparqlStyle=!0,this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}},_readSubject:function(e){switch(this._predicate=null,e.type){case"IRI":null===this._base||u.test(e.value)?this._subject=e.value:this._subject=this._resolveIRI(e);break;case"prefixed":var t=this._prefixes[e.prefix];if(void 0===t)return this._error('Undefined prefix "'+e.prefix+':"',e);this._subject=t+e.value;break;case"[":return this._subject="_:b"+f++,this._tripleStack.push({subject:this._subject,predicate:null,object:null,type:"blank"}),this._readBlankNodeHead;case"(":return this._tripleStack.push({subject:s,predicate:null,object:null,type:"list"}),this._subject=null,this._readListItem;case"}":return this._readPunctuation(e);default:return this._error("Expected subject but got "+e.type,e)}return this._readPredicateOrNamedGraph},_readPredicate:function(e){var t=e.type;switch(t){case"IRI":case"abbreviation":null===this._base||u.test(e.value)?this._predicate=e.value:this._predicate=this._resolveIRI(e);break;case"prefixed":if("_"===e.prefix)return this._error("Disallowed blank node as predicate",e);var r=this._prefixes[e.prefix];if(void 0===r)return this._error('Undefined prefix "'+e.prefix+':"',e);this._predicate=r+e.value;break;case".":case"]":case"}":return null===this._predicate?this._error("Unexpected "+t,e):(this._subject=null,"]"===t?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._readPredicate;default:return this._error('Expected predicate to follow "'+this._subject+'"',e)}return this._readObject},_readObject:function(e){switch(e.type){case"IRI":null===this._base||u.test(e.value)?this._object=e.value:this._object=this._resolveIRI(e);break;case"prefixed":var t=this._prefixes[e.prefix];if(void 0===t)return this._error('Undefined prefix "'+e.prefix+':"',e);this._object=t+e.value;break;case"literal":return this._object=e.value,this._readDataTypeOrLang;case"[":var r="_:b"+f++;return this._tripleStack.push({subject:this._subject,predicate:this._predicate,object:r,type:"blank"}),this._subject=r,this._readBlankNodeHead;case"(":return this._tripleStack.push({subject:this._subject,predicate:this._predicate,object:s,type:"list"}),this._subject=null,this._readListItem;default:return this._error('Expected object to follow "'+this._predicate+'"',e)}return this._getTripleEndReader()},_readPredicateOrNamedGraph:function(e){return"{"===e.type?this._readGraph(e):this._readPredicate(e)},_readGraph:function(e){return"{"!==e.type?this._error("Expected graph but got "+e.type,e):(this._graph=this._subject,this._subject=null,this._readSubject)},_readBlankNodeHead:function(e){return"]"===e.type?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))},_readBlankNodeTail:function(e){if("]"!==e.type)return this._readBlankNodePunctuation(e);null!==this._subject&&this._callback(null,{subject:this._subject,predicate:this._predicate,object:this._object,graph:this._graph||""});var t=this._tripleStack.pop();return this._subject=t.subject,null!==t.object?(this._predicate=t.predicate,this._object=t.object,this._getTripleEndReader()):null!==this._predicate?this._readPredicate:this._readPredicateOrNamedGraph},_readDataTypeOrLang:function(e){switch(e.type){case"type":var t;if(""===e.prefix)t=null===this._base||u.test(e.value)?e.value:this._resolveIRI(e);else{var r=this._prefixes[e.prefix];if(void 0===r)return this._error('Undefined prefix "'+e.prefix+':"',e);t=r+e.value}return this._object+="^^"+t,this._getTripleEndReader();case"langcode":return this._object+="@"+e.value.toLowerCase(),this._getTripleEndReader();default:return this._getTripleEndReader().call(this,e)}},_readListItem:function(e){var t=null,r=null,n=this._subject,i=this._tripleStack,o=i[i.length-1],c=this._readListItem;switch(e.type){case"IRI":t=null===this._base||u.test(e.value)?e.value:this._resolveIRI(e);break;case"prefixed":var l=this._prefixes[e.prefix];if(void 0===l)return this._error('Undefined prefix "'+e.prefix+':"',e);t=l+e.value;break;case"literal":t=e.value,c=this._readDataTypeOrLang;break;case"[":r="_:b"+f++,t="_:b"+f++,i.push({subject:r,predicate:a+"first",object:t,type:"blank"}),this._subject=t,c=this._readBlankNodeHead;break;case"(":r="_:b"+f++,i.push({subject:r,predicate:a+"first",object:s,type:"list"}),this._subject=null,c=this._readListItem;break;case")":if(i.pop(),0!==i.length&&"list"===i[i.length-1].type&&this._callback(null,{subject:o.subject,predicate:o.predicate,object:o.object,graph:this._graph||""}),this._subject=o.subject,null===o.predicate){if(c=this._readPredicate,o.subject===s)return c}else if(this._predicate=o.predicate,this._object=o.object,c=this._getTripleEndReader(),o.object===s)return c;r=s;break;default:return this._error('Expected list item instead of "'+e.type+'"',e)}return null===r&&(this._subject=r="_:b"+f++),null===n?o.object===s?o.object=r:o.subject=r:this._callback(null,{subject:n,predicate:a+"rest",object:r,graph:this._graph||""}),null!==t&&this._callback(null,{subject:r,predicate:a+"first",object:t,graph:this._graph||""}),c},_readPunctuation:function(e){var t,r=this._subject,n=this._graph;switch(e.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",e);this._graph=null;case".":this._subject=null,t=this._readInTopContext;break;case";":t=this._readPredicate;break;case",":t=this._readObject;break;case"IRI":if(this._supportsQuads&&null===this._graph){n=null===this._base||u.test(e.value)?e.value:this._resolveIRI(e),r=this._subject,t=this._readQuadPunctuation;break}case"prefixed":if(this._supportsQuads&&null===this._graph){var i=this._prefixes[e.prefix];if(void 0===i)return this._error('Undefined prefix "'+e.prefix+':"',e);n=i+e.value,t=this._readQuadPunctuation;break}default:return this._error('Expected punctuation to follow "'+this._object+'"',e)}return null!==r&&this._callback(null,{subject:r,predicate:this._predicate,object:this._object,graph:n||""}),t},_readBlankNodePunctuation:function(e){var t;switch(e.type){case";":t=this._readPredicate;break;case",":t=this._readObject;break;default:return this._error('Expected punctuation to follow "'+this._object+'"',e)}return this._callback(null,{subject:this._subject,predicate:this._predicate,object:this._object,graph:this._graph||""}),t},_readQuadPunctuation:function(e){return"."!==e.type?this._error("Expected dot to follow quad",e):this._readInTopContext},_readPrefix:function(e){return"prefix"!==e.type?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)},_readPrefixIRI:function(e){if("IRI"!==e.type)return this._error('Expected IRI to follow prefix "'+this._prefix+':"',e);var t;return t=null===this._base||u.test(e.value)?e.value:this._resolveIRI(e),this._prefixes[this._prefix]=t,this._prefixCallback(this._prefix,t),this._readDeclarationPunctuation},_readBaseIRI:function(e){if("IRI"!==e.type)return this._error("Expected IRI to follow base declaration",e);try{this._setBase(null===this._base||u.test(e.value)?e.value:this._resolveIRI(e))}catch(t){this._error(t.message,e)}return this._readDeclarationPunctuation},_readNamedGraphLabel:function(e){switch(e.type){case"IRI":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}},_readNamedGraphBlankLabel:function(e){return"]"!==e.type?this._error("Invalid graph label",e):(this._subject="_:b"+f++,this._readGraph)},_readDeclarationPunctuation:function(e){return this._sparqlStyle?this._readInTopContext(e):"."!==e.type?this._error("Expected declaration to end with a dot",e):this._readInTopContext},_getTripleEndReader:function(){var e=this._tripleStack;if(0===e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem}},_error:function(e,t){this._callback(new Error(e+" at line "+t.line+"."))},_resolveIRI:function(e){var t=e.value;switch(t[0]){case void 0:return this._base;case"#":return this._base+t;case"?":return this._base.replace(/(?:\?.*)?$/,t);case"/":return("/"===t[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(t);default:return this._removeDotSegments(this._basePath+t)}},_removeDotSegments:function(e){if(!c.test(e))return e;for(var t="",r=e.length,n=-1,i=-1,o=0,a="/";n<r;){switch(a){case":":if(i<0&&"/"===e[++n]&&"/"===e[++n])for(;(i=n+1)<r&&"/"!==e[i];)n=i;break;case"?":case"#":n=r;break;case"/":if("."===e[n+1])switch(a=e[++n+1]){case"/":t+=e.substring(o,n-1),o=n+1;break;case void 0:case"?":case"#":return t+e.substring(o,n)+e.substr(n+1);case".":if(void 0===(a=e[++n+1])||"/"===a||"?"===a||"#"===a){if(t+=e.substring(o,n-2),(o=t.lastIndexOf("/"))>=i&&(t=t.substr(0,o)),"/"!==a)return t+"/"+e.substr(n+1);o=n+1}}}a=e[++n]}return t+e.substring(o)},parse:function(e,t,r){this._readCallback=this._readInTopContext,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix||"_:b"+l+++"_","function"==typeof e&&(r=t,t=e,e=null),this._callback=t||i,this._prefixCallback=r||i;var n=this;this._lexer.tokenize(e,function(e,t){null!==e?(n._callback(e),n._callback=i):void 0!==n._readCallback&&(n._readCallback=n._readCallback(t))}),e||(this.addChunk=this._lexer.addChunk,this.end=this._lexer.end)}},e.exports=n},function(e,t){function r(e,t){for(var r in o)t?e.prototype[r]=n(o[r]):e[r]=o[r];return e}function n(e){return function(t){return e(this,t)}}var i="http://www.w3.org/2001/XMLSchema#",o={isIRI:function(e){if(!e)return e;var t=e[0];return'"'!==t&&"_"!==t},isLiteral:function(e){return e&&'"'===e[0]},isBlank:function(e){return e&&"_:"===e.substr(0,2)},getLiteralValue:function(e){var t=/^"([^]*)"/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1]},getLiteralType:function(e){var t=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1]||(t[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":i+"string")},getLiteralLanguage:function(e){var t=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(e);if(!t)throw new Error(e+" is not a literal");return t[1]?t[1].toLowerCase():""},isPrefixedName:function(e){return e&&/^[^:\/"']*:[^:\/"']+$/.test(e)},expandPrefixedName:function(e,t){var r,n,i,o=/(?:^|"\^\^)([^:\/#"'\^_]*):[^\/]*$/.exec(e);return o&&(r=o[1],n=t[r],i=o.index),void 0===n?e:0===i?n+e.substr(r.length+1):e.substr(0,i+3)+n+e.substr(i+r.length+4)},createIRI:function(e){return e&&'"'===e[0]?o.getLiteralValue(e):e},createLiteral:function(e,t){if(!t)switch(typeof e){case"boolean":t=i+"boolean";break;case"number":if(isFinite(e)){t=e%1==0?i+"integer":i+"decimal";break}default:return'"'+e+'"'}return'"'+e+(/^[a-z]+(-[a-z0-9]+)*$/i.test(t)?'"@'+t.toLowerCase():'"^^'+t)}};e.exports=r(r)},function(e,t){function r(e,t){if(!(this instanceof r))return new r(e,t);if(e&&"function"!=typeof e.write&&(t=e,e=null),t=t||{},e)this._outputStream=e,this._endStream=void 0===t.end||!!t.end;else{var n="";this._outputStream={write:function(e,t,r){n+=e,r&&r()},end:function(e){e&&e(null,n)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(t.format)?this._writeTriple=this._writeTripleLine:(this._graph="",this._prefixIRIs=Object.create(null),t.prefixes&&this.addPrefixes(t.prefixes))}function n(e){var t=s[e];return void 0===t&&(1===e.length?(t=e.charCodeAt(0).toString(16),t="\\u0000".substr(0,6-t.length)+t):(t=(1024*(e.charCodeAt(0)-55296)+e.charCodeAt(1)+9216).toString(16),t="\\U00000000".substr(0,10-t.length)+t)),t}var i=/^"([^]*)"(?:\^\^(.+)|@([\-a-z]+))?$/i,o=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,a=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,s={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};r.prototype={_write:function(e,t){this._outputStream.write(e,"utf8",t)},_writeTriple:function(e,t,r,n,i){try{this._graph!==n&&(this._write((null===this._subject?"":this._graph?"\n}\n":".\n")+(n?this._encodeIriOrBlankNode(n)+" {\n":"")),this._subject=null,this._graph="["!==n[0]?n:"]"),this._subject===e?this._predicate===t?this._write(", "+this._encodeObject(r),i):this._write(";\n    "+this._encodePredicate(this._predicate=t)+" "+this._encodeObject(r),i):this._write((null===this._subject?"":".\n")+this._encodeSubject(this._subject=e)+" "+this._encodePredicate(this._predicate=t)+" "+this._encodeObject(r),i)}catch(e){i&&i(e)}},_writeTripleLine:function(e,t,r,n,i){delete this._prefixMatch;try{this._write(this._encodeIriOrBlankNode(e)+" "+this._encodeIriOrBlankNode(t)+" "+this._encodeObject(r)+(n?" "+this._encodeIriOrBlankNode(n)+".\n":".\n"),i)}catch(e){i&&i(e)}},_encodeIriOrBlankNode:function(e){var t=e[0];if("["===t||"("===t||"_"===t&&":"===e[1])return e;o.test(e)&&(e=e.replace(a,n));var r=this._prefixRegex.exec(e);return r?r[1]?this._prefixIRIs[r[1]]+r[2]:e:"<"+e+">"},_encodeLiteral:function(e,t,r){return o.test(e)&&(e=e.replace(a,n)),r?'"'+e+'"@'+r:t?'"'+e+'"^^'+this._encodeIriOrBlankNode(t):'"'+e+'"'},_encodeSubject:function(e){if('"'===e[0])throw new Error("A literal as subject is not allowed: "+e);return"["===e[0]&&(this._subject="]"),this._encodeIriOrBlankNode(e)},_encodePredicate:function(e){if('"'===e[0])throw new Error("A literal as predicate is not allowed: "+e);return"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"===e?"a":this._encodeIriOrBlankNode(e)},_encodeObject:function(e){if('"'!==e[0])return this._encodeIriOrBlankNode(e);var t=i.exec(e);if(!t)throw new Error("Invalid literal: "+e);return this._encodeLiteral(t[1],t[2],t[3])},_blockedWrite:function(){throw new Error("Cannot write because the writer has been closed.")},addTriple:function(e,t,r,n,i){void 0===r?this._writeTriple(e.subject,e.predicate,e.object,e.graph||"",t):"string"!=typeof n?this._writeTriple(e,t,r,"",n):this._writeTriple(e,t,r,n,i)},addTriples:function(e){for(var t=0;t<e.length;t++)this.addTriple(e[t])},addPrefix:function(e,t,r){var n={};n[e]=t,this.addPrefixes(n,r)},addPrefixes:function(e,t){var r=this._prefixIRIs,n=!1;for(var i in e){var o=e[i];/[#\/]$/.test(o)&&r[o]!==(i+=":")&&(n=!0,r[o]=i,null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null,this._graph=""),this._write("@prefix "+i+" <"+o+">.\n"))}if(n){var a="",s="";for(var u in r)a+=a?"|"+u:u,s+=(s?"|":"")+r[u];a=a.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&"),this._prefixRegex=new RegExp("^(?:"+s+")[^/]*$|^("+a+")([a-zA-Z][\\-_a-zA-Z0-9]*)$")}this._write(n?"\n":"",t)},blank:function(e,t){var r,n,i=e;switch(void 0===e?i=[]:"string"==typeof e?i=[{predicate:e,object:t}]:"length"in e||(i=[e]),n=i.length){case 0:return"[]";case 1:if(r=i[0],"["!==r.object[0])return"[ "+this._encodePredicate(r.predicate)+" "+this._encodeObject(r.object)+" ]";default:for(var o="[",a=0;a<n;a++)r=i[a],r.predicate===e?o+=", "+this._encodeObject(r.object):(o+=(a?";\n  ":"\n  ")+this._encodePredicate(r.predicate)+" "+this._encodeObject(r.object),e=r.predicate);return o+"\n]"}},list:function(e){for(var t=e&&e.length||0,r=new Array(t),n=0;n<t;n++)r[n]=this._encodeObject(e[n]);return"("+r.join(" ")+")"},_prefixRegex:/$0^/,end:function(e){null!==this._subject&&(this._write(this._graph?"\n}\n":".\n"),this._subject=null),this._write=this._blockedWrite;var t=e&&function(r,n){t=null,e(r,n)};if(this._endStream)try{return this._outputStream.end(t)}catch(e){}t&&t()}},e.exports=r},function(e,t,r){"use strict";(function(t){function r(e,r,n,i){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick(function(){e.call(null,r)});case 3:return t.nextTick(function(){e.call(null,r,n)});case 4:return t.nextTick(function(){e.call(null,r,n,i)});default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return t.nextTick(function(){e.apply(null,o)})}}!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports=r:e.exports=t.nextTick}).call(t,r(4))},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=r(24),o=r(57),a=r(5),s=r(40),u=r(136),c=r(94).parseRDFaDOM,l=r(95),f=r(7),h=r(13),p=r(96),d={"text/n3":!0,"text/turtle":!0,"application/rdf+xml":!0,"application/xhtml+xml":!0,"text/html":!0,"application/ld+json":!0},v=function e(t,r,v){this.store=t,this.thisURI="http://dig.csail.mit.edu/2005/ajar/ajaw/rdf/sources.js#SourceFetcher",this.timeout=r||3e4,this.async=null==v||v,this.appNode=this.store.bnode(),this.store.fetcher=this,this.requested={},this.redirectedTo={},this.fetchCallbacks={},this.nonexistant={},this.lookedUp={},this.handlers=[],this.mediatypes={};var y=this,g=this.store,m={};m.link=s("http://www.w3.org/2007/ont/link#"),m.http=s("http://www.w3.org/2007/ont/http#"),m.httph=s("http://www.w3.org/2007/ont/httph#"),m.rdf=s("http://www.w3.org/1999/02/22-rdf-syntax-ns#"),m.rdfs=s("http://www.w3.org/2000/01/rdf-schema#"),m.dc=s("http://purl.org/dc/elements/1.1/"),y.mediatypes["image/*"]={q:.9},y.mediatypes["*/*"]={q:.1},e.crossSiteProxy=function(t){return e.crossSiteProxyTemplate?e.crossSiteProxyTemplate.replace("{uri}",encodeURIComponent(t)):void 0},e.RDFXMLHandler=function(e){e&&(this.dom=e[0]),this.handlerFactory=function(e){e.handle=function(t){var r=y.store;if(this.dom||(this.dom=h.parseXML(e.responseText)),"parsererror"===this.dom.documentElement.nodeName)throw y.failFetch(e,"Badly formed XML in "+e.resource.uri),new Error("Badly formed XML in "+e.resource.uri);var n=new l(r);try{n.parse(this.dom,e.original.uri,e.original)}catch(t){y.addStatus(e.req,"Syntax error parsing RDF/XML! "+t),console.log("Syntax error parsing RDF/XML! "+t)}e.options.noMeta||r.add(e.original,m.rdf("type"),m.link("RDFDocument"),y.appNode),t()}}},e.RDFXMLHandler.toString=function(){return"RDFXMLHandler"},e.RDFXMLHandler.register=function(e){e.mediatypes["application/rdf+xml"]={q:.9}},e.RDFXMLHandler.pattern=new RegExp("application/rdf\\+xml"),e.XHTMLHandler=function(e){e&&(this.dom=e[0]),this.handlerFactory=function(e){e.handle=function(t){var r,n;this.dom||(this.dom=h.parseXML(e.responseText));var i=y.store,o=this.dom.getElementsByTagName("title");o.length>0&&i.add(e.resource,m.dc("title"),i.literal(o[0].textContent),e.resource);for(var a=this.dom.getElementsByTagName("link"),s=a.length-1;s>=0;s--)r=a[s].getAttribute("rel"),n=!1,r||(r=a[s].getAttribute("rev"),n=!0),r&&y.linkData(e,r,a[s].getAttribute("href"),e.resource,n);for(var l=this.dom.getElementsByTagName("script"),f=0;f<l.length;f++){var p=l[f].getAttribute("type");d[p]&&u(l[f].textContent,i,e.original.uri,p)}if(e.options.noMeta||i.add(e.resource,m.rdf("type"),m.link("WebPage"),y.appNode),!e.options.noRDFa&&c)try{c(this.dom,i,e.original.uri)}catch(t){var v="Error trying to parse "+e.resource+" as RDFa:\n"+t+":\n"+t.stack;return void y.failFetch(e,v)}t()}}},e.XHTMLHandler.toString=function(){return"XHTMLHandler"},e.XHTMLHandler.register=function(e){e.mediatypes["application/xhtml+xml"]={}},e.XHTMLHandler.pattern=new RegExp("application/xhtml"),e.XMLHandler=function(){this.handlerFactory=function(e){e.handle=function(t){for(var r=h.parseXML(e.responseText),n=0;n<r.childNodes.length;n++)if(1===r.childNodes[n].nodeType){var i=r.childNodes[n].namespaceURI;if(i&&i===i.rdf)return y.addStatus(e.req,"Has XML root element in the RDF namespace, so assume RDF/XML."),void y.switchHandler("RDFXMLHandler",e,t,[r]);break}if(r.doctype&&"html"===r.doctype.name&&r.doctype.publicId.match(/^-\/\/W3C\/\/DTD XHTML/)&&r.doctype.systemId.match(/http:\/\/www.w3.org\/TR\/xhtml/))return y.addStatus(e.req,"Has XHTML DOCTYPE. Switching to XHTML Handler.\n"),void y.switchHandler("XHTMLHandler",e,t);var o=r.getElementsByTagName("html")[0];if(o){var a=o.getAttribute("xmlns");if(a&&a.match(/^http:\/\/www.w3.org\/1999\/xhtml/))return y.addStatus(e.req,"Has a default namespace for XHTML. Switching to XHTMLHandler.\n"),void y.switchHandler("XHTMLHandler",e,t)}y.failFetch(e,"Unsupported dialect of XML: not RDF or XHTML namespace, etc.\n"+e.responseText.slice(0,80))}}},e.XMLHandler.toString=function(){return"XMLHandler"},e.XMLHandler.register=function(e){e.mediatypes["text/xml"]={q:.5},e.mediatypes["application/xml"]={q:.5}},e.XMLHandler.pattern=new RegExp("(text|application)/(.*)xml"),e.HTMLHandler=function(){this.handlerFactory=function(e){e.handle=function(t){var r=e.responseText;if(r.match(/\s*<\?xml\s+version\s*=[^<>]+\?>/))return y.addStatus(e.req,"Has an XML declaration. We'll assume it's XHTML as the content-type was text/html.\n"),void y.switchHandler("XHTMLHandler",e,t);if(r.match(/.*<!DOCTYPE\s+html[^<]+-\/\/W3C\/\/DTD XHTML[^<]+http:\/\/www.w3.org\/TR\/xhtml[^<]+>/))return y.addStatus(e.req,"Has XHTML DOCTYPE. Switching to XHTMLHandler.\n"),void y.switchHandler("XHTMLHandler",e,t);if(r.match(/[^(<html)]*<html\s+[^<]*xmlns=['"]http:\/\/www.w3.org\/1999\/xhtml["'][^<]*>/))return y.addStatus(e.req,"Has default namespace for XHTML, so switching to XHTMLHandler.\n"),void y.switchHandler("XHTMLHandler",e,t);var n=new RegExp("<title>([\\s\\S]+?)</title>","im").exec(r);if(n){var i=y.store;return i.add(e.resource,m.dc("title"),i.literal(n[1]),e.resource),i.add(e.resource,m.rdf("type"),m.link("WebPage"),y.appNode),void t()}y.addStatus(e.req,"non-XML HTML document, not parsed for data."),y.doneFetch(e)}}},e.HTMLHandler.toString=function(){return"HTMLHandler"},e.HTMLHandler.register=function(e){e.mediatypes["text/html"]={q:.9}},e.HTMLHandler.pattern=new RegExp("text/html"),e.TextHandler=function(){this.handlerFactory=function(e){e.handle=function(t){var r=e.responseText;return r.match(/\s*<\?xml\s+version\s*=[^<>]+\?>/)?(y.addStatus(e.req,"Warning: "+e.resource+" has an XML declaration. We'll assume it's XML but its content-type wasn't XML.\n"),void y.switchHandler("XMLHandler",e,t)):r.slice(0,500).match(/xmlns:/)?(y.addStatus(e.req,"May have an XML namespace. We'll assume it's XML but its content-type wasn't XML.\n"),void y.switchHandler("XMLHandler",e,t)):(y.addStatus(e.req,"Plain text document, no known RDF semantics."),void y.doneFetch(e))}}},e.TextHandler.toString=function(){return"TextHandler"},e.TextHandler.register=function(e){e.mediatypes["text/plain"]={q:.5}},e.TextHandler.pattern=new RegExp("text/plain"),e.N3Handler=function(){this.handlerFactory=function(e){e.handle=function(t){var r=o(g,g,e.original.uri,e.original.uri,null,null,"",null);try{r.loadBuf(e.responseText)}catch(t){var n="Error trying to parse "+e.resource+" as Notation3:\n"+t+":\n"+t.stack;return void y.failFetch(e,n)}y.addStatus(e.req,"N3 parsed: "+r.statementCount+" triples in "+r.lines+" lines."),y.store.add(e.original,m.rdf("type"),m.link("RDFDocument"),y.appNode),y.doneFetch(e)}}},e.N3Handler.toString=function(){return"N3Handler"},e.N3Handler.register=function(e){e.mediatypes["text/n3"]={q:"1.0"},e.mediatypes["text/turtle"]={q:1}},e.N3Handler.pattern=new RegExp("(application|text)/(x-)?(rdf\\+)?(n3|turtle)"),h.callbackify(this,["request","recv","headers","load","fail","refresh","retract","done"]),this.addHandler=function(e){y.handlers.push(e),e.register(y)},this.switchHandler=function(t,r,i,o){for(var a=null,s=0;s<this.handlers.length;s++)""+this.handlers[s]===t&&(a=this.handlers[s]);if(!a)throw new Error("web.js: switchHandler: name="+t+" , this.handlers ="+this.handlers+"\nswitchHandler: switching to "+a+"; sf="+y+"; typeof Fetcher="+(void 0===e?"undefined":n(e))+";\n\t Fetcher.HTMLHandler="+e.HTMLHandler+"\n\n\tsf.handlers="+y.handlers+"\n");new a(o).handlerFactory(r),r.handle(i)},this.addStatus=function(e,t){var r=new Date;t="["+r.getHours()+":"+r.getMinutes()+":"+r.getSeconds()+"."+r.getMilliseconds()+"] "+t;var n=this.store,o=n.the(e,m.link("status"));o&&o.append?o.append(n.literal(t)):i.warn("web.js: No list to add to: "+o+","+t)},this.failFetch=function(e,t){for(this.addStatus(e.req,t),e.options.noMeta||g.add(e.original,m.link("error"),t),e.resource.sameTerm(e.original)?console.log("@@ Recording failure for "+e.original+": "+e.status):console.log("@@ Recording failure original "+e.original+"( as "+e.resource+") : "+e.status),this.requested[f.docpart(e.original.uri)]=e.status;this.fetchCallbacks[e.original.uri]&&this.fetchCallbacks[e.original.uri].length;)this.fetchCallbacks[e.original.uri].shift()(!1,"Fetch of <"+e.original.uri+"> failed: "+t,e);return delete this.fetchCallbacks[e.original.uri],this.fireCallbacks("fail",[e.original.uri,t]),e.abort(),e},this.linkData=function(e,t,r,n,i){if(r){var o,a=g.sym(f.join(r,e.original.uri));if("alternate"===t||"seeAlso"===t||"meta"===t||"describedby"===t){if(a.uri===e.original.uri)return;o=m.rdfs("seeAlso")}else o="type"===t?g.sym("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"):g.sym(f.join(encodeURIComponent(t),"http://www.iana.org/assignments/link-relations/"));i?g.add(a,o,e.original,n):g.add(e.original,o,a,n)}},this.parseLinkHeader=function(e,t){var r;try{r=e.getResponseHeader("link")}catch(e){}if(r)for(var n=r.match(/<[^>]*>\s*(\s*;\s*[^\(\)<>@,;:"\/\[\]\?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*")))*(,|$)/g),i=0;i<n.length;i++)for(var o=n[i].split(">"),a=o[0].substring(1),s=o[1],u=s.match(/[^\(\)<>@,;:"\/\[\]\?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*"))/g),c=0;c<u.length;c++){var l=u[c],f=l.split("="),h=f[1].replace(/["']/g,"");this.linkData(e,h,a,t)}},this.doneFetch=function(e){for(this.addStatus(e.req,"Done."),this.requested[e.original.uri]="done";this.fetchCallbacks[e.original.uri]&&this.fetchCallbacks[e.original.uri].length;)this.fetchCallbacks[e.original.uri].shift()(!0,void 0,e);delete this.fetchCallbacks[e.original.uri],this.fireCallbacks("done",[e.original.uri])},[e.RDFXMLHandler,e.XHTMLHandler,e.XMLHandler,e.HTMLHandler,e.TextHandler,e.N3Handler].map(this.addHandler),this.nowKnownAs=function(e,t){this.lookedUp[e.uri]?this.lookedUp[t.uri]||this.lookUpThing(t,e):this.lookedUp[t.uri]&&(this.lookedUp[e.uri]||this.lookUpThing(e,t))},this.putBack=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];e=e.uri||e;var r=new a(e).doc();return t.data=p(r,this.store,r.uri,t.contentType||"text/turtle"),this.webOperation("PUT",e,t)},this.webOperation=function(e,t){var r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];t=t.uri||t,t=this.proxyIfNecessary(t);var n=this;return new Promise(function(i,o){var a=h.XMLHTTPFactory();a.options=r,a.original=n.store.sym(t),r.noMeta||"undefined"==typeof tabulator||n.saveRequestMetadata(a,n.store,t),a.onreadystatechange=function(){if(4===a.readyState){var e=!a.status||a.status>=200&&a.status<300;r.noMeta||"undefined"==typeof tabulator||n.saveResponseMetadata(a,n.store),e?i(a):o(a.status+" "+a.statusText)}},a.open(e,t,!0),a.setRequestHeader("Content-type",r.contentType||"text/turtle"),a.send(r.data?r.data:void 0)})},this.webCopy=function(e,t,r){var n=this;return e=e.uri||e,new Promise(function(i,o){n.webOperation("GET",e).then(function(e){n.webOperation("PUT",t,{data:e.responseText,contentType:r}).then(function(e){i(e)}).catch(function(e){o(e)})}).catch(function(e){o(e)})})},this.lookUpThing=function(e,t,r,n,i){var o,a=g.uris(e),s=!0,u="",c={};if(r===!1||r===!0?(o=r,r={force:o}):(void 0===r&&(r={}),o=!!r.force),void 0!==a)for(var l=0;l<a.length;l++){var h=a[l];c[h]=!0,this.lookedUp[h]=!0;var p=this;!function(e){p.requestURI(f.docpart(e),t,r,function(t,r,o){t?n&&n(!0,e):(n&&n(!1,r),s=!1,u+=r+"\n"),delete c[h],Object.keys(c).length>0||i&&i(s,u)})}(h)}return a.length},this.load=function(e,t){var r=this;if(e instanceof Array){var n=e.map(function(e){return r.load(e)});return Promise.all(n)}return e=e.uri||e,new Promise(function(n,i){r.nowOrWhenFetched(e,t,function(e,t,r){e?n(r):i(t)})})},this.nowOrWhenFetched=function(e,t,r,n){e=e.uri||e,"function"==typeof t?(n={},r=t):void 0===t||(n=t instanceof a?{referingTerm:t}:t),this.requestURI(e,t,n||{},r)},this.get=this.nowOrWhenFetched,this.getHeader=function(e,t){for(var r=this.store,n=r.each(void 0,m.link("requestedURI"),e.uri),i=0;i<n.length;i++){var o=n[i];if(void 0!==o){var a=r.any(o,m.link("response"));if(void 0!==o){var s=r.each(a,m.httph(t.toLowerCase()));return s.length?s.map(function(e){return e.value}):[]}}}},this.proxyIfNecessary=function(t){if("undefined"!=typeof tabulator&&tabulator.isExtension)return t;if("undefined"!=typeof $SolidTestEnvironment&&$SolidTestEnvironment.localSiteMap){var r=t.split("/").slice(2),n=function e(t,r){var n=r[t.shift()];return n?"string"==typeof n?n+t.join("/"):t?e(t,n):null:null}(r,$SolidTestEnvironment.localSiteMap);if(n)return n}return e.crossSiteProxyTemplate&&"undefined"!=typeof document&&document.location&&"https:"===(""+document.location).slice(0,6)&&"http:"===t.slice(0,5)?e.crossSiteProxyTemplate.replace("{uri}",encodeURIComponent(t)):t},this.saveRequestMetadata=function(e,t,r){var n=t.bnode();if(e.resource=t.sym(r),e.req=n,!e.options.noMeta){var i=new Date,o="["+i.getHours()+":"+i.getMinutes()+":"+i.getSeconds()+"] ";t.add(n,m.rdfs("label"),t.literal(o+" Request for "+r),this.appNode),t.add(n,m.link("requestedURI"),t.literal(r),this.appNode),e.original&&e.original.uri!==r&&t.add(n,m.link("orginalURI"),t.literal(e.original.uri),this.appNode),t.add(n,m.link("status"),t.collection(),this.appNode)}return n},this.saveResponseMetadata=function(e,t){var r=t.bnode();if(e.req&&t.add(e.req,m.link("response"),r),t.add(r,m.http("status"),t.literal(e.status),r),t.add(r,m.http("statusText"),t.literal(e.statusText),r),e.headers={},"http"===f.protocol(e.resource.uri)||"https"===f.protocol(e.resource.uri)){e.headers=h.getHTTPHeaders(e);for(var n in e.headers){var i=e.headers[n].trim(),o=n.toLowerCase();t.add(r,m.httph(o),i,r),"content-type"===o&&t.add(e.resource,m.rdf("type"),h.mediaTypeClass(i),r)}}return r},this.requestURI=function(t,r,n,o){t=t.uri||t,t=t.split("#")[0],"boolean"==typeof n&&(n={force:n}),void 0===n&&(n={});var a=!!n.force,s=this.store,u=arguments,c=n.baseURI||t;n.userCallback=o;var l=f.protocol(t);if("tel"===l||"mailto"===l||"urn"===l)return console.log("Unsupported protocol in: "+t),o(!1,"Unsupported protocol",{status:900})||void 0;var p=s.sym(t),d=this.getState(t);if(a)delete this.nonexistant[t];else{if("fetched"===d)return o?o(!0):void 0;if("failed"===d)return o?o(!1,"Previously failed. "+this.requested[t],{status:this.requested[t]}):void 0}if(this.fireCallbacks("request",u),o&&(this.fetchCallbacks[t]?this.fetchCallbacks[t].push(o):this.fetchCallbacks[t]=[o]),this.requested[t]!==!0){this.requested[t]=!0,!n.noMeta&&r&&r.uri&&s.add(p.uri,m.link("requestedBy"),r.uri,this.appNode);var v=h.XMLHTTPFactory(),y=v.req=s.bnode();v.original=s.sym(c),v.options=n,v.resource=p;var g=this,b=new Date,w="["+b.getHours()+":"+b.getMinutes()+":"+b.getSeconds()+"] ";n.noMeta||(s.add(y,m.rdfs("label"),s.literal(w+" Request for "+t),this.appNode),s.add(y,m.link("requestedURI"),s.literal(t),this.appNode),s.add(y,m.link("status"),s.collection(),this.appNode));var _=function(){if(!v.withCredentials)return!1;if(v.retriedWithCredentials)return!0;v.retriedWithCredentials=!0,console.log("web: Retrying with no credentials for "+v.resource),v.abort(),delete g.requested[t];var e={};for(var i in n)n.hasOwnProperty(i)&&(e[i]=n[i]);return e.withCredentials=!1,g.addStatus(v.req,"Abort: Will retry with credentials SUPPRESSED to see if that helps"),g.requestURI(t,r,e,v.userCallback),!0},x=function(e){return function(){switch(e.readyState){case 0:var r,i=e.resource.uri;if(this.crossSiteProxyTemplate&&"undefined"!=typeof document&&document.location){var o=f.hostpart,s=""+document.location;if(o(s)&&o(i)&&o(s)!==o(i)){if(r=this.crossSiteProxyTemplate.replace("{uri}",encodeURIComponent(i)),g.addStatus(e.req,"BLOCKED -> Cross-site Proxy to <"+r+">"),e.aborted)return;var c=g.store,l=e.req;c.add(l,m.http("redirectedTo"),c.sym(r),l);var h=e.req=c.bnode();c.add(l,m.http("redirectedRequest"),h,e.req);var p=new Date,d="["+p.getHours()+":"+p.getMinutes()+":"+p.getSeconds()+"] ";c.add(h,m.rdfs("label"),c.literal(d+" Request for "+r),this.appNode),c.add(h,m.link("status"),c.collection(),this.appNode),c.add(h,m.link("requestedURI"),c.literal(r),this.appNode);var v=c.bnode();c.add(l,m.link("response"),v),e.abort(),e.aborted=!0,e.redirected=!0,g.addStatus(l,"redirected XHR"),g.fetchCallbacks[e.resource.uri]&&(g.fetchCallbacks[r]||(g.fetchCallbacks[r]=[]),g.fetchCallbacks[r],g.fetchCallbacks[r].concat(g.fetchCallbacks[e.resource.uri]),delete g.fetchCallbacks[e.resource.uri]),g.fireCallbacks("redirected",u),g.requested[e.resource.uri]="redirected";var y=g.requestURI(r,e.resource,e.options||{},e.userCallback);if(y&&y.req)return void c.add(e.req,c.sym("http://www.w3.org/2007/ont/link#redirectedRequest"),y.req,g.appNode)}}g.failFetch(e,"HTTP Blocked. (ReadyState 0) Cross-site violation for <"+t+">");break;case 3:break;case 4:if(function(){if(!e.handleResponseDone){e.handleResponseDone=!0;var r=null,i=e.req;g.fireCallbacks("recv",u);var o=g.store;if(g.saveResponseMetadata(e,o),g.fireCallbacks("headers",[{uri:t,headers:e.headers}]),0===e.status){if(console.log("Masked error - status 0 for "+e.resource.uri),_())return;return void(e.CORS_status=900)}if(e.status>=400){if(404===e.status&&(o.fetcher.nonexistant[e.resource.uri]=!0),e.responseText.length>10){var s=o.bnode();o.add(s,m.http("content"),o.literal(e.responseText),s),e.statusText&&o.add(s,m.http("statusText"),o.literal(e.statusText),s)}return void g.failFetch(e,"HTTP error for "+e.resource+": "+e.status+" "+e.statusText)}var c,l=e.headers["content-location"],h=function(e){var t=i;for(l&&o.any(t,m.link("requestedURI"))!==l&&o.add(o.sym(l),m.rdf("type"),e,g.appNode);;){var r=o.any(t,m.link("requestedURI"));if(r&&r.value&&o.add(o.sym(r.value),m.rdf("type"),e,g.appNode),!(t=o.any(void 0,o.sym("http://www.w3.org/2007/ont/link#redirectedRequest"),t)))break;var n=o.any(t,o.sym("http://www.w3.org/2007/ont/link#response"));if(!n)break;var a=o.any(n,o.sym("http://www.w3.org/2007/ont/http#status"));if(!a)break;if("301"!==a&&"302"!==a)break}},p={rdf:"application/rdf+xml",owl:"application/rdf+xml",n3:"text/n3",ttl:"text/turtle",nt:"text/n3",acl:"text/n3",html:"text/html",xml:"text/xml"};if(200===e.status){h(m.link("Document"));var d=e.headers["content-type"];n.forceContentType&&(e.headers["content-type"]=n.forceContentType),(!d||d.indexOf("application/octet-stream")>=0)&&(c=p[e.resource.uri.split(".").pop()])&&(e.headers["content-type"]=c),d&&(0!==d.indexOf("image/")&&0!==d.indexOf("application/pdf")||h(o.sym("http://purl.org/dc/terms/Image"))),n.clearPreviousData&&o.removeDocument(e.resource)}if("file"!==f.protocol(e.resource.uri)&&"chrome"!==f.protocol(e.resource.uri)||(n.forceContentType?e.headers["content-type"]=n.forceContentType:(c=p[e.resource.uri.split(".").pop()],e.headers["content-type"]=c||"text/xml")),l){var v=f.join(e.resource.uri,l);if(!a&&v!==e.resource.uri&&g.requested[v]&&"done"===g.requested[v])return g.doneFetch(e),void e.abort();g.requested[v]=!0}for(var y=0;y<g.handlers.length;y++)if(e.headers["content-type"]&&e.headers["content-type"].match(g.handlers[y].pattern)){r=new g.handlers[y];break}if(g.parseLinkHeader(e,i),!r)return void g.doneFetch(e);try{r.handlerFactory(e)}catch(t){g.failFetch(e,"Exception handling content-type "+e.headers["content-type"]+" was: "+t)}}}(),e.handle&&void 0!==e.responseText){if("redirected"===g.requested[e.resource.uri])break;g.fireCallbacks("load",u),e.handle(function(){g.doneFetch(e)})}else e.redirected?g.addStatus(e.req,"Aborted and redirected to new request."):g.addStatus(e.req,"Fetch over. No data handled. Aborted = "+e.aborted)}}},k=t;"undefined"!=typeof tabulator&&tabulator.preferences.get("offlineModeUsingLocalhost")&&"http://"===k.slice(0,7)&&"localhost/"!==k.slice(7,17)&&(k="http://localhost/"+k.slice(7),i.warn("Localhost kludge for offline use: actually getting <"+k+">"));var T="https:"===k.slice(0,6);void 0!==n.withCredentials&&(T=n.withCredentials);var E=this.proxyIfNecessary(k);v.onerror=function(t){return function(r){if(t.onErrorWasCalled=!0,"undefined"!=typeof document&&e.crossSiteProxyTemplate&&document.location&&!t.proxyUsed){var n=f.hostpart,i=""+document.location,o=t.resource.uri;if(n(i)&&n(o)&&n(i)!==n(o))if(401===t.status||403===t.status||404===t.status)x(t)();else{if(_())return;var a=e.crossSiteProxy(o);if(console.log("web: Direct failed so trying proxy "+a),g.addStatus(t.req,"BLOCKED -> Cross-site Proxy to <"+a+">"),t.aborted)return;var s=g.store,u=t.req;t.options.noMeta||s.add(u,m.http("redirectedTo"),s.sym(a),u),t.abort(),t.aborted=!0,g.addStatus(u,"redirected to new request"),g.requested[t.resource.uri]="redirected",g.redirectedTo[t.resource.uri]=a,g.fetchCallbacks[t.resource.uri]&&(g.fetchCallbacks[a]||(g.fetchCallbacks[a]=[]),g.fetchCallbacks[a],g.fetchCallbacks[a].concat(g.fetchCallbacks[t.resource.uri]),delete g.fetchCallbacks[t.resource.uri]);var c=g.requestURI(a,t.resource,t.options,t.userCallback);if(c&&(c.proxyUsed=!0,c.original=t.original,console.log("Proxying but original still "+c.original)),c&&c.req)return void(t.options.noMeta||s.add(t.req,s.sym("http://www.w3.org/2007/ont/link#redirectedRequest"),c.req,g.appNode))}t.CORS_status=999}}}(v),v.onreadystatechange=x(v),v.timeout=g.timeout,v.withCredentials=T,v.actualProxyURI=E,v.req=y,v.options=n,v.options=n,v.resource=p,v.requestedURI=k,v.ontimeout=function(){g.failFetch(v,"requestTimeout")};try{v.open("GET",E,this.async)}catch(e){return this.failFetch(v,"XHR open for GET failed for <"+k+">:\n\t"+e)}if(a&&v.setRequestHeader("Cache-control","no-cache"),"undefined"!=typeof tabulator&&tabulator.isExtension&&v.channel&&("http"===f.protocol(v.resource.uri)||"https"===f.protocol(v.resource.uri)))try{v.channel.notificationCallbacks={getInterface:function(e){return e.equals(Components.interfaces.nsIChannelEventSink)?{onChannelRedirect:function(e,t,i){if(!v.aborted){var o=g.store,a=t.URI.spec,s=v.req;if(!v.options.noMeta){g.addStatus(v.req,"Redirected: "+v.status+" to <"+a+">"),o.add(s,m.http("redirectedTo"),o.sym(a),v.req);var c=v.req=o.bnode();o.add(s,m.http("redirectedRequest"),c,this.appNode);var l=new Date,h="["+l.getHours()+":"+l.getMinutes()+":"+l.getSeconds()+"] ";o.add(c,m.rdfs("label"),o.literal(h+" Request for "+a),this.appNode),o.add(c,m.link("status"),o.collection(),this.appNode),o.add(c,m.link("requestedURI"),o.literal(a),this.appNode);var p=o.bnode();o.add(s,m.link("response"),p),o.add(p,m.http("status"),o.literal(v.status),p),v.statusText&&o.add(p,m.http("statusText"),o.literal(v.statusText),p)}if(v.status-0!=303&&(o.HTTPRedirects[v.resource.uri]=a),v.status-0==301&&r){var d=f.docpart(r.uri),y="Warning: "+v.resource+" has moved to <"+a+">.";r&&(y+=" Link in <"+d+" >should be changed",o.add(d,o.sym("http://www.w3.org/2007/ont/link#warning"),y,g.appNode))}v.abort(),v.aborted=!0,g.fetchCallbacks[v.resource.uri]&&(g.fetchCallbacks[a]||(g.fetchCallbacks[a]=[]),g.fetchCallbacks[a],g.fetchCallbacks[a].concat(g.fetchCallbacks[v.resource.uri]),delete g.fetchCallbacks[v.resource.uri]),g.addStatus(s,"redirected"),g.fireCallbacks("redirected",u),g.requested[v.resource.uri]="redirected",g.redirectedTo[v.resource.uri]=a;var b=a.indexOf("#");b>=0&&(v.options.noMeta||o.add(v.resource,o.sym("http://www.w3.org/2007/ont/link#warning"),"Warning: "+v.resource+" HTTP redirects to"+a+' which should not contain a "#" sign'),a=a.slice(0,b));var w=g.requestURI(a,v.resource,v.options,v.userCallback);w&&w.req&&!n.noMeta&&o.add(v.req,o.sym("http://www.w3.org/2007/ont/link#redirectedRequest"),w.req,g.appNode)}},asyncOnChannelRedirect:function(e,t,n,i){if(!v.aborted){var o=g.store,a=t.URI.spec,s=v.req;g.addStatus(v.req,"Redirected: "+v.status+" to <"+a+">"),o.add(s,m.http("redirectedTo"),o.sym(a),v.req);var u=v.req=o.bnode();o.add(s,m.http("redirectedRequest"),u,v.req);var c=new Date,l="["+c.getHours()+":"+c.getMinutes()+":"+c.getSeconds()+"] ";o.add(u,m.rdfs("label"),o.literal(l+" Request for "+a),this.appNode),o.add(u,m.link("status"),o.collection(),this.appNode),o.add(u,m.link("requestedURI"),o.literal(a),this.appNode);var h=o.bnode();if(o.add(s,m.link("response"),h),o.add(h,m.http("status"),o.literal(v.status),h),v.statusText&&o.add(h,m.http("statusText"),o.literal(v.statusText),h),v.status-0!=303&&(o.HTTPRedirects[v.resource.uri]=a),v.status-0==301&&r){var p=f.docpart(r.uri),d="Warning: "+v.resource+" has moved to <"+a+">.";r&&(d+=" Link in <"+p+" >should be changed",o.add(p,o.sym("http://www.w3.org/2007/ont/link#warning"),d,g.appNode))}v.abort(),v.aborted=!0;var y=a.indexOf("#");if(y>=0){var b="Warning: "+v.resource+" HTTP redirects to"+a+' which do not normally contain a "#" sign';o.add(v.resource,o.sym("http://www.w3.org/2007/ont/link#warning"),b),a=a.slice(0,y)}g.requested[v.resource.uri]="redirected",g.redirectedTo[v.resource.uri]=a;var w=g.requestURI(a,v.resource,v.options,v.userCallback);w&&(w.original=v.original,w.req&&o.add(v.req,o.sym("http://www.w3.org/2007/ont/link#redirectedRequest"),w.req,g.appNode))}}}:Components.results.NS_NOINTERFACE}}}catch(e){return g.failFetch(v,"@@ Couldn't set callback for redirects: "+e)}try{var S="";for(var N in this.mediatypes){""!==S&&(S+=", "),S+=N;for(var I in this.mediatypes[N])S+=";"+I+"="+this.mediatypes[N][I]}v.setRequestHeader("Accept",S),this.addStatus(v.req,"Accept: "+S)}catch(e){throw new Error("Can't set Accept header: "+e)}try{v.send(null)}catch(e){return this.failFetch(v,"XHR send failed:"+e)}return setTimeout(function(){4!==v.readyState&&g.isPending(v.resource.uri)&&g.failFetch(v,"requestTimeout")},this.timeout),this.addStatus(v.req,"HTTP Request sent."),v}},this.objectRefresh=function(e){var t=g.uris(e);if(void 0!==t)for(var r=0;r<t.length;r++)this.refresh(this.store.sym(f.docpart(t[r])))},this.unload=function(e){this.store.removeMany(void 0,void 0,void 0,e),delete this.requested[e.uri]},this.refresh=function(e,t){this.fireCallbacks("refresh",arguments),this.requestURI(e.uri,void 0,{force:!0,clearPreviousData:!0},t)},this.retract=function(e){this.store.removeMany(void 0,void 0,void 0,e),e.uri&&delete this.requested[f.docpart(e.uri)],this.fireCallbacks("retract",arguments)},this.getState=function(e){return void 0===this.requested[e]?"unrequested":this.requested[e]===!0?"requested":"done"===this.requested[e]?"fetched":"redirected"===this.requested[e]?this.getState(this.redirectedTo[e]):"failed"},this.isPending=function(e){return this.requested[e]===!0}};e.exports=v},function(e,t,r){"use strict";var n=r(56),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o={BlankNode:r(23),Collection:r(55),convert:r(134),DataFactory:r(39),Empty:r(233),Fetcher:r(92),Formula:r(135),IndexedFormula:i.default,jsonParser:r(234),Literal:r(31),log:r(24),N3Parser:r(57),NamedNode:r(5),Namespace:r(40),Node:r(6),parse:r(136),Query:r(58).Query,queryToSPARQL:r(235),RDFaProcessor:r(94),RDFParser:r(95),serialize:r(96),Serializer:r(97),SPARQLToQuery:r(236),sparqlUpdateParser:r(137),Statement:r(59),term:r(6).fromValue,UpdateManager:r(237),UpdatesSocket:r(138).UpdatesSocket,UpdatesVia:r(138).UpdatesVia,uri:r(7),Util:r(13),Variable:r(60)};o.NextId=o.BlankNode.nextId,o.fromNT=o.Formula.prototype.fromNT,o.fetcher=o.DataFactory.fetcher,o.graph=o.DataFactory.graph,o.lit=o.DataFactory.lit,o.st=o.DataFactory.st,o.sym=o.DataFactory.namedNode,o.variable=o.DataFactory.variable,o.blankNode=o.DataFactory.blankNode,o.defaultGraph=o.DataFactory.defaultGraph,o.literal=o.DataFactory.literal,o.namedNode=o.DataFactory.namedNode,o.quad=o.DataFactory.quad,o.triple=o.DataFactory.triple,e.exports=o},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(23),a=r(31),s=r(39),u=r(5),c=r(7),l=r(13);if(void 0===f)var f={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12};var h=function(){function e(t,r){n(this,e),this.options=r||{},this.kb=t,this.target=r.target||{graph:{subjects:{},prefixes:{},terms:{}}},this.blankNodes=[],this.htmlOptions={selfClosing:"br img input area base basefont col colgroup source wbr isindex link meta param hr"},this.theOne="_:"+(new Date).getTime(),this.language=null,this.vocabulary=null,this.blankCounter=0,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}],this.inXHTMLMode=!1,this.absURIRE=/[\w\_\-]+:\S+/,this.finishedHandlers=[],this.init()}return i(e,[{key:"addTriple",value:function(e,t,r,n){var i,o,a,u;i=void 0===t?s.namedNode(this.options.base):this.toRDFNodeObject(t),a=this.toRDFNodeObject(r),o=this.toRDFNodeObject(n),u=s.namedNode(this.options.base),this.kb.add(i,a,o,u)}},{key:"ancestorPath",value:function(e){for(var t="";e&&e.nodeType!==f.DOCUMENT_NODE;)t="/"+e.localName+t,e=e.parentNode;return t}},{key:"copyMappings",value:function(e){var t={};for(var r in e)t[r]=e[r];return t}},{key:"copyProperties",value:function(){}},{key:"deriveDateTimeType",value:function(t){for(var r=0;r<e.dateTimeTypes.length;r++){var n=e.dateTimeTypes[r].pattern.exec(t);if(n&&n[0].length===t.length)return e.dateTimeTypes[r].type}return null}},{key:"init",value:function(){}},{key:"newBlankNode",value:function(){return"_:"+ ++this.blankCounter}},{key:"newSubjectOrigin",value:function(e,t){}},{key:"parseCURIE",value:function(t,r,n){var i,o=t.indexOf(":");if(o>=0){var a=t.substring(0,o);if(""===a)return i=r[""],i?i+t.substring(o+1):null;if("_"===a)return"_:"+t.substring(o+1);if(e.NCNAME.test(a)&&(i=r[a]))return i+t.substring(o+1)}return null}},{key:"parseCURIEOrURI",value:function(e,t,r){var n=this.parseCURIE(e,t,r);return n||this.resolveAndNormalize(r,e)}},{key:"parsePredicate",value:function(e,t,r,n,i,o){if(""===e)return null;var a=this.parseTermOrCURIEOrAbsURI(e,t,o?null:r,n,i);return a&&0===a.indexOf("_:")?null:a}},{key:"parsePrefixMappings",value:function(e,t){for(var r=this.tokenize(e),n=null,i=0;i<r.length;i++)":"===r[i][r[i].length-1]?n=r[i].substring(0,r[i].length-1):n&&(t[n]=this.options.base?c.join(r[i],this.options.base):r[i],n=null)}},{key:"parseSafeCURIEOrCURIEOrURI",value:function(e,t,r){return e=this.trim(e),"["===e.charAt(0)&&"]"===e.charAt(e.length-1)?(e=e.substring(1,e.length-1),e=e.trim(e),0===e.length?null:"_:"===e?this.theOne:this.parseCURIE(e,t,r)):this.parseCURIEOrURI(e,t,r)}},{key:"parseTermOrCURIEOrAbsURI",value:function(e,t,r,n,i){e=this.trim(e);var o=this.parseCURIE(e,n,i);if(o)return o;if(r){if(t&&!this.absURIRE.exec(e))return t+e;var a=r[e];if(a)return a;if(a=r[e.toLowerCase()])return a}return this.absURIRE.exec(e)?this.resolveAndNormalize(i,e):null}},{key:"parseTermOrCURIEOrURI",value:function(e,t,r,n,i){e=this.trim(e);var o=this.parseCURIE(e,n,i);if(o)return o;var a=r[e];return a||((a=r[e.toLowerCase()])?a:t&&!this.absURIRE.exec(e)?t+e:this.resolveAndNormalize(i,e))}},{key:"parseURI",value:function(e){return e}},{key:"process",value:function(t,r){var n;t.nodeType===f.DOCUMENT_NODE?(n=t.baseURI,t=t.documentElement,t.baseURI=n,this.setContext(t)):t.parentNode.nodeType===f.DOCUMENT_NODE&&this.setContext(t);var i=[],o=function(e){if(!e&&r&&r.baseURI)return r.baseURI;var t=e.indexOf("#");return t>=0&&(e=e.substring(0,t)),r&&r.baseURIMap&&(e=r.baseURIMap(e)),e};for(i.push({current:t,context:this.push(null,o(t.baseURI))});i.length>0;){var a=i.shift();if(a.parent){if(a.context.parent&&a.context.parent.listMapping===a.listMapping)continue;for(var s in a.listMapping){var u=a.listMapping[s];if(0!==u.length){for(var l=[],h=0;h<u.length;h++)l.push(this.newBlankNode());for(var p=0;p<l.length;p++)this.addTriple(a.parent,l[p],"http://www.w3.org/1999/02/22-rdf-syntax-ns#first",u[p]),this.addTriple(a.parent,l[p],"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",{type:e.objectURI,value:p+1<l.length?l[p+1]:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"});this.addTriple(a.parent,a.subject,s,{type:e.objectURI,value:l[0]})}else this.addTriple(a.parent,a.subject,s,{type:e.objectURI,value:"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"})}}else{var d=a.current,v=a.context,y=!1,g=null,m=null,b=null,w=v.prefixes,_=!1,x=[],k=v.listMapping,T=!v.parent,E=v.language,S=v.vocabulary;n=this.parseURI(o(d.baseURI)),d.item=null;var N=d.getAttributeNode("vocab");if(N){var I=this.trim(N.value);if(I.length>0){S=I;var O=n.spec;this.addTriple(d,O,"http://www.w3.org/ns/rdfa#usesVocabulary",{type:e.objectURI,value:S})}else S=this.vocabulary}for(var R=0;R<d.attributes.length;R++){var j=d.attributes[R];if("x"===j.nodeName.charAt(0)&&0===j.nodeName.indexOf("xmlns:")){_||(w=this.copyMappings(w),_=!0);var C=j.nodeName.substring(6),A=e.trim(j.value);w[C]=this.options.base?c.join(A,this.options.base):A}}var L=d.getAttributeNode("prefix");L&&(_||(w=this.copyMappings(w),_=!0),this.parsePrefixMappings(L.value,w));for(var D=null,M=0;!D&&M<this.langAttributes.length;M++)D=d.getAttributeNodeNS(this.langAttributes[M].namespaceURI,this.langAttributes[M].localName);if(D){var U=e.trim(D.value);E=U.length>0?U:null}var P,q,F=d.getAttributeNode("rel"),z=d.getAttributeNode("rev"),B=d.getAttributeNode("typeof"),H=d.getAttributeNode("property"),X=d.getAttributeNode("datatype"),V=this.inHTMLMode?d.getAttributeNode("datetime"):null,W=d.getAttributeNode("content"),G=d.getAttributeNode("about"),J=d.getAttributeNode("src"),Q=d.getAttributeNode("resource"),$=d.getAttributeNode("href"),Y=d.getAttributeNode("inlist"),K=[];if(F){q=this.tokenize(F.value);for(var Z=0;Z<q.length;Z++)(P=this.parsePredicate(q[Z],S,v.terms,w,n,this.inHTMLMode&&null!==H))&&K.push(P)}var ee=[];if(z){q=this.tokenize(z.value);for(var te=0;te<q.length;te++)(P=this.parsePredicate(q[te],S,v.terms,w,n,this.inHTMLMode&&H))&&ee.push(P)}if(this.inHTMLMode&&(F||z)&&H&&(0===K.length&&(F=null),0===ee.length&&(z=null)),F||z?(G&&(g=this.parseSafeCURIEOrCURIEOrURI(G.value,w,n)),B&&(b=g),g||(d.parentNode.nodeType===f.DOCUMENT_NODE?g=o(d.baseURI):v.parentObject&&(g=o(d.parentNode.baseURI)===v.parentObject?o(d.baseURI):v.parentObject)),Q&&(m=this.parseSafeCURIEOrCURIEOrURI(Q.value,w,n)),m||($?m=this.resolveAndNormalize(n,encodeURI($.value)):J?m=this.resolveAndNormalize(n,encodeURI(J.value)):!B||G||this.inXHTMLMode&&("head"===d.localName||"body"===d.localName)||(m=this.newBlankNode())),!B||G||!this.inXHTMLMode||"head"!==d.localName&&"body"!==d.localName?B&&!G&&(b=m):b=g):!H||W||X?(G&&(g=this.parseSafeCURIEOrCURIEOrURI(G.value,w,n)),!g&&Q&&(g=this.parseSafeCURIEOrCURIEOrURI(Q.value,w,n)),!g&&$&&(g=this.resolveAndNormalize(n,encodeURI($.value))),!g&&J&&(g=this.resolveAndNormalize(n,encodeURI(J.value))),g||(d.parentNode.nodeType===f.DOCUMENT_NODE?g=o(d.baseURI):!this.inXHTMLMode&&!this.inHTMLMode||"head"!==d.localName&&"body"!==d.localName?B?g=this.newBlankNode():v.parentObject&&(g=o(d.parentNode.baseURI)===v.parentObject?o(d.baseURI):v.parentObject,H||(y=!0)):g=o(d.parentNode.baseURI)===v.parentObject?o(d.baseURI):v.parentObject),B&&(b=g)):(G&&(g=this.parseSafeCURIEOrCURIEOrURI(G.value,w,n),B&&(b=g)),g||d.parentNode.nodeType!==f.DOCUMENT_NODE?!g&&v.parentObject&&(g=o(d.parentNode.baseURI)===v.parentObject?o(d.baseURI):v.parentObject):(g=o(d.baseURI),B&&(b=g)),B&&!b&&(Q&&(b=this.parseSafeCURIEOrCURIEOrURI(Q.value,w,n)),!b&&$&&(b=this.resolveAndNormalize(n,encodeURI($.value))),!b&&J&&(b=this.resolveAndNormalize(n,encodeURI(J.value))),b||!this.inXHTMLMode&&!this.inHTMLMode||"head"!==d.localName&&"body"!==d.localName||(b=g),b||(b=this.newBlankNode()),m=b)),g&&(G||Q||b)){var re=g;B&&!G&&!Q&&m&&(re=m),this.newSubjectOrigin(d,re)}if(b){q=this.tokenize(B.value);for(var ne=0;ne<q.length;ne++){var ie=this.parseTermOrCURIEOrAbsURI(q[ne],S,v.terms,w,n);ie&&this.addTriple(d,b,e.typeURI,{type:e.objectURI,value:ie})}}if(g&&g!==v.parentObject&&(k={},T=!0),m){if(F&&Y)for(var oe=0;oe<K.length;oe++){var ae=k[K[oe]];ae||(ae=[],k[K[oe]]=ae),ae.push({type:e.objectURI,value:m})}else if(F)for(var se=0;se<K.length;se++)this.addTriple(d,g,K[se],{type:e.objectURI,value:m});if(z)for(var ue=0;ue<ee.length;ue++)this.addTriple(d,m,ee[ue],{type:e.objectURI,value:g})}else{if(g&&!m&&(F||z)&&(m=this.newBlankNode()),F&&Y)for(var ce=0;ce<K.length;ce++){var le=k[K[ce]];le||(le=[],k[P]=le),x.push({predicate:K[ce],list:le})}else if(F)for(var fe=0;fe<K.length;fe++)x.push({predicate:K[fe],forward:!0});if(z)for(var he=0;he<ee.length;he++)x.push({predicate:ee[he],forward:!1})}if(H){var pe=null,de=null;X?(pe=""===X.value?e.PlainLiteralURI:this.parseTermOrCURIEOrAbsURI(X.value,S,v.terms,w,n),de=V&&!W?V.value:pe===e.XMLLiteralURI||pe===e.HTMLLiteralURI?null:W?W.value:d.textContent):W?(pe=e.PlainLiteralURI,de=W.value):V?(de=V.value,(pe=e.deriveDateTimeType(de))||(pe=e.PlainLiteralURI)):F||z||(Q&&(de=this.parseSafeCURIEOrCURIEOrURI(Q.value,w,n)),!de&&$?de=this.resolveAndNormalize(n,encodeURI($.value)):!de&&J&&(de=this.resolveAndNormalize(n,encodeURI(J.value))),de&&(pe=e.objectURI)),pe||(B&&!G?(pe=e.objectURI,de=b):(de=d.textContent,this.inHTMLMode&&"time"===d.localName&&(pe=e.deriveDateTimeType(de)),pe||(pe=e.PlainLiteralURI))),q=this.tokenize(H.value);for(var ve=0;ve<q.length;ve++){var ye=this.parsePredicate(q[ve],S,v.terms,w,n);if(ye)if(Y){var ge=k[ye];ge||(ge=[],k[ye]=ge),ge.push(pe===e.XMLLiteralURI||pe===e.HTMLLiteralURI?{type:pe,value:d.childNodes}:{type:pe||e.PlainLiteralURI,value:de,language:E})}else pe===e.XMLLiteralURI||pe===e.HTMLLiteralURI?this.addTriple(d,g,ye,{type:pe,value:d.childNodes}):this.addTriple(d,g,ye,{type:pe||e.PlainLiteralURI,value:de,language:E})}}if(g&&!y)for(var me=0;me<v.incomplete.length;me++)v.incomplete[me].list?v.incomplete[me].list.push({type:e.objectURI,value:g}):v.incomplete[me].forward?this.addTriple(d,v.subject,v.incomplete[me].predicate,{type:e.objectURI,value:g}):this.addTriple(d,g,v.incomplete[me].predicate,{type:e.objectURI,value:v.subject});var be=null,we=g;y?(be=this.push(v,v.subject),be.parentObject=o(d.parentNode.baseURI)===v.parentObject?o(d.baseURI):v.parentObject,be.incomplete=v.incomplete,be.language=E,be.prefixes=w,be.vocabulary=S):(be=this.push(v,g),be.parentObject=m||(g||v.subject),be.prefixes=w,be.incomplete=x,m&&(we=m,k={},T=!0),be.listMapping=k,be.language=E,be.vocabulary=S),T&&i.unshift({parent:d,context:v,subject:we,listMapping:k});for(var _e=d.lastChild;_e;_e=_e.previousSibling)_e.nodeType===f.ELEMENT_NODE&&(_e.baseURI=d.baseURI,i.unshift({current:_e,context:be}))}}this.inHTMLMode&&this.copyProperties();for(var xe=0;xe<this.finishedHandlers.length;xe++)this.finishedHandlers[xe](t)}},{key:"push",value:function(e,t){return{parent:e,subject:t||(e?e.subject:null),parentObject:null,incomplete:[],listMapping:e?e.listMapping:{},language:e?e.language:this.language,prefixes:e?e.prefixes:this.target.graph.prefixes,terms:e?e.terms:this.target.graph.terms,vocabulary:e?e.vocabulary:this.vocabulary}}},{key:"resolveAndNormalize",value:function(e,t){return c.join(t,e)}},{key:"setContext",value:function(e){"html"===e.localName&&"XHTML+RDFa 1.1"===e.getAttribute("version")?this.setXHTMLContext():"html"===e.localName||"http://www.w3.org/1999/xhtml"===e.namespaceURI?"undefined"!=typeof document&&document.doctype?"-//W3C//DTD XHTML+RDFa 1.0//EN"===document.doctype.publicId&&"http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd"===document.doctype.systemId?(console.log("WARNING: RDF 1.0 is not supported.  Defaulting to HTML5 mode."),this.setHTMLContext()):"-//W3C//DTD XHTML+RDFa 1.1//EN"===document.doctype.publicId&&"http://www.w3.org/MarkUp/DTD/xhtml-rdfa-2.dtd"===document.doctype.systemId?this.setXHTMLContext():this.setHTMLContext():this.setHTMLContext():this.setXMLContext()}},{key:"setHTMLContext",value:function(){this.setInitialContext(),this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}],this.inXHTMLMode=!1,this.inHTMLMode=!0}},{key:"setInitialContext",value:function(){this.vocabulary=null,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"}]}},{key:"setXHTMLContext",value:function(){this.setInitialContext(),this.inXHTMLMode=!0,this.inHTMLMode=!1,this.langAttributes=[{namespaceURI:"http://www.w3.org/XML/1998/namespace",localName:"lang"},{namespaceURI:null,localName:"lang"}],this.target.graph.terms.alternate="http://www.w3.org/1999/xhtml/vocab#alternate",this.target.graph.terms.appendix="http://www.w3.org/1999/xhtml/vocab#appendix",this.target.graph.terms.bookmark="http://www.w3.org/1999/xhtml/vocab#bookmark",this.target.graph.terms.cite="http://www.w3.org/1999/xhtml/vocab#cite",this.target.graph.terms.chapter="http://www.w3.org/1999/xhtml/vocab#chapter",this.target.graph.terms.contents="http://www.w3.org/1999/xhtml/vocab#contents",this.target.graph.terms.copyright="http://www.w3.org/1999/xhtml/vocab#copyright",this.target.graph.terms.first="http://www.w3.org/1999/xhtml/vocab#first",this.target.graph.terms.glossary="http://www.w3.org/1999/xhtml/vocab#glossary",this.target.graph.terms.help="http://www.w3.org/1999/xhtml/vocab#help",this.target.graph.terms.icon="http://www.w3.org/1999/xhtml/vocab#icon",this.target.graph.terms.index="http://www.w3.org/1999/xhtml/vocab#index",this.target.graph.terms.last="http://www.w3.org/1999/xhtml/vocab#last",this.target.graph.terms.license="http://www.w3.org/1999/xhtml/vocab#license",this.target.graph.terms.meta="http://www.w3.org/1999/xhtml/vocab#meta",this.target.graph.terms.next="http://www.w3.org/1999/xhtml/vocab#next",this.target.graph.terms.prev="http://www.w3.org/1999/xhtml/vocab#prev",this.target.graph.terms.previous="http://www.w3.org/1999/xhtml/vocab#previous",this.target.graph.terms.section="http://www.w3.org/1999/xhtml/vocab#section",this.target.graph.terms.stylesheet="http://www.w3.org/1999/xhtml/vocab#stylesheet",this.target.graph.terms.subsection="http://www.w3.org/1999/xhtml/vocab#subsection",this.target.graph.terms.start="http://www.w3.org/1999/xhtml/vocab#start",this.target.graph.terms.top="http://www.w3.org/1999/xhtml/vocab#top",this.target.graph.terms.up="http://www.w3.org/1999/xhtml/vocab#up",this.target.graph.terms.p3pv1="http://www.w3.org/1999/xhtml/vocab#p3pv1",this.target.graph.terms.related="http://www.w3.org/1999/xhtml/vocab#related",this.target.graph.terms.role="http://www.w3.org/1999/xhtml/vocab#role",this.target.graph.terms.transformation="http://www.w3.org/1999/xhtml/vocab#transformation"}},{key:"setXMLContext",value:function(){this.setInitialContext(),this.inXHTMLMode=!1,this.inHTMLMode=!1}},{key:"tokenize",value:function(e){return this.trim(e).split(/\s+/)}},{key:"toRDFNodeObject",value:function(t){if(void 0!==t){if("string"==typeof t)return"_:"===t.substring(0,2)?(void 0===this.blankNodes[t.substring(2)]&&(this.blankNodes[t.substring(2)]=new o(t.substring(2))),this.blankNodes[t.substring(2)]):s.namedNode(t);switch(t.type){case e.objectURI:return"_:"===t.value.substring(0,2)?(void 0===this.blankNodes[t.value.substring(2)]&&(this.blankNodes[t.value.substring(2)]=new o(t.value.substring(2))),this.blankNodes[t.value.substring(2)]):s.namedNode(t.value);case e.PlainLiteralURI:return new a(t.value,t.language||"");case e.XMLLiteralURI:case e.HTMLLiteralURI:var r="";return Object.keys(t.value).forEach(function(e){r+=l.domToString(t.value[e],this.htmlOptions)}),new a(r,"",new u(t.type));default:return new a(t.value,"",new u(t.type))}}}},{key:"trim",value:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}}],[{key:"parseRDFaDOM",value:function(t,r,n){var i=new e(r,{base:n});t.baseURI=n,i.process(t)}}]),e}();h.XMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral",h.HTMLLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML",h.PlainLiteralURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral",h.objectURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#object",h.typeURI="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",h.nameChar="[-A-Z_a-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�က0-F.0-9·̀-ͯ‿-⁀]",h.nameStartChar="[A-Za-zÀ-ÖØ-öø-ÿĀ-ıĴ-ľŁ-ňŊ-žƀ-ǃǍ-ǰǴ-ǵǺ-ȗɐ-ʨʻ-ˁΆΈ-ΊΌΎ-ΡΣ-ώϐ-ϖϚϜϞϠϢ-ϳЁ-ЌЎ-яё-ќў-ҁҐ-ӄӇ-ӈӋ-ӌӐ-ӫӮ-ӵӸ-ӹԱ-Ֆՙա-ֆא-תװ-ײء-غف-يٱ-ڷں-ھۀ-ێې-ۓەۥ-ۦअ-हऽक़-ॡঅ-ঌএ-ঐও-নপ-রলশ-হড়-ঢ়য়-ৡৰ-ৱਅ-ਊਏ-ਐਓ-ਨਪ-ਰਲ-ਲ਼ਵ-ਸ਼ਸ-ਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઋઍએ-ઑઓ-નપ-રલ-ળવ-હઽૠଅ-ଌଏ-ଐଓ-ନପ-ରଲ-ଳଶ-ହଽଡ଼-ଢ଼ୟ-ୡஅ-ஊஎ-ஐஒ-கங-சஜஞ-டண-தந-பம-வஷ-ஹఅ-ఌఎ-ఐఒ-నప-ళవ-హౠ-ౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹೞೠ-ೡഅ-ഌഎ-ഐഒ-നപ-ഹൠ-ൡก-ฮะา-ำเ-ๅກ-ຂຄງ-ຈຊຍດ-ທນ-ຟມ-ຣລວສ-ຫອ-ຮະາ-ຳຽເ-ໄཀ-ཇཉ-ཀྵႠ-Ⴥა-ჶᄀᄂ-ᄃᄅ-ᄇᄉᄋ-ᄌᄎ-ᄒᄼᄾᅀᅌᅎᅐᅔ-ᅕᅙᅟ-ᅡᅣᅥᅧᅩᅭ-ᅮᅲ-ᅳᅵᆞᆨᆫᆮ-ᆯᆷ-ᆸᆺᆼ-ᇂᇫᇰᇹḀ-ẛẠ-ỹἀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼΩK-Å℮ↀ-ↂぁ-ゔァ-ヺㄅ-ㄬ가-힣一-龥〇〡-〩_]",h.NCNAME=new RegExp("^"+h.nameStartChar+h.nameChar+"*$"),h.dateTimeTypes=[{pattern:/-?P(?:[0-9]+Y)?(?:[0-9]+M)?(?:[0-9]+D)?(?:T(?:[0-9]+H)?(?:[0-9]+M)?(?:[0-9]+(?:\.[0-9]+)?S)?)?/,type:"http://www.w3.org/2001/XMLSchema#duration"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9]T(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#dateTime"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9](?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#date"},{pattern:/(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\.[0-9]+)?(?:Z|[+\-][0-9][0-9]:[0-9][0-9])?/,type:"http://www.w3.org/2001/XMLSchema#time"},{pattern:/-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]/,type:"http://www.w3.org/2001/XMLSchema#gYearMonth"},{pattern:/-?[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9]/,type:"http://www.w3.org/2001/XMLSchema#gYear"}],e.exports=h},function(e,t,r){"use strict";var n=r(7),i=function(e){var t={};t.ns={RDF:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",RDFS:"http://www.w3.org/2000/01/rdf-schema#"},t.nodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},this.frameFactory=function(e,r,i){return{NODE:1,ARC:2,parent:r,parser:e,store:e.store,element:i,lastChild:0,base:null,lang:null,node:null,nodeType:null,listIndex:1,rdfid:null,datatype:null,collection:!1,terminateFrame:function(){this.collection&&this.node.close()},addSymbol:function(e,t){t=n.join(t,this.base),this.node=this.store.sym(t),this.nodeType=e},loadTriple:function(){if(this.parent.parent.collection?this.parent.parent.node.append(this.node):this.store.add(this.parent.parent.node,this.parent.node,this.node,this.parser.why),null!=this.parent.rdfid){var e=this.store.sym(n.join("#"+this.parent.rdfid,this.base));this.store.add(e,this.store.sym(t.ns.RDF+"type"),this.store.sym(t.ns.RDF+"Statement"),this.parser.why),this.store.add(e,this.store.sym(t.ns.RDF+"subject"),this.parent.parent.node,this.parser.why),this.store.add(e,this.store.sym(t.ns.RDF+"predicate"),this.parent.node,this.parser.why),this.store.add(e,this.store.sym(t.ns.RDF+"object"),this.node,this.parser.why)}},isTripleToLoad:function(){return null!=this.parent&&null!=this.parent.parent&&this.nodeType===this.NODE&&this.parent.nodeType===this.ARC&&this.parent.parent.nodeType===this.NODE},addNode:function(e){this.addSymbol(this.NODE,e),this.isTripleToLoad()&&this.loadTriple()},addCollection:function(){this.nodeType=this.NODE,this.node=this.store.collection(),this.collection=!0,this.isTripleToLoad()&&this.loadTriple()},addCollectionArc:function(){this.nodeType=this.ARC},addBNode:function(e){null!=e?null!=this.parser.bnodes[e]?this.node=this.parser.bnodes[e]:this.node=this.parser.bnodes[e]=this.store.bnode():this.node=this.store.bnode(),this.nodeType=this.NODE,this.isTripleToLoad()&&this.loadTriple()},addArc:function(e){e===t.ns.RDF+"li"&&(e=t.ns.RDF+"_"+this.parent.listIndex,this.parent.listIndex++),this.addSymbol(this.ARC,e)},addLiteral:function(e){this.parent.datatype?this.node=this.store.literal(e,"",this.store.sym(this.parent.datatype)):this.node=this.store.literal(e,this.lang),this.nodeType=this.NODE,this.isTripleToLoad()&&this.loadTriple()}}},this.getAttributeNodeNS=function(e,t,r){var n=null;if(e.getAttributeNodeNS)n=e.getAttributeNodeNS(t,r);else for(var i,o=e.attributes,a=0;a<o.length;++a)if(i=o[a],i.namespaceURI===t&&(i.prefix?i.prefix+":"+r:r)===i.nodeName){n=i;break}return n},this.store=e,this.bnodes={},this.why=null,this.reify=!1,this.parse=function(e,r,n){var i=e.childNodes;this.cleanParser();var o;if(e.nodeType===t.nodeType.DOCUMENT){for(var a=0;a<i.length;a++)if(i[a].nodeType===t.nodeType.ELEMENT){o=i[a];break}}else{if(e.nodeType!==t.nodeType.ELEMENT)throw new Error("RDFParser: can't find root in "+r+". Halting. ");o=e}this.why=n;var s=this.frameFactory(this);return this.base=r,s.base=r,s.lang=null,this.parseDOM(this.buildFrame(s,o)),!0},this.parseDOM=function(e){for(var r,i=function(e){var t="";if(null==e.namespaceURI)throw new Error("RDF/XML syntax error: No namespace for "+e.localName+" in "+this.base);return e.namespaceURI&&(t+=e.namespaceURI),e.localName?t+=e.localName:e.nodeName&&(e.nodeName.indexOf(":")>=0?t+=e.nodeName.split(":")[1]:t+=e.nodeName),t}.bind(this),o=!0;e.parent;){var a=e.element,s=a.attributes;if(a.nodeType===t.nodeType.TEXT||a.nodeType===t.nodeType.CDATA_SECTION)e.parent.nodeType===e.NODE&&(e.addArc(t.ns.RDF+"value"),e=this.buildFrame(e)),e.addLiteral(a.nodeValue);else if(i(a)!==t.ns.RDF+"RDF")if(e.parent&&e.parent.collection&&(e.addCollectionArc(),e=this.buildFrame(e,e.element),e.parent.element=null),e.parent&&e.parent.nodeType&&e.parent.nodeType!==e.ARC){e.addArc(i(a)),this.reify&&(r=this.getAttributeNodeNS(a,t.ns.RDF,"ID"))&&(e.rdfid=r.nodeValue,a.removeAttributeNode(r));var u=this.getAttributeNodeNS(a,t.ns.RDF,"parseType"),c=this.getAttributeNodeNS(a,t.ns.RDF,"datatype");if(c&&(e.datatype=c.nodeValue,a.removeAttributeNode(c)),u){var l=u.nodeValue;"Literal"===l?(e.datatype=t.ns.RDF+"XMLLiteral",e=this.buildFrame(e),e.addLiteral(a),o=!1):"Resource"===l?(e=this.buildFrame(e,e.element),e.parent.element=null,e.addBNode()):"Collection"===l&&(e=this.buildFrame(e,e.element),e.parent.element=null,e.addCollection()),a.removeAttributeNode(u)}if(0!==s.length){var f=this.getAttributeNodeNS(a,t.ns.RDF,"resource"),h=this.getAttributeNodeNS(a,t.ns.RDF,"nodeID");e=this.buildFrame(e),f?(e.addNode(f.nodeValue),a.removeAttributeNode(f)):h?(e.addBNode(h.nodeValue),a.removeAttributeNode(h)):e.addBNode();for(var p=s.length-1;p>=0;p--){var d=this.buildFrame(e);d.addArc(i(s[p])),i(s[p])===t.ns.RDF+"type"?this.buildFrame(d).addNode(s[p].nodeValue):this.buildFrame(d).addLiteral(s[p].nodeValue)}}else 0===a.childNodes.length&&this.buildFrame(e).addLiteral("")}else{var v=this.getAttributeNodeNS(a,t.ns.RDF,"about");if(r=this.getAttributeNodeNS(a,t.ns.RDF,"ID"),v&&r)throw new Error("RDFParser: "+a.nodeName+" has both rdf:id and rdf:about. Halting. Only one of these properties may be specified on a node.");if(!v&&r)e.addNode("#"+r.nodeValue),a.removeAttributeNode(r);else if(null==v&&null==r){var y=this.getAttributeNodeNS(a,t.ns.RDF,"nodeID");y?(e.addBNode(y.nodeValue),a.removeAttributeNode(y)):e.addBNode()}else e.addNode(v.nodeValue),a.removeAttributeNode(v);var g=this.getAttributeNodeNS(a,t.ns.RDF,"type");t.ns.RDF+"Description"!==i(a)&&(g={nodeValue:i(a)}),null!=g&&(this.store.add(e.node,this.store.sym(t.ns.RDF+"type"),this.store.sym(n.join(g.nodeValue,e.base)),this.why),g.nodeName&&a.removeAttributeNode(g));for(var m=s.length-1;m>=0;m--)this.store.add(e.node,this.store.sym(i(s[m])),this.store.literal(s[m].nodeValue,e.lang),this.why)}for(a=e.element;e.parent;){for(var b=e;null==a;)e=e.parent,a=e.element;var w=a.childNodes&&a.childNodes[e.lastChild];if(w&&o){if((w.nodeType===t.nodeType.ELEMENT||w.nodeType===t.nodeType.TEXT||w.nodeType===t.nodeType.CDATA_SECTION)&&(w.nodeType!==t.nodeType.TEXT&&w.nodeType!==t.nodeType.CDATA_SECTION||1===a.childNodes.length)){e.lastChild++,e=this.buildFrame(b,a.childNodes[e.lastChild-1]);break}e.lastChild++}else{if(e.terminateFrame(),!(e=e.parent))break;a=e.element,o=!0}}}},this.cleanParser=function(){this.bnodes={},this.why=null},this.buildFrame=function(e,r){var i=this.frameFactory(this,e,r);if(e&&(i.base=e.base,i.lang=e.lang),!r||r.nodeType===t.nodeType.TEXT||r.nodeType===t.nodeType.CDATA_SECTION)return i;var o=r.attributes,a=r.getAttributeNode("xml:base");null!=a&&(i.base=a.nodeValue,r.removeAttribute("xml:base"));var s=r.getAttributeNode("xml:lang");null!=s&&(i.lang=s.nodeValue,r.removeAttribute("xml:lang"));for(var u=o.length-1;u>=0;u--)if("xml"===o[u].nodeName.substr(0,3)){if("xmlns:"===o[u].name.slice(0,6)){var c=o[u].nodeValue;this.base&&(c=n.join(c,this.base)),this.store.setPrefixForURI(o[u].name.slice(6),c)}r.removeAttributeNode(o[u])}return i}};e.exports=i},function(e,t,r){"use strict";function n(e,t,r,n,a){function s(e,t){return a?void a(e,t):t}r=r||e.uri,n=n||"text/turtle";var u=null;try{var c,l=o(t),f=t.statementsMatching(void 0,void 0,void 0,e);switch(l.suggestNamespaces(t.namespaces),l.setBase(r),n){case"application/rdf+xml":return u=l.statementsToXML(f),s(null,u);case"text/n3":case"application/n3":return u=l.statementsToN3(f),s(null,u);case"text/turtle":case"application/x-turtle":return l.setFlags("si"),u=l.statementsToN3(f),s(null,u);case"application/n-triples":return l.setFlags("deinprstux"),u=l.statementsToNTriples(f),s(null,u);case"application/ld+json":l.setFlags("deinprstux"),c=l.statementsToNTriples(f),i.convertToJson(c,a);break;case"application/n-quads":case"application/nquads":return l.setFlags("deinprstux q"),u=l.statementsToNTriples(f),s(null,u);default:throw new Error("Serialize: Content-type "+n+" not supported for data write.")}}catch(e){if(a)return a(e);throw e}}e.exports=n;var i=r(134),o=r(97)},function(e,t,r){"use strict";var n=r(5),i=r(23),o=r(7),a=r(13),s=r(139),u=function(){function e(e){return encodeURI(e)}function t(e){for(var t,r="",n=0;n<e.length;n++)t=e.charCodeAt(n),r+=t>65535?"\\U"+("00000000"+t.toString(16)).slice(-8):t>126?"\\u"+("0000"+t.toString(16)).slice(-4):e[n];return r}var r=function(e){this.flags="",this.base=null,this.prefixes=[],this.namespaces=[],this.suggestPrefix("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#"),this.suggestPrefix("xml","reserved:reservedForFutureUse"),this.namespacesUsed=[],this.keywords=["a"],this.prefixchars="abcdefghijklmnopqustuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",this.incoming=null,this.formulas=[],this.store=e};return r.prototype.setBase=function(e){return this.base=e,this},r.prototype.setFlags=function(e){return this.flags=e||"",this},r.prototype.toStr=function(e){var t=e.toNT();return"formula"===e.termType&&(this.formulas[t]=e),t},r.prototype.fromStr=function(e){if("{"===e[0]){var t=this.formulas[e];return t||console.log("No formula object for "+e),t}return this.store.fromNT(e)},r.prototype.suggestPrefix=function(e,t){"default"!==e.slice(0,7)&&"ns"!==e.slice(0,2)&&e&&t&&(e in this.namespaces||t in this.prefixes||(this.prefixes[t]=e,this.namespaces[e]=t))},r.prototype.suggestNamespaces=function(e){for(var t in e)return this.suggestPrefix(t,e[t]),this},r.prototype.checkIntegrity=function(){var e,t;for(e in this.namespaces)if(this.prefixes[this.namespaces[e]]!==e)throw new Error("Serializer integity error 1: "+e+", "+this.namespaces[e]+", "+this.prefixes[this.namespaces[e]]+"!");for(t in this.prefixes)if(this.namespaces[this.prefixes[t]]!==t)throw new Error("Serializer integity error 2: "+t+", "+this.prefixs[t]+", "+this.namespaces[this.prefixes[t]]+"!")},r.prototype.makeUpPrefix=function(e){function t(t){return!!r.prototype.validPrefix.test(t)&&("ns"!==t&&(!(t in this.namespaces)&&(this.prefixes[e]=t,this.namespaces[t]=e,t)))}var n=e,i=t.bind(this);"#/".indexOf(n[n.length-1])>=0&&(n=n.slice(0,-1));var o=n.lastIndexOf("/");o>=0&&(n=n.slice(o+1));for(var a=0;a<n.length&&this.prefixchars.indexOf(n[a]);)a++;if(n=n.slice(0,a),n.length<6&&i(n))return n;if(i(n.slice(0,3)))return n.slice(0,3);if(i(n.slice(0,2)))return n.slice(0,2);if(i(n.slice(0,4)))return n.slice(0,4);if(i(n.slice(0,1)))return n.slice(0,1);if(i(n.slice(0,5)))return n.slice(0,5);r.prototype.validPrefix.test(n)||(n="n");for(var s=0;;s++)if(i(n.slice(0,3)+s))return n.slice(0,3)+s},r.prototype.rootSubjects=function(e){for(var t={},r={},n={},i=0;i<e.length;i++){var o=e[i];[o.subject,o.predicate,o.object].map(function(e){"BlankNode"===e.termType&&(n[e.toNT()]=!0)});var a=e[i].object;t.hasOwnProperty(a)||(t[a]=[]),t[a].push(o.subject);var s=r[this.toStr(o.subject)];s||(s=[]),s.push(o),r[this.toStr(o.subject)]=s}var u=[];for(var c in r)if(r.hasOwnProperty(c)){var l=this.fromStr(c);"BlankNode"===l.termType&&t[l]&&1===t[l].length||u.push(l)}this.incoming=t;for(var f={},h=0;h<u.length;h++)f[u[h].toNT()]=!0;return{roots:u,subjects:r,rootsHash:f,incoming:t}},r.prototype.toN3=function(e){return this.statementsToN3(e.statements)},r.prototype._notQNameChars="\t\r\n !\"#$%&'()*.,+/;<=>?@[\\]^`{|}~",r.prototype._notNameChars=r.prototype._notQNameChars+":",r.prototype.explicitURI=function(r){return"<"+(r=this.flags.indexOf("r")<0&&this.base?o.refTo(this.base,r):this.flags.indexOf("u")>=0?t(r):e(r))+">"},r.prototype.statementsToNTriples=function(e){var t=e.slice();t.sort();for(var r="",n="http://www.w3.org/1999/02/22-rdf-syntax-ns#",o=this,a=this.store,s=function e(t){if("collection"!==t.termType)return o.atomicTermToN3(t);for(var s=t.elements,u=a.sym(n+"nill"),c=s.length-1;c>=0;c--){var l=new i;r+=e(l)+" "+e(a.sym(n+"first"))+" "+e(s[c])+".\n",r+=e(l)+" "+e(a.sym(n+"rest"))+" "+e(u)+".\n",u=l}return o.atomicTermToN3(u)},u=0;u<t.length;u++){var c=t[u],l="";l+=s(c.subject)+" ",l+=s(c.predicate)+" ",l+=s(c.object)+" ",this.flags.indexOf("q")>=0&&(l+=s(c.why)+" "),l+=".\n",r+=l}return r},r.prototype.statementsToN3=function(e){function t(e){for(var t=this.rootSubjects(e),r=t.roots,i=[],o=0;o<r.length;o++){var a=r[o];i.push(n(a,t))}return i}function n(e,t){return"BlankNode"!==e.termType||t.incoming[e]?[d(e,t)].concat([h(e,t)]).concat(["."]):p(e,t,!0).concat(["."])}function i(e,t){var r=[],n=null,i=t.subjects[this.toStr(e)];if(void 0===i)throw new Error("Cant find statements for "+e);i.sort();for(var o=[],a=0;a<i.length;a++){var s=i[a];s.predicate.uri===n?o.push(","):(n&&(r=r.concat([o]).concat([";"]),o=[]),r.push(u[s.predicate.uri]?u[s.predicate.uri]:d(s.predicate,t))),n=s.predicate.uri,o.push(p(s.object,t))}return r=r.concat([o])}function o(e,t,r){return"BlankNode"===e.termType&&t.subjects[this.toStr(e)]&&(r||void 0===t.rootsHash[e.toNT()])?["["].concat(h(e,t)).concat(["]"]):d(e,t)}function a(e,t){var r,n;switch(e.termType){case"formula":return n=["{"],n=n.concat(f(e.statements)),n.concat(["}"]);case"collection":for(n=["("],r=0;r<e.elements.length;r++)n.push([p(e.elements[r],t)]);return n.push(")"),n;default:return this.atomicTermToN3(e)}}function s(){var e="";this.defaultNamespace&&(e+="@prefix : <"+this.defaultNamespace+">.\n");for(var t in this.prefixes)this.prefixes.hasOwnProperty(t)&&this.namespacesUsed[t]&&(e+="@prefix "+this.prefixes[t]+": "+this.explicitURI(t)+".\n");return e+"\n"}var u={};this.flags.indexOf("s")<0&&(u["http://www.w3.org/2002/07/owl#sameAs"]="="),this.flags.indexOf("t")<0&&(u["http://www.w3.org/1999/02/22-rdf-syntax-ns#type"]="a"),this.flags.indexOf("i")<0&&(u["http://www.w3.org/2000/10/swap/log#implies"]="=>");var c=function(e){for(var t="",r=0;r<e;r++)t+=" ";return t},l=function e(t){for(var r="",n=0;n<t.length;n++){var i=t[n],o="string"==typeof i?i:e(i);0!==n&&","!==o&&";"!==o&&(r+=" "),r+=o}return r},f=t.bind(this),h=i.bind(this),p=o.bind(this);r.prototype.termToN3=d;var d=a.bind(this),v=s.bind(this),y=f(e);return v()+function e(t,r){var n="",i=1e5;r||(r=0);for(var o=0;o<t.length;o++){var a=t[o];if("string"!=typeof a){var s=e(a,r+1);if(s.length<10*(80-4*r)&&s.indexOf('"""')<0){var u=l(a);u.length<80-4*r&&(a="   "+u,s="")}s&&(i=1e4),n+=s}if("string"==typeof a){if(1===a.length&&"\n"===n.slice(-1)){if(",.;".indexOf(a)>=0){n=n.slice(0,-1)+a+"\n",i+=1;continue}if("])}".indexOf(a)>=0){n=n.slice(0,-1)+" "+a+"\n",i+=2;continue}}if(i<4*r+4)n=n.slice(0,-1)+" "+a+"\n",i+=a.length+1;else{var f=c(4*r)+a;n+=f+"\n",i=f.length}}}return n}(y,-1)},r.prototype.atomicTermToN3=function(e,t){switch(e.termType){case"BlankNode":case"Variable":return e.toNT();case"Literal":if(e.datatype&&this.flags.indexOf("x")<0)switch(e.datatype.uri){case"http://www.w3.org/2001/XMLSchema#integer":return e.value.toString();case"http://www.w3.org/2001/XMLSchema#boolean":return e.value?"true":"false"}var r=this.stringToN3(e.value);return e.language?r+="@"+e.language:e.datatype.equals(s.string)||(r+="^^"+this.atomicTermToN3(e.datatype,t)),r;case"NamedNode":return this.symbolToN3(e);default:throw new Error("Internal: atomicTermToN3 cannot handle "+e+" of termType: "+e.termType)}},r.prototype.validPrefix=new RegExp(/^[a-zA-Z][a-zA-Z0-9]*$/),r.prototype.forbidden1=new RegExp(/[\\"\b\f\r\v\t\n\u0080-\uffff]/gm),r.prototype.forbidden3=new RegExp(/[\\"\b\f\r\v\u0080-\uffff]/gm),r.prototype.stringToN3=function(e,t){t||(t="e");var n,i,o,a,s,u="";for(e.length>20&&'"'!==e.slice(-1)&&t.indexOf("n")<0&&(e.indexOf("\n")>0||e.indexOf('"')>0)?(a='"""',s=r.prototype.forbidden3):(a='"',s=r.prototype.forbidden1),n=0;n<e.length;){s.lastIndex=0;if(null==s.exec(e.slice(n)))break;i=n+s.lastIndex-1,u+=e.slice(n,i);var c=e[i];'"'===c&&'"""'===a&&'"""'!==e.slice(i,i+3)?u+=c:(o='\b\f\r\t\v\n\\"'.indexOf(c),o>=0?u+="\\"+'bfrtvn\\"'[o]:t.indexOf("e")>=0?u+="\\u"+("000"+c.charCodeAt(0).toString(16).toLowerCase()).slice(-4):u+=c),n=i+1}return a+u+e.slice(n)+a},r.prototype.symbolToN3=function(e){var t=e.uri,n=t.indexOf("#");if(n<0&&this.flags.indexOf("/")<0&&(n=t.lastIndexOf("/")),n>=0&&this.flags.indexOf("p")<0&&(0===t.indexOf("http")||0===t.indexOf("ws")||0===t.indexOf("file"))){for(var i=!0,o=n+1;o<t.length;o++)if(r.prototype._notNameChars.indexOf(t[o])>=0){i=!1;break}if(t.slice(0,n+1)===this.base+"#")return"<#"+t.slice(n+1)+">";if(i){var a=t.slice(n+1),s=t.slice(0,n+1);if(this.defaultNamespace&&this.defaultNamespace===s&&this.flags.indexOf("d")<0)return this.flags.indexOf("k")>=0&&this.keyords.indexOf(a)<0?a:":"+a;this.checkIntegrity();var u=this.prefixes[s];if(u||(u=this.makeUpPrefix(s)),u)return this.namespacesUsed[s]=!0,u+":"+a}}return this.explicitURI(t)},r.prototype.writeStore=function(e){var t=this.store,r=t.fetcher,n=r&&r.appNode,i=this.store.index[3];for(var o in i){var a=t.fromNT(o);n&&a.sameTerm(n)||e("\n"+this.atomicTermToN3(a)+" "+this.atomicTermToN3(t.sym("http://www.w3.org/2000/10/swap/log#semantics"))+" { "+this.statementsToN3(t.statementsMatching(void 0,void 0,void 0,a))+" }.\n")}t.statementsMatching(void 0,t.sym("http://www.w3.org/2007/ont/link#requestedURI")).map(function(r){e("\n<"+r.object.value+"> log:metadata {\n");var n=t.statementsMatching(void 0,void 0,void 0,r.subject);e(this.statementsToN3(this.statementsToN3(n))),e("}.\n")});var s=[];n&&s.push(n);var u=[];s.map(function(e){u=u.concat(t.statementsMatching(void 0,void 0,void 0,e))}),e(this.statementsToN3(u))},r.prototype.statementsToXML=function(e){function t(e){this.suggestPrefix("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#");for(var t=this.rootSubjects(e),r=t.roots,n=[],i=0;i<r.length;i++){var o=r[i];n.push(m(o,t))}return n}function i(e){return void 0===e?"@@@undefined@@@@":e.replace(/[&<"]/g,function(e){switch(e[0]){case"&":return"&amp;";case"<":return"&lt;";case'"':return"&quot;"}})}function o(e){return i(this.base?a.uri.refTo(this.base,e.uri):e.uri)}function u(e,t){var r,o,a,u,l=[],f=t.subjects[this.toStr(e)];if(void 0===f)throw new Error("Serializing XML - Cant find statements for "+e);f.sort(function(e,t){var r=e.predicate.uri,n=t.predicate.uri;if(r.substring(0,p.length)===p||n.substring(0,p.length)===p)return r.localeCompare(n);var i=r.substring(p.length),o=n.substring(p.length),a=parseInt(i,10),s=parseInt(o,10);return isNaN(a)||isNaN(s)||a!==i||s!==o?r.localeCompare(n):a-s});for(var h=0;h<f.length;h++)if(a=f[h],"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"!==a.predicate.uri||r||"symbol"!==a.object.termType){if(u=a.predicate,u.uri.substr(0,p.length)===p){var d=u.uri.substr(p.length),v=parseInt(d,10);d===v.toString()&&(u=new n("http://www.w3.org/1999/02/22-rdf-syntax-ns#li"))}switch(o=w(u),a.object.termType){case"BlankNode":l=1===t.incoming[a.object].length?l.concat(["<"+o+">",m(a.object,t),"</"+o+">"]):l.concat(["<"+o+' rdf:nodeID="'+a.object.toNT().slice(2)+'"/>']);break;case"NamedNode":l=l.concat(["<"+o+' rdf:resource="'+g(a.object)+'"/>']);break;case"Literal":l=l.concat(["<"+o+(a.object.datatype.equals(s.string)?"":' rdf:datatype="'+i(a.object.datatype.uri)+'"')+(a.object.language?' xml:lang="'+a.object.language+'"':"")+">"+i(a.object.value)+"</"+o+">"]);break;case"collection":l=l.concat(["<"+o+' rdf:parseType="Collection">',c(a.object,t),"</"+o+">"]);break;default:throw new Error("Can't serialize object of type "+a.object.termType+" into XML")}}else r=a.object;var y=r?w(r):"rdf:Description",b="";return"BlankNode"===e.termType?t.incoming[e]&&1===t.incoming[e].length||(b=' rdf:nodeID="'+e.toNT().slice(2)+'"'):b=' rdf:about="'+g(e)+'"',["<"+y+b+">"].concat([l]).concat(["</"+y+">"])}function c(e,t){for(var r=[],n=0;n<e.elements.length;n++)r.push(m(e.elements[n],t));return r}function l(e,t){var r=[],n=t.subjects[this.toStr(e)];if(!n)return r;n.sort();for(var o=0;o<n.length;o++){var a=n[o];switch(a.object.termType){case"BlankNode":r=t.rootsHash[a.object.toNT()]?r.concat(["<"+w(a.predicate)+' rdf:nodeID="'+a.object.toNT().slice(2)+'">',"</"+w(a.predicate)+">"]):r.concat(["<"+w(a.predicate)+' rdf:parseType="Resource">',b(a.object,t),"</"+w(a.predicate)+">"]);break;case"NamedNode":r=r.concat(["<"+w(a.predicate)+' rdf:resource="'+g(a.object)+'"/>']);break;case"Literal":r=r.concat(["<"+w(a.predicate)+(a.object.datatype.equals(s.string)?"":' rdf:datatype="'+i(a.object.datatype.value)+'"')+(a.object.language?' xml:lang="'+a.object.language+'"':"")+">"+i(a.object.value)+"</"+w(a.predicate)+">"]);break;case"collection":r=r.concat(["<"+w(a.predicate)+' rdf:parseType="Collection">',c(a.object,t),"</"+w(a.predicate)+">"]);break;default:throw new Error("Can't serialize object of type "+a.object.termType+" into XML")}}return r}function f(e){var t=e.uri,n=t.indexOf("#");if(n<0&&this.flags.indexOf("/")<0&&(n=t.lastIndexOf("/")),n<0)throw new Error("Cannot make qname out of <"+t+">");for(var i=n+1;i<t.length;i++)if(r.prototype._notNameChars.indexOf(t[i])>=0)throw new Error('Invalid character "'+t[i]+'" cannot be in XML qname for URI: '+t);var o=t.slice(n+1),a=t.slice(0,n+1);if(this.defaultNamespace&&this.defaultNamespace===a&&this.flags.indexOf("d")<0)return o;var s=this.prefixes[a];return s||(s=this.makeUpPrefix(a)),h[a]=!0,s+":"+o}var h=[];h["http://www.w3.org/1999/02/22-rdf-syntax-ns#"]=!0;var p="http://www.w3.org/1999/02/22-rdf-syntax-ns#_",d=function(e){for(var t="",r=0;r<e;r++)t+=" ";return t},v=function e(t){for(var r="",n=0;n<t.length;n++){var i=t[n];r+="string"==typeof i?i:e(i)}return r},y=t.bind(this),g=o.bind(this),m=u.bind(this),b=l.bind(this),w=f.bind(this),_=y(e),x="<rdf:RDF";this.defaultNamespace&&(x+=' xmlns="'+i(this.defaultNamespace)+'"');for(var k in h)h.hasOwnProperty(k)&&(x+="\n xmlns:"+this.prefixes[k]+'="'+i(k)+'"');x+=">";var T=[x,_,"</rdf:RDF>"];return function e(t,r){var n,i="",o=1e5;r||(r=0);for(var a=0;a<t.length;a++){var s=t[a];if("string"!=typeof s){var u=e(s,r+1);u.length<10*(80-4*r)&&u.indexOf('"""')<0&&(n=v(s),n.length<80-4*r&&(s="   "+n,u="")),u&&(o=1e4),i+=u}"string"==typeof s&&(o<4*r+4?(i=i.slice(0,-1)+" "+s+"\n",o+=s.length+1):(n=d(4*r)+s,i+=n+"\n",o=n.length))}return i}(T,-1)},function(e){return new r(e)}}();e.exports=u},function(e,t,r){"use strict";function n(e){this.afterTransform=function(t,r){return i(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function i(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!==r&&void 0!==r&&e.push(r),i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function o(e){if(!(this instanceof o))return new o(e);s.call(this,e),this._transformState=new n(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,r){a(t,e,r)}):a(t)})}function a(e,t,r){if(t)return e.emit("error",t);null!==r&&void 0!==r&&e.push(r);var n=e._writableState,i=e._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}e.exports=o;var s=r(25),u=r(38);u.inherits=r(19),u.inherits(o,s),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},o.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},function(e,t,r){"use strict";(function(t,n){function i(){}function o(e,t,r){this.chunk=e,this.encoding=t,this.callback=r,this.next=null}function a(e,t){T=T||r(25),e=e||{},this.objectMode=!!e.objectMode,t instanceof T&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=e.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){v(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new k(this)}function s(e){if(T=T||r(25),!(C.call(s,this)||this instanceof T))return new s(e);this._writableState=new a(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev)),I.call(this)}function u(e,t){var r=new Error("write after end");e.emit("error",r),E(t,r)}function c(e,t,r,n){var i=!0,o=!1;return null===r?o=new TypeError("May not write null values to stream"):"string"==typeof r||void 0===r||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),E(n,o),i=!1),i}function l(e,t,r){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=j.from(t,r)),t}function f(e,t,r,n,i,a){r||(n=l(t,n,i),R.isBuffer(n)&&(i="buffer"));var s=t.objectMode?1:n.length;t.length+=s;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var c=t.lastBufferedRequest;t.lastBufferedRequest=new o(n,i,a),c?c.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else h(e,t,!1,s,n,i,a);return u}function h(e,t,r,n,i,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function p(e,t,r,n,i){--t.pendingcb,r?E(i,n):i(n),e._writableState.errorEmitted=!0,e.emit("error",n)}function d(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function v(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(d(r),t)p(e,r,n,t,i);else{var o=b(r);o||r.corked||r.bufferProcessing||!r.bufferedRequest||m(e,r),n?S(y,e,r,o,i):y(e,r,o,i)}}function y(e,t,r,n){r||g(e,t),t.pendingcb--,n(),_(e,t)}function g(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function m(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var a=0;r;)i[a]=r,r=r.next,a+=1;h(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new k(t)}else{for(;r;){var s=r.chunk,u=r.encoding,c=r.callback;if(h(e,t,!1,t.objectMode?1:s.length,s,u,c),r=r.next,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}function b(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function w(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function _(e,t){var r=b(t);return r&&(0===t.pendingcb?(w(e,t),t.finished=!0,e.emit("finish")):w(e,t)),r}function x(e,t,r){t.ending=!0,_(e,t),r&&(t.finished?E(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function k(e){var t=this;this.next=null,this.entry=null,this.finish=function(r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}e.exports=s;var T,E=r(91),S=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?n:E;s.WritableState=a;var N=r(38);N.inherits=r(19);var I,O={deprecate:r(258)};!function(){try{I=r(41)}catch(e){}finally{I||(I=r(54).EventEmitter)}}();var R=r(10).Buffer,j=r(67);N.inherits(s,I),a.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(a.prototype,"buffer",{get:O.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(e){}}();var C;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(C=Function.prototype[Symbol.hasInstance],Object.defineProperty(s,Symbol.hasInstance,{value:function(e){return!!C.call(this,e)||e&&e._writableState instanceof a}})):C=function(e){return e instanceof this},s.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},s.prototype.write=function(e,t,r){var n=this._writableState,o=!1,a=R.isBuffer(e);return"function"==typeof t&&(r=t,t=null),a?t="buffer":t||(t=n.defaultEncoding),"function"!=typeof r&&(r=i),n.ended?u(this,r):(a||c(this,n,e,r))&&(n.pendingcb++,o=f(this,n,a,e,t,r)),o},s.prototype.cork=function(){this._writableState.corked++},s.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||m(this,e))},s.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},s.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},s.prototype._writev=null,s.prototype.end=function(e,t,r){var n=this._writableState;"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||n.finished||x(this,n,r)}}).call(t,r(4),r(42).setImmediate)},function(e,t,r){(function(n){var i=function(){try{return r(41)}catch(e){}}();t=e.exports=r(141),t.Stream=i||t,t.Readable=t,t.Writable=r(99),t.Duplex=r(25),t.Transform=r(98),t.PassThrough=r(140),!n.browser&&"disable"===n.env.READABLE_STREAM&&i&&(e.exports=i)}).call(t,r(4))},function(e,t,r){"use strict";function n(e,t,r){t.statementsMatching(u).forEach(function(t){e.add(t.subject,t.predicate,t.object,t.why)})}function i(e,t){var r=e.graph();return t.forEach(function(e){r.addStatement(e)}),r}function o(e,t,r,n){var i=e.graph();return e.parse(r,i,t,n),i}function a(e,t,r,n,i){var o={};return e.statementsMatching(t,r,n,i).forEach(function(e){o[e.object.uri]=!0}),Object.keys(o)}function s(e){var t=e.map(function(e){return e.toNT()});return t=t.join("\n")}e.exports.appendGraph=n,e.exports.parseGraph=o,e.exports.parseLinks=a,e.exports.serializeStatements=s,e.exports.graphFromStatements=i;var u=null},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(33),o=n(i),a=r(45),s=n(a),u=r(44),c=n(u),l=r(14),f=n(l),h=r(32),p=n(h),d=r(66),v=n(d),y=r(65),g=n(y),m=r(154),b=n(m),w=r(104),_=r(61),x=function(e){function t(e){(0,f.default)(this,t);var r=(0,v.default)(this,(t.__proto__||(0,c.default)(t)).call(this));return r.store=e,r}return(0,g.default)(t,e),(0,p.default)(t,[{key:"getObjects",value:function(){function e(e,r){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(t,r){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,_.nodeSet)(this.store.match((0,w.toRdflibNode)(t),(0,w.toRdflibNode)(r)).map(function(e){return e.object})));case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"getSubjects",value:function(){function e(e,r,n){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(t,r,n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,_.nodeSet)(this.store.statementsMatching(null,(0,w.toRdflibNode)(t),(0,w.toRdflibNode)(r),n?(0,w.toRdflibNode)(n):null).map(function(e){return e.subject})));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"getNodesByValue",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(t){var r,n,i;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,w.toRdflibNode)(t),n=this.store.match(r).map(function(e){return e.subject}),i=this.store.match(null,null,r).map(function(e){return e.object}),e.abrupt("return",(0,_.nodeSet)(n.concat(i)));case 4:case"end":return e.stop()}},e,this)}));return e}()}]),t}(b.default);t.default=x},function(e,t,r){"use strict";function n(e){if(e instanceof i.Node)return e;if(e instanceof o.Node)switch(e.get("termType")){case"NamedNode":return i.NamedNode.fromValue(e.get("value"));case"Literal":default:return i.Literal.fromValue(e.get("value"))}throw new Error("Cannot convert from unknown type "+e+" to RDF node")}Object.defineProperty(t,"__esModule",{value:!0}),t.toRdflibNode=n;var i=r(93),o=(r(105),r(61))},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.stringLiteralNode=t.nameNode=t.prefixedUriNode=t.uriNode=t.intermediateSelectorNode=t.leafSelectorNode=t.traversalNode=t.intermediateMatchNode=t.leafMatchNode=t.emptyNodeSpecifierNode=t.matchingNodeSpecifierNode=t.contextSensitiveQueryNode=t.prefixNode=t.queryNode=t.AST=void 0;var i=r(107),o=n(i),a=r(166),s=n(a),u=r(14),c=n(u),l=t.AST=function e(t){var r=t.type,n=(0,s.default)(t,["type"]);if((0,c.default)(this,e),!r)throw new Error("Must provide a `type` when constructing a AST");this.type=r,(0,o.default)(this,n)};t.queryNode=function(e){var t=e.prefixList,r=e.context,n=e.contextSensitiveQuery;return new l({type:"query",prefixList:t,context:r,contextSensitiveQuery:n})},t.prefixNode=function(e){var t=e.name,r=e.uri;return new l({type:"prefixNode",name:t,uri:r})},t.contextSensitiveQueryNode=function(e){var t=e.nodeSpecifier,r=e.traversal;return new l({type:"contextSensitiveQuery",nodeSpecifier:t,traversal:r})},t.matchingNodeSpecifierNode=function(e){var t=e.contextType,r=e.matchList;return new l({type:"matchingNodeSpecifier",contextType:t,matchList:r})},t.emptyNodeSpecifierNode=function(){return new l({type:"emptyNodeSpecifier"})},t.leafMatchNode=function(e){var t=e.predicate,r=e.value;return new l({type:"leafMatch",predicate:t,value:r})},t.intermediateMatchNode=function(e){var t=e.predicate,r=e.nodeSpecifier;return new l({type:"intermediateMatch",predicate:t,nodeSpecifier:r})},t.traversalNode=function(e){var t=e.selectorList;return new l({type:"traversalNode",selectorList:t})},t.leafSelectorNode=function(e){var t=e.predicate;return new l({type:"leafSelector",predicate:t})},t.intermediateSelectorNode=function(e){var t=e.predicate,r=e.contextSensitiveQuery;return new l({type:"intermediateSelector",predicate:t,contextSensitiveQuery:r})},t.uriNode=function(e){var t=e.value;return new l({type:"uri",value:t})},t.prefixedUriNode=function(e){var t=e.prefix,r=e.path;return new l({type:"prefixedUri",prefix:t,path:r})},t.nameNode=function(e){var t=e.value;return new l({type:"name",value:t})},t.stringLiteralNode=function(e){var t=e.value;return new l({type:"stringLiteral",value:t})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Token=t.PREFIXED_URI_REGEX=t.NAME_REGEX=t.symbols=t.keywords=t.tokenTypes=void 0;var n=r(14),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=t.tokenTypes={URI:"URI",PREFIXED_URI:"PREFIXED_URI",NAME:"NAME",LPAREN:"LPAREN",RPAREN:"RPAREN",LBRACE:"LBRACE",RBRACE:"RBRACE",STRLIT:"STRLIT",ON:"ON",DEL:"DEL",INS:"INS",ARROW:"ARROW",PREFIX:"PREFIX",EOF:"EOF"};t.keywords={"-":o.DEL,"+":o.INS,"=>":o.ARROW,"@prefix":o.PREFIX},t.symbols={"(":o.LPAREN,")":o.RPAREN,"{":o.LBRACE,"}":o.RBRACE},t.NAME_REGEX=/^[a-zA-Z]+[a-zA-Z0-9_-]*$/,t.PREFIXED_URI_REGEX=/^([a-zA-Z]+[a-zA-Z0-9_-]*)\.(.+)$/,t.Token=function e(t,r,n,o){(0,i.default)(this,e),this.type=t,this.value=r,this.line=n,this.column=o}},function(e,t,r){e.exports={default:r(173),__esModule:!0}},function(e,t,r){e.exports={default:r(175),__esModule:!0}},function(e,t,r){e.exports={default:r(180),__esModule:!0}},function(e,t,r){"use strict";t.__esModule=!0;var n=r(108),i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e,t,r){return t in e?(0,i.default)(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t,r){"use strict";t.__esModule=!0;var n=r(107),i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=i.default||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=r(159),o=n(i),a=r(62),s=n(a);t.default=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=(0,s.default)(e);!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if((0,o.default)(Object(t)))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=r(164),o=n(i),a=r(163),s=n(a),u="function"==typeof s.default&&"symbol"==typeof o.default?function(e){return typeof e}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};t.default="function"==typeof s.default&&"symbol"===u(o.default)?function(e){return void 0===e?"undefined":u(e)}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":void 0===e?"undefined":u(e)}},function(e,t,r){e.exports=r(3).document&&document.documentElement},function(e,t,r){e.exports=!r(11)&&!r(20)(function(){return 7!=Object.defineProperty(r(70)("div"),"a",{get:function(){return 7}}).a})},function(e,t,r){var n=r(26),i=r(1)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||o[i]===e)}},function(e,t,r){var n=r(34);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,r){var n=r(12);e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){var o=e.return;throw void 0!==o&&n(o.call(e)),t}}},function(e,t,r){var n=r(1)("iterator"),i=!1;try{var o=[7][n]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var o=[7],a=o[n]();a.next=function(){return{done:r=!0}},o[n]=function(){return a},e(o)}catch(e){}return r}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,r){var n=r(123),i=r(71).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},function(e,t,r){var n=r(21),i=r(28),o=r(79)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),n(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,r){var n=r(21),i=r(18),o=r(186)(!1),a=r(79)("IE_PROTO");e.exports=function(e,t){var r,s=i(e),u=0,c=[];for(r in s)r!=a&&n(s,r)&&c.push(r);for(;t.length>u;)n(s,r=t[u++])&&(~o(c,r)||c.push(r));return c}},function(e,t,r){e.exports=r(16)},function(e,t,r){"use strict";var n=r(3),i=r(0),o=r(9),a=r(11),s=r(1)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:n[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,r){var n,i,o,a=r(15),s=r(195),u=r(114),c=r(70),l=r(3),f=l.process,h=l.setImmediate,p=l.clearImmediate,d=l.MessageChannel,v=0,y={},g=function(){var e=+this;if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},m=function(e){g.call(e.data)};h&&p||(h=function(e){for(var t=[],r=1;arguments.length>r;)t.push(arguments[r++]);return y[++v]=function(){s("function"==typeof e?e:Function(e),t)},n(v),v},p=function(e){delete y[e]},"process"==r(34)(f)?n=function(e){f.nextTick(a(g,e,1))}:d?(i=new d,o=i.port2,i.port1.onmessage=m,n=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(n=function(e){l.postMessage(e+"","*")},l.addEventListener("message",m,!1)):n="onreadystatechange"in c("script")?function(e){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),g.call(e)}}:function(e){setTimeout(a(g,e,1),0)}),e.exports={set:h,clear:p}},function(e,t,r){(function(n,i,o){var a;/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
 * @version   2.3.0
 */
(function(){"use strict";function s(e){return"function"==typeof e||"object"==typeof e&&null!==e}function u(e){return"function"==typeof e}function c(e){return"object"==typeof e&&null!==e}function l(e){X=e}function f(e){J=e}function h(){return function(){H(d)}}function p(){return function(){setTimeout(d,1)}}function d(){for(var e=0;e<G;e+=2){(0,ee[e])(ee[e+1]),ee[e]=void 0,ee[e+1]=void 0}G=0}function v(){}function y(){return new TypeError("You cannot resolve a promise with itself")}function g(){return new TypeError("A promises callback cannot return that same promise.")}function m(e){try{return e.then}catch(e){return ie.error=e,ie}}function b(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}function w(e,t,r){J(function(e){var n=!1,i=b(r,t,function(r){n||(n=!0,t!==r?k(e,r):E(e,r))},function(t){n||(n=!0,S(e,t))},"Settle: "+(e._label||" unknown promise"));!n&&i&&(n=!0,S(e,i))},e)}function _(e,t){t._state===re?E(e,t._result):t._state===ne?S(e,t._result):N(t,void 0,function(t){k(e,t)},function(t){S(e,t)})}function x(e,t){if(t.constructor===e.constructor)_(e,t);else{var r=m(t);r===ie?S(e,ie.error):void 0===r?E(e,t):u(r)?w(e,t,r):E(e,t)}}function k(e,t){e===t?S(e,y()):s(t)?x(e,t):E(e,t)}function T(e){e._onerror&&e._onerror(e._result),I(e)}function E(e,t){e._state===te&&(e._result=t,e._state=re,0!==e._subscribers.length&&J(I,e))}function S(e,t){e._state===te&&(e._state=ne,e._result=t,J(T,e))}function N(e,t,r,n){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+re]=r,i[o+ne]=n,0===o&&e._state&&J(I,e)}function I(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n,i,o=e._result,a=0;a<t.length;a+=3)n=t[a],i=t[a+r],n?j(r,n,i,o):i(o);e._subscribers.length=0}}function O(){this.error=null}function R(e,t){try{return e(t)}catch(e){return oe.error=e,oe}}function j(e,t,r,n){var i,o,a,s,c=u(r);if(c){if(i=R(r,n),i===oe?(s=!0,o=i.error,i=null):a=!0,t===i)return void S(t,g())}else i=n,a=!0;t._state!==te||(c&&a?k(t,i):s?S(t,o):e===re?E(t,i):e===ne&&S(t,i))}function C(e,t){try{t(function(t){k(e,t)},function(t){S(e,t)})}catch(t){S(e,t)}}function A(e,t){var r=this;r._instanceConstructor=e,r.promise=new e(v),r._validateInput(t)?(r._input=t,r.length=t.length,r._remaining=t.length,r._init(),0===r.length?E(r.promise,r._result):(r.length=r.length||0,r._enumerate(),0===r._remaining&&E(r.promise,r._result))):S(r.promise,r._validationError())}function L(e){return new ae(this,e).promise}function D(e){function t(e){k(i,e)}function r(e){S(i,e)}var n=this,i=new n(v);if(!W(e))return S(i,new TypeError("You must pass an array to race.")),i;for(var o=e.length,a=0;i._state===te&&a<o;a++)N(n.resolve(e[a]),void 0,t,r);return i}function M(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var r=new t(v);return k(r,e),r}function U(e){var t=this,r=new t(v);return S(r,e),r}function P(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function q(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function F(e){this._id=fe++,this._state=void 0,this._result=void 0,this._subscribers=[],v!==e&&(u(e)||P(),this instanceof F||q(),C(this,e))}function z(){var e;if(void 0!==o)e=o;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;t&&"[object Promise]"===Object.prototype.toString.call(t.resolve())&&!t.cast||(e.Promise=he)}var B;B=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var H,X,V,W=B,G=0,J=({}.toString,function(e,t){ee[G]=e,ee[G+1]=t,2===(G+=2)&&(X?X(d):V())}),Q="undefined"!=typeof window?window:void 0,$=Q||{},Y=$.MutationObserver||$.WebKitMutationObserver,K=void 0!==n&&"[object process]"==={}.toString.call(n),Z="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ee=new Array(1e3);V=K?function(){var e=n.nextTick,t=n.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(t)&&"0"===t[1]&&"10"===t[2]&&(e=i),function(){e(d)}}():Y?function(){var e=0,t=new Y(d),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}():Z?function(){var e=new MessageChannel;return e.port1.onmessage=d,function(){e.port2.postMessage(0)}}():void 0===Q?function(){try{var e=r(270);return H=e.runOnLoop||e.runOnContext,h()}catch(e){return p()}}():p();var te=void 0,re=1,ne=2,ie=new O,oe=new O;A.prototype._validateInput=function(e){return W(e)},A.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},A.prototype._init=function(){this._result=new Array(this.length)};var ae=A;A.prototype._enumerate=function(){for(var e=this,t=e.length,r=e.promise,n=e._input,i=0;r._state===te&&i<t;i++)e._eachEntry(n[i],i)},A.prototype._eachEntry=function(e,t){var r=this,n=r._instanceConstructor;c(e)?e.constructor===n&&e._state!==te?(e._onerror=null,r._settledAt(e._state,t,e._result)):r._willSettleAt(n.resolve(e),t):(r._remaining--,r._result[t]=e)},A.prototype._settledAt=function(e,t,r){var n=this,i=n.promise;i._state===te&&(n._remaining--,e===ne?S(i,r):n._result[t]=r),0===n._remaining&&E(i,n._result)},A.prototype._willSettleAt=function(e,t){var r=this;N(e,void 0,function(e){r._settledAt(re,t,e)},function(e){r._settledAt(ne,t,e)})};var se=L,ue=D,ce=M,le=U,fe=0,he=F;F.all=se,F.race=ue,F.resolve=ce,F.reject=le,F._setScheduler=l,F._setAsap=f,F._asap=J,F.prototype={constructor:F,then:function(e,t){var r=this,n=r._state;if(n===re&&!e||n===ne&&!t)return this;var i=new this.constructor(v),o=r._result;if(n){var a=arguments[n-1];J(function(){j(n,i,a,o)})}else N(r,i,e,t);return i},catch:function(e){return this.then(null,e)}};var pe=z,de={Promise:he,polyfill:pe};void 0!==(a=function(){return de}.call(t,r,t,e))&&(e.exports=a),pe()}).call(this)}).call(t,r(4),r(42).setImmediate,r(2))},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){(function(n,i,o,a){var s,u;/**
 * A JavaScript implementation of the JSON-LD API.
 *
 * @author Dave Longley
 *
 * @license BSD 3-Clause License
 * Copyright (c) 2011-2015 Digital Bazaar, Inc.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * Redistributions of source code must retain the above copyright notice,
 * this list of conditions and the following disclaimer.
 *
 * Redistributions in binary form must reproduce the above copyright
 * notice, this list of conditions and the following disclaimer in the
 * documentation and/or other materials provided with the distribution.
 *
 * Neither the name of the Digital Bazaar, Inc. nor the names of its
 * contributors may be used to endorse or promote products derived from
 * this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
 * IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
 * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A
 * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED
 * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
!function(){var c=void 0!==n&&n.versions&&n.versions.node,l=!c&&("undefined"!=typeof window||"undefined"!=typeof self);l&&void 0===i&&("undefined"!=typeof window?i=window:"undefined"!=typeof self?i=self:"undefined"!=typeof $&&(i=$));var f=function(e){function t(){}function s(e){for(var t=[],r=Object.keys(e).sort(),n=0;n<r.length;++n){var i=r[n],o=e[i];z(o)||(o=[o]);for(var a=0;a<o.length;++a){var s=o[a];if(null!==s){if(!H(s))throw new je("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:e});t.push({"@value":s,"@language":i.toLowerCase()})}}}return t}function u(e,t){if(z(t))for(var r=0;r<t.length;++r)t[r]=u(e,t[r]);else if(K(t))t["@list"]=u(e,t["@list"]);else if(q(t)){Z(t)&&(t["@id"]=e.getId(t["@id"]));for(var n=Object.keys(t).sort(),i=0;i<n.length;++i){var o=n[i];"@id"!==o&&(t[o]=u(e,t[o]))}}return t}function f(t,r,n){if(null===n||void 0===n)return null;var i=L(t,r,{vocab:!0});if("@id"===i)return L(t,n,{base:!0});if("@type"===i)return L(t,n,{vocab:!0,base:!0});var o=e.getContextValue(t,r,"@type");if("@id"===o||"@graph"===i&&H(n))return{"@id":L(t,n,{base:!0})};if("@vocab"===o)return{"@id":L(t,n,{vocab:!0,base:!0})};if(P(i))return n;var a={};if(null!==o)a["@type"]=o;else if(H(n)){var s=e.getContextValue(t,r,"@language");null!==s&&(a["@language"]=s)}return["boolean","number","string"].indexOf(typeof n)===-1&&(n=n.toString()),a["@value"]=n,a}function h(e,t,r){for(var n=[],i=Object.keys(e).sort(),o=0;o<i.length;++o)for(var a=i[o],s=e[a],u=Object.keys(s).sort(),c=0;c<u.length;++c){var l=u[c],f=s[l];if("@type"===l)l=Te;else if(P(l))continue;for(var h=0;h<f.length;++h){var v=f[h],y={};if(y.type=0===a.indexOf("_:")?"blank node":"IRI",y.value=a,ee(a)){var g={};if(g.type=0===l.indexOf("_:")?"blank node":"IRI",g.value=l,ee(l)&&("blank node"!==g.type||r.produceGeneralizedRdf))if(K(v))p(v["@list"],t,y,g,n);else{var m=d(v);m&&n.push({subject:y,predicate:g,object:m})}}}}return n}function p(e,t,r,n,i){for(var o={type:"IRI",value:_e},a={type:"IRI",value:xe},s={type:"IRI",value:ke},u=0;u<e.length;++u){var c=e[u],l={type:"blank node",value:t.getId()};i.push({subject:r,predicate:n,object:l}),r=l,n=o;var f=d(c);f&&i.push({subject:r,predicate:n,object:f}),n=a}i.push({subject:r,predicate:n,object:s})}function d(e){var t={};if(Y(e)){t.type="literal";var r=e["@value"],n=e["@type"]||null;G(r)?(t.value=r.toString(),t.datatype=n||ye):V(r)||n===ge?(V(r)||(r=parseFloat(r)),t.value=r.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),t.datatype=n||ge):X(r)?(t.value=r.toFixed(0),t.datatype=n||me):"@language"in e?(t.value=r,t.datatype=n||Ie,t.language=e["@language"]):(t.value=r,t.datatype=n||be)}else{var i=q(e)?e["@id"]:e;t.type=0===i.indexOf("_:")?"blank node":"IRI",t.value=i}return"IRI"!==t.type||ee(t.value)?t:null}function v(e,t){if("IRI"===e.type||"blank node"===e.type)return{"@id":e.value};var r={"@value":e.value};if(e.language)r["@language"]=e.language;else{var n=e.datatype;if(n||(n=be),t){if(n===ye)"true"===r["@value"]?r["@value"]=!0:"false"===r["@value"]&&(r["@value"]=!1);else if(W(r["@value"]))if(n===me){var i=parseInt(r["@value"],10);i.toFixed(0)===r["@value"]&&(r["@value"]=i)}else n===ge&&(r["@value"]=parseFloat(r["@value"]));[ye,me,ge,be].indexOf(n)===-1&&(r["@type"]=n)}else n!==be&&(r["@type"]=n)}return r}function y(e,t){for(var r=["subject","predicate","object"],n=0;n<r.length;++n){var i=r[n];if(e[i].type!==t[i].type||e[i].value!==t[i].value)return!1}return e.object.language===t.object.language&&e.object.datatype===t.object.datatype}function g(t,r,n,i,o,a){if(z(t))for(var s=0;s<t.length;++s)g(t[s],r,n,i,void 0,a);else{if(!q(t))return void(a&&a.push(t));if(Y(t)){if("@type"in t){var u=t["@type"];0===u.indexOf("_:")&&(t["@type"]=u=i.getId(u))}return void(a&&a.push(t))}if("@type"in t)for(var c=t["@type"],s=0;s<c.length;++s){var u=c[s];0===u.indexOf("_:")&&i.getId(u)}J(o)&&(o=Z(t)?i.getId(t["@id"]):t["@id"]),a&&a.push({"@id":o});var l=r[n],f=l[o]=l[o]||{};f["@id"]=o;for(var h=Object.keys(t).sort(),p=0;p<h.length;++p){var d=h[p];if("@id"!==d)if("@reverse"!==d)if("@graph"!==d)if("@type"!==d&&P(d)){if("@index"===d&&d in f&&(t[d]!==f[d]||t[d]["@id"]!==f[d]["@id"]))throw new je("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:f});f[d]=t[d]}else{var v=t[d];if(0===d.indexOf("_:")&&(d=i.getId(d)),0!==v.length)for(var y=0;y<v.length;++y){var m=v[y];if("@type"===d&&(m=0===m.indexOf("_:")?i.getId(m):m),Q(m)||$(m)){var b=Z(m)?i.getId(m["@id"]):m["@id"];e.addValue(f,d,{"@id":b},{propertyIsArray:!0,allowDuplicate:!1}),g(m,r,n,i,b)}else if(K(m)){var w=[];g(m["@list"],r,n,i,o,w),m={"@list":w},e.addValue(f,d,m,{propertyIsArray:!0,allowDuplicate:!1})}else g(m,r,n,i,o),e.addValue(f,d,m,{propertyIsArray:!0,allowDuplicate:!1})}else e.addValue(f,d,[],{propertyIsArray:!0})}else{o in r||(r[o]={});var _="@merged"===n?n:o;g(t[d],r,_,i)}else{var x={"@id":o},k=t["@reverse"];for(var T in k)for(var E=k[T],S=0;S<E.length;++S){var N=E[S],I=N["@id"];Z(N)&&(I=i.getId(I)),g(N,r,n,i,I),e.addValue(l[I],T,x,{propertyIsArray:!0,allowDuplicate:!1})}}}}}function m(e){for(var t=e["@default"],r=Object.keys(e).sort(),n=0;n<r.length;++n){var i=r[n];if("@default"!==i){var o=e[i],a=t[i];a?"@graph"in a||(a["@graph"]=[]):t[i]=a={"@id":i,"@graph":[]};for(var s=a["@graph"],u=Object.keys(o).sort(),c=0;c<u.length;++c){var l=o[u[c]];$(l)||s.push(l)}}}return t}function b(e,t,r,n,i){k(r),r=r[0];for(var o=e.options,a={embed:x(r,o,"embed"),explicit:x(r,o,"explicit"),requireAll:x(r,o,"requireAll")},s=T(e,t,r,a),u=Object.keys(s).sort(),c=0;c<u.length;++c){var l=u[c],f=s[l];if("@link"===a.embed&&l in e.link)N(n,i,e.link[l]);else{null===i&&(e.uniqueEmbeds={});var h={};if(h["@id"]=l,e.link[l]=h,"@never"===a.embed||_(f,e.subjectStack))N(n,i,h);else{"@last"===a.embed&&(l in e.uniqueEmbeds&&S(e,l),e.uniqueEmbeds[l]={parent:n,property:i}),e.subjectStack.push(f);for(var p=Object.keys(f).sort(),d=0;d<p.length;d++){var v=p[d];if(P(v))h[v]=te(f[v]);else if(!a.explicit||v in r)for(var y=f[v],g=0;g<y.length;++g){var m=y[g];if(K(m)){var E={"@list":[]};N(h,v,E);var I=m["@list"];for(var O in I)if(m=I[O],$(m)){var R=v in r?r[v][0]["@list"]:w(a);b(e,[m["@id"]],R,E,"@list")}else N(E,"@list",te(m))}else if($(m)){var R=v in r?r[v]:w(a);b(e,[m["@id"]],R,h,v)}else N(h,v,te(m))}}for(var p=Object.keys(r).sort(),d=0;d<p.length;++d){var v=p[d];if(!P(v)){var j=r[v][0];if(!(x(j,o,"omitDefault")||v in h)){var C="@null";"@default"in j&&(C=te(j["@default"])),z(C)||(C=[C]),h[v]=[{"@preserve":C}]}}}N(n,i,h),e.subjectStack.pop()}}}}function w(e){var t={};for(var r in e)void 0!==e[r]&&(t["@"+r]=[e[r]]);return[t]}function _(e,t){for(var r=t.length-1;r>=0;--r)if(t[r]["@id"]===e["@id"])return!0;return!1}function x(e,t,r){var n="@"+r,i=n in e?e[n][0]:t[r];return"embed"===r&&(i===!0?i="@last":i===!1?i="@never":"@always"!==i&&"@never"!==i&&"@link"!==i&&(i="@last")),i}function k(e){if(!z(e)||1!==e.length||!q(e[0]))throw new je("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:e})}function T(e,t,r,n){for(var i={},o=0;o<t.length;++o){var a=t[o],s=e.subjects[a];E(s,r,n)&&(i[a]=s)}return i}function E(t,r,n){if("@type"in r&&(1!==r["@type"].length||!q(r["@type"][0]))){for(var i=r["@type"],o=0;o<i.length;++o)if(e.hasValue(t,"@type",i[o]))return!0;return!1}var a=!0,s=!1;for(var u in r){if(P(u)){if("@id"!==u&&"@type"!==u)continue;if(a=!1,"@id"===u&&H(r[u])){if(t[u]!==r[u])return!1;s=!0;continue}}if(a=!1,u in t){if(z(r[u])&&0===r[u].length&&void 0!==t[u])return!1;s=!0}else{var c=z(r[u])&&q(r[u][0])&&"@default"in r[u][0];if(n.requireAll&&!c)return!1}}return a||s}function S(t,r){var n=t.uniqueEmbeds,i=n[r],o=i.parent,a=i.property,s={"@id":r};if(z(o)){for(var u=0;u<o.length;++u)if(e.compareValues(o[u],s)){o[u]=s;break}}else{var c=z(o[a]);e.removeValue(o,a,s,{propertyIsArray:c}),e.addValue(o,a,s,{propertyIsArray:c})}var l=function(e){for(var t=Object.keys(n),r=0;r<t.length;++r){var i=t[r];i in n&&q(n[i].parent)&&n[i].parent["@id"]===e&&(delete n[i],l(i))}};l(r)}function N(t,r,n){q(t)?e.addValue(t,r,n,{propertyIsArray:!0}):t.push(n)}/**
 * Removes the @preserve keywords as the last step of the framing algorithm.
 *
 * @param ctx the active context used to compact the input.
 * @param input the framed, compacted output.
 * @param options the compaction options used.
 *
 * @return the resulting output.
 */
function I(t,r,n){if(z(r)){for(var i=[],o=0;o<r.length;++o){var a=I(t,r[o],n);null!==a&&i.push(a)}r=i}else if(q(r)){
// remove @preserve
if("@preserve"in r)return"@null"===r["@preserve"]?null:r["@preserve"];if(Y(r))return r;if(K(r))return r["@list"]=I(t,r["@list"],n),r;var s=j(t,"@id");if(s in r){var u=r[s];if(u in n.link){var c=n.link[u].indexOf(r);if(c!==-1)return n.link[u][c];n.link[u].push(r)}else n.link[u]=[r]}for(var l in r){var a=I(t,r[l],n),f=e.getContextValue(t,l,"@container");n.compactArrays&&z(a)&&1===a.length&&null===f&&(a=a[0]),r[l]=a}}return r}function O(e,t){return e.length<t.length?-1:t.length<e.length?1:e===t?0:e<t?-1:1}function R(e,t,r,n,i,o){null===o&&(o="@null");var a=[];if("@id"!==o&&"@reverse"!==o||!$(r))a.push(o);else{"@reverse"===o&&a.push("@reverse");var s=j(e,r["@id"],null,{vocab:!0});s in e.mappings&&e.mappings[s]&&e.mappings[s]["@id"]===r["@id"]?a.push.apply(a,["@vocab","@id"]):a.push.apply(a,["@id","@vocab"])}a.push("@none");for(var u=e.inverse[t],c=0;c<n.length;++c){var l=n[c];if(l in u)for(var f=u[l][i],h=0;h<a.length;++h){var p=a[h];if(p in f)return f[p]}}return null}function j(e,t,r,n,i){if(null===t)return t;J(r)&&(r=null),J(i)&&(i=!1),n=n||{};var o=e.getInverse();if(P(t))return t in o?o[t]["@none"]["@type"]["@none"]:t;if(n.vocab&&t in o){var a=e["@language"]||"@none",s=[];q(r)&&"@index"in r&&s.push("@index");var u="@language",c="@null";if(i)u="@type",c="@reverse",s.push("@set");else if(K(r)){"@index"in r||s.push("@list");for(var l=r["@list"],f=0===l.length?a:null,h=null,p=0;p<l.length;++p){var d=l[p],v="@none",y="@none";if(Y(d)?"@language"in d?v=d["@language"]:"@type"in d?y=d["@type"]:v="@null":y="@id",null===f?f=v:v!==f&&Y(d)&&(f="@none"),null===h?h=y:y!==h&&(h="@none"),"@none"===f&&"@none"===h)break}f=f||"@none",h=h||"@none","@none"!==h?(u="@type",c=h):c=f}else Y(r)?"@language"in r&&!("@index"in r)?(s.push("@language"),c=r["@language"]):"@type"in r&&(u="@type",c=r["@type"]):(u="@type",c="@id"),s.push("@set");s.push("@none");var g=R(e,t,r,s,u,c);if(null!==g)return g}if(n.vocab&&"@vocab"in e){var m=e["@vocab"];if(0===t.indexOf(m)&&t!==m){var b=t.substr(m.length);if(!(b in e.mappings))return b}}for(var w=null,_=0,x=[],k=e.fastCurieMap,T=t.length-1;_<T&&t[_]in k;++_)""in(k=k[t[_]])&&x.push(k[""][0]);for(var p=x.length-1;p>=0;--p)for(var E=x[p],S=E.terms,N=0;N<S.length;++N){var I=S[N]+":"+t.substr(E.iri.length),j=!(I in e.mappings)||null===r&&e.mappings[I]["@id"]===t;j&&(null===w||O(I,w)<0)&&(w=I)}return null!==w?w:n.vocab?t:M(e["@base"],t)}function C(t,r,n){if(Y(n)){var i=e.getContextValue(t,r,"@type"),o=e.getContextValue(t,r,"@language"),a=e.getContextValue(t,r,"@container"),s="@index"in n&&"@index"!==a;if(!s&&(n["@type"]===i||n["@language"]===o))return n["@value"];var u=Object.keys(n).length,c=1===u||2===u&&"@index"in n&&!s,l="@language"in t,f=H(n["@value"]),h=t.mappings[r]&&null===t.mappings[r]["@language"];if(c&&(!l||!f||h))return n["@value"];var p={};return s&&(p[j(t,"@index")]=n["@index"]),"@type"in n?p[j(t,"@type")]=j(t,n["@type"],null,{vocab:!0}):"@language"in n&&(p[j(t,"@language")]=n["@language"]),p[j(t,"@value")]=n["@value"],p}var d=L(t,r,{vocab:!0}),i=e.getContextValue(t,r,"@type"),v=j(t,n["@id"],null,{vocab:"@vocab"===i});if("@id"===i||"@vocab"===i||"@graph"===d)return v;var p={};return p[j(t,"@id")]=v,p}function A(e,t,r,n){if(r in n){if(n[r])return;throw new je("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:t,term:r})}if(n[r]=!1,P(r))throw new je("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:t,term:r});if(""===r)throw new je("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:t});e.mappings[r]&&delete e.mappings[r];var i=t[r];if(null===i||q(i)&&null===i["@id"])return e.mappings[r]=null,void(n[r]=!0);if(H(i)&&(i={"@id":i}),!q(i))throw new je("Invalid JSON-LD syntax; @context property values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:t});var o=e.mappings[r]={};if(o.reverse=!1,"@reverse"in i){if("@id"in i)throw new je("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});var a=i["@reverse"];if(!H(a))throw new je("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});var s=L(e,a,{vocab:!0,base:!1},t,n);if(!ee(s))throw new je("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});o["@id"]=s,o.reverse=!0}else if("@id"in i){var s=i["@id"];if(!H(s))throw new je("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});if(s!==r){if(s=L(e,s,{vocab:!0,base:!1},t,n),!ee(s)&&!P(s))throw new je("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t});o["@id"]=s}}var u=r.indexOf(":");if(o._termHasColon=u!==-1,!("@id"in o))if(o._termHasColon){var c=r.substr(0,u);if(c in t&&A(e,t,c,n),e.mappings[c]){var l=r.substr(u+1);o["@id"]=e.mappings[c]["@id"]+l}else o["@id"]=r}else{if(!("@vocab"in e))throw new je("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:t,term:r});o["@id"]=e["@vocab"]+r}if(n[r]=!0,"@type"in i){var f=i["@type"];if(!H(f))throw new je("Invalid JSON-LD syntax; an @context @type values must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if("@id"!==f&&"@vocab"!==f){if(f=L(e,f,{vocab:!0,base:!1},t,n),!ee(f))throw new je("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:t});if(0===f.indexOf("_:"))throw new je("Invalid JSON-LD syntax; an @context @type values must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:t})}o["@type"]=f}if("@container"in i){var h=i["@container"];if("@list"!==h&&"@set"!==h&&"@index"!==h&&"@language"!==h)throw new je("Invalid JSON-LD syntax; @context @container value must be one of the following: @list, @set, @index, or @language.","jsonld.SyntaxError",{code:"invalid container mapping",context:t});if(o.reverse&&"@index"!==h&&"@set"!==h&&null!==h)throw new je("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:t});o["@container"]=h}if("@language"in i&&!("@type"in i)){var p=i["@language"];if(null!==p&&!H(p))throw new je("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:t});null!==p&&(p=p.toLowerCase()),o["@language"]=p}
// disallow aliasing @context and @preserve
var s=o["@id"];if("@context"===s||"@preserve"===s)throw new je("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:t})}function L(t,r,n,i,o){if(null===r||P(r))return r;if(r=String(r),i&&r in i&&o[r]!==!0&&A(t,i,r,o),n=n||{},n.vocab){var a=t.mappings[r];if(null===a)return null;if(a)return a["@id"]}var s=r.indexOf(":");if(s!==-1){var u=r.substr(0,s),c=r.substr(s+1);if("_"===u||0===c.indexOf("//"))return r;i&&u in i&&A(t,i,u,o);var a=t.mappings[u];return a?a["@id"]+c:r}if(n.vocab&&"@vocab"in t)return t["@vocab"]+r;var l=r;return n.base&&(l=e.prependBase(t["@base"],l)),l}function D(t,r){if(null===t)return r;if(r.indexOf(":")!==-1)return r;H(t)&&(t=e.url.parse(t||""));var n=e.url.parse(r),i={protocol:t.protocol||""};if(null!==n.authority)i.authority=n.authority,i.path=n.path,i.query=n.query;else if(i.authority=t.authority,""===n.path)i.path=t.path,null!==n.query?i.query=n.query:i.query=t.query;else{if(0===n.path.indexOf("/"))i.path=n.path;else{var o=t.path;""!==n.path&&(o=o.substr(0,o.lastIndexOf("/")+1),o.length>0&&"/"!==o.substr(-1)&&(o+="/"),o+=n.path),i.path=o}i.query=n.query}i.path=ce(i.path,!!i.authority);var a=i.protocol;return null!==i.authority&&(a+="//"+i.authority),a+=i.path,null!==i.query&&(a+="?"+i.query),null!==n.fragment&&(a+="#"+n.fragment),""===a&&(a="./"),a}function M(t,r){if(null===t)return r;H(t)&&(t=e.url.parse(t||""));var n="";if(""!==t.href?n+=(t.protocol||"")+"//"+(t.authority||""):r.indexOf("//")&&(n+="//"),0!==r.indexOf(n))return r;for(var i=e.url.parse(r.substr(n.length)),o=t.normalizedPath.split("/"),a=i.normalizedPath.split("/"),s=i.fragment||i.query?0:1;o.length>0&&a.length>s&&o[0]===a[0];)o.shift(),a.shift();var u="";if(o.length>0){o.pop();for(var c=0;c<o.length;++c)u+="../"}return u+=a.join("/"),null!==i.query&&(u+="?"+i.query),null!==i.fragment&&(u+="#"+i.fragment),""===u&&(u="./"),u}function U(t){function r(){var e=this;if(e.inverse)return e.inverse;for(var t=e.inverse={},r=e.fastCurieMap={},o={},a=e["@language"]||"@none",s=e.mappings,u=Object.keys(s).sort(O),c=0;c<u.length;++c){var l=u[c],f=s[l];if(null!==f){var h=f["@container"]||"@none",p=f["@id"];z(p)||(p=[p]);for(var d=0;d<p.length;++d){var v=p[d],y=t[v],g=P(v);if(y)g||f._termHasColon||o[v].push(l);else if(t[v]=y={},!g&&!f._termHasColon){o[v]=[l];var m={iri:v,terms:o[v]};v[0]in r?r[v[0]].push(m):r[v[0]]=[m]}if(y[h]||(y[h]={"@language":{},"@type":{}}),y=y[h],f.reverse)i(f,l,y["@type"],"@reverse");else if("@type"in f)i(f,l,y["@type"],f["@type"]);else if("@language"in f){var b=f["@language"]||"@null";i(f,l,y["@language"],b)}else i(f,l,y["@language"],a),i(f,l,y["@type"],"@none"),i(f,l,y["@language"],"@none")}}}for(var w in r)n(r,w,1);return t}function n(e,t,r){for(var i,o,a=e[t],s=e[t]={},u=0;u<a.length;++u)i=a[u].iri,o=r>=i.length?"":i[r],o in s?s[o].push(a[u]):s[o]=[a[u]];for(var t in s)""!==t&&n(s,t,r+1)}function i(e,t,r,n){n in r||(r[n]=t)}function o(){var e={};return e["@base"]=this["@base"],e.mappings=te(this.mappings),e.clone=this.clone,e.inverse=null,e.getInverse=this.getInverse,"@language"in this&&(e["@language"]=this["@language"]),"@vocab"in this&&(e["@vocab"]=this["@vocab"]),e}return{"@base":e.url.parse(t.base||""),mappings:{},inverse:null,getInverse:r,clone:o}}function P(e){if(!H(e))return!1;switch(e){case"@base":case"@context":case"@container":case"@default":case"@embed":case"@explicit":case"@graph":case"@id":case"@index":case"@language":case"@list":case"@omitDefault":case"@preserve":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@vocab":return!0}return!1}function q(e){return"[object Object]"===Object.prototype.toString.call(e)}function F(e){return q(e)&&0===Object.keys(e).length}function z(e){return Array.isArray(e)}function B(e){if(!H(e)&&!F(e)){var t=!1;if(z(e)){t=!0;for(var r=0;r<e.length;++r)if(!H(e[r])){t=!1;break}}if(!t)throw new je('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, or an empty object.',"jsonld.SyntaxError",{code:"invalid type value",value:e})}}function H(e){return"string"==typeof e||"[object String]"===Object.prototype.toString.call(e)}function X(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function V(e){return X(e)&&String(e).indexOf(".")!==-1}function W(e){return!isNaN(parseFloat(e))&&isFinite(e)}function G(e){return"boolean"==typeof e||"[object Boolean]"===Object.prototype.toString.call(e)}function J(e){return void 0===e}function Q(e){var t=!1;if(q(e)&&!("@value"in e||"@set"in e||"@list"in e)){t=Object.keys(e).length>1||!("@id"in e)}return t}function $(e){return q(e)&&1===Object.keys(e).length&&"@id"in e}function Y(e){return q(e)&&"@value"in e}function K(e){return q(e)&&"@list"in e}function Z(e){var t=!1;return q(e)&&(t="@id"in e?0===e["@id"].indexOf("_:"):0===Object.keys(e).length||!("@value"in e||"@set"in e||"@list"in e)),t}function ee(e){return H(e)&&e.indexOf(":")!==-1}function te(e){if(e&&"object"==typeof e){var t;if(z(e)){t=[];for(var r=0;r<e.length;++r)t[r]=te(e[r])}else if(q(e)){t={};for(var n in e)t[n]=te(e[n])}else t=e.toString();return t}return e}function re(t,r,n,i){var o=Object.keys(r).length;if(z(t)){for(var a=0;a<t.length;++a)re(t[a],r,n,i);return o<Object.keys(r).length}if(q(t)){for(var s in t)if("@context"===s){var u=t[s];if(z(u))for(var c=u.length,a=0;a<c;++a){var l=u[a];H(l)&&(l=e.prependBase(i,l),n?(l=r[l],z(l)?(Array.prototype.splice.apply(u,[a,1].concat(l)),a+=l.length-1,c=u.length):u[a]=l):l in r||(r[l]=!1))}else H(u)&&(u=e.prependBase(i,u),n?t[s]=r[u]:u in r||(r[u]=!1))}else re(t[s],r,n,i);return o<Object.keys(r).length}return!1}function ne(e,t,r){var n=null,i=t.documentLoader,o=function(e,t,r,i,a){if(Object.keys(t).length>Re)return n=new je("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"loading remote context failed",max:Re}),a(n);var s={},u=function(){re(e,s,!0,i),a(null,e)};re(e,s,!1,i)||u();var c=[];for(var l in s)s[l]===!1&&c.push(l);for(var f=c.length,h=0;h<c.length;++h)!function(e){if(e in t)return n=new je("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"recursive context inclusion",url:e}),a(n);var i=te(t);i[e]=!0;var c=function(t,c){if(!n){var l=c?c.document:null;if(!t&&H(l))try{l=JSON.parse(l)}catch(e){t=e}if(t?t=new je("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:e,cause:t}):q(l)||(t=new je("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:e,cause:t})),t)return n=t,a(n);l="@context"in l?{"@context":l["@context"]}:{"@context":{}},c.contextUrl&&(z(l["@context"])||(l["@context"]=[l["@context"]]),l["@context"].push(c.contextUrl)),o(l,i,r,e,function(t,r){if(t)return a(t);s[e]=r["@context"],0===(f-=1)&&u()})}},l=r(e,c);l&&"then"in l&&l.then(c.bind(null,null),c)}(c[h])};o(e,{},i,t.base,r)}function ie(e){for(var t="(?:<([^:]+:[^>]*)>)",r="(_:(?:[A-Za-z0-9]+))",n="[ \\t]+",i="[ \\t]*",o=new RegExp("^[ \\t]*(?:#.*)?$"),a=new RegExp("^[ \\t]*(?:"+t+"|"+r+")"+n+(t+n)+"(?:"+t+"|"+r+'|(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"(?:(?:\\^\\^'+t+")|(?:@([a-z]+(?:-[a-z0-9]+)*)))?))"+i+"(?:\\.|(?:(?:"+t+"|"+r+")"+i+"\\.))"+i+"(?:#.*)?$"),s={},u=e.split(/(?:\r\n)|(?:\n)|(?:\r)/g),c=0,l=0;l<u.length;++l){var f=u[l];if(c++,!o.test(f)){var h=f.match(a);if(null===h)throw new je("Error while parsing N-Quads; invalid quad.","jsonld.ParseError",{line:c});var p={};if(J(h[1])?p.subject={type:"blank node",value:h[2]}:p.subject={type:"IRI",value:h[1]},p.predicate={type:"IRI",value:h[3]},J(h[4]))if(J(h[5])){p.object={type:"literal"},J(h[7])?J(h[8])?p.object.datatype=be:(p.object.datatype=Ie,p.object.language=h[8]):p.object.datatype=h[7];var d=h[6].replace(/\\"/g,'"').replace(/\\t/g,"\t").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\\\/g,"\\");p.object.value=d}else p.object={type:"blank node",value:h[5]};else p.object={type:"IRI",value:h[4]};var v="@default";if(J(h[9])?J(h[10])||(v=h[10]):v=h[9],v in s){for(var g=!0,m=s[v],b=0;g&&b<m.length;++b)y(m[b],p)&&(g=!1);g&&m.push(p)}else s[v]=[p]}}return s}function oe(e){var t=[];for(var r in e)for(var n=e[r],i=0;i<n.length;++i){var o=n[i];"@default"===r&&(r=null),t.push(ae(o,r))}return t.sort().join("")}function ae(e,t){var r=e.subject,n=e.predicate,i=e.object,o=t||null;"name"in e&&e.name&&(o=e.name.value);var a="";if("IRI"===r.type?a+="<"+r.value+">":a+=r.value,a+=" ","IRI"===n.type?a+="<"+n.value+">":a+=n.value,a+=" ","IRI"===i.type)a+="<"+i.value+">";else if("blank node"===i.type)a+=i.value;else{var s=i.value.replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\"/g,'\\"');a+='"'+s+'"',i.datatype===Ie?i.language&&(a+="@"+i.language):i.datatype!==be&&(a+="^^<"+i.datatype+">")}return null!==o&&void 0!==o&&(0!==o.indexOf("_:")?a+=" <"+o+">":a+=" "+o),a+=" .\n"}function se(e){var t={};t["@default"]=[];for(var r=e.getSubjects(),n=0;n<r.length;++n){var i=r[n];if(null!==i){var o=e.getSubjectTriples(i);if(null!==o){var a=o.predicates;for(var s in a)for(var u=a[s].objects,c=0;c<u.length;++c){var l=u[c],f={};0===i.indexOf("_:")?f.subject={type:"blank node",value:i}:f.subject={type:"IRI",value:i},0===s.indexOf("_:")?f.predicate={type:"blank node",value:s}:f.predicate={type:"IRI",value:s};var h=l.value;if(l.type===Se){de||Ue();var p=new de;h="";for(var d=0;d<l.value.length;d++)l.value[d].nodeType===ve.ELEMENT_NODE?h+=p.serializeToString(l.value[d]):l.value[d].nodeType===ve.TEXT_NODE&&(h+=l.value[d].nodeValue)}f.object={},l.type===Ne?0===l.value.indexOf("_:")?f.object.type="blank node":f.object.type="IRI":(f.object.type="literal",l.type===Ee?l.language?(f.object.datatype=Ie,f.object.language=l.language):f.object.datatype=be:f.object.datatype=l.type),f.object.value=h,t["@default"].push(f)}}}}return t}function ue(e){this.prefix=e,this.counter=0,this.existing={}}function ce(e,t){var r="";0===e.indexOf("/")&&(r="/");for(var n=e.split("/"),i=[];n.length>0;)"."===n[0]||""===n[0]&&n.length>1?n.shift():".."!==n[0]?i.push(n.shift()):(n.shift(),t||i.length>0&&".."!==i[i.length-1]?i.pop():i.push(".."));return r+i.join("/")}e.compact=function(t,r,n,i){function o(e,t,n,o){if(e)return i(e);o.compactArrays&&!o.graph&&z(t)?1===t.length?t=t[0]:0===t.length&&(t={}):o.graph&&q(t)&&(t=[t]),q(r)&&"@context"in r&&(r=r["@context"]),r=te(r),z(r)||(r=[r]);var a=r;r=[];for(var s=0;s<a.length;++s)(!q(a[s])||Object.keys(a[s]).length>0)&&r.push(a[s]);var u=r.length>0;if(1===r.length&&(r=r[0]),z(t)){var c=j(n,"@graph"),l=t;t={},u&&(t["@context"]=r),t[c]=l}else if(q(t)&&u){var l=t;t={"@context":r};for(var f in l)t[f]=l[f]}i(null,t,n)}if(arguments.length<2)return e.nextTick(function(){i(new TypeError("Could not compact, too few arguments."))});if("function"==typeof n&&(i=n,n={}),n=n||{},null===r)return e.nextTick(function(){i(new je("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"}))});if(null===t)return e.nextTick(function(){i(null,null)});"base"in n||(n.base="string"==typeof t?t:""),"compactArrays"in n||(n.compactArrays=!0),"graph"in n||(n.graph=!1),"skipExpansion"in n||(n.skipExpansion=!1),"documentLoader"in n||(n.documentLoader=e.loadDocument),"link"in n||(n.link=!1),n.link&&(n.skipExpansion=!0);!function(t,r,n){if(r.skipExpansion)return e.nextTick(function(){n(null,t)});e.expand(t,r,n)}(t,n,function(t,a){if(t)return i(new je("Could not expand input before compaction.","jsonld.CompactError",{cause:t}));var s=U(n);e.processContext(s,r,n,function(e,t){if(e)return i(new je("Could not process context before compaction.","jsonld.CompactError",{cause:e}));var r;try{r=(new Ce).compact(t,null,a,n)}catch(e){return i(e)}o(null,r,t,n)})})},e.expand=function(t,r,n){function i(e){"base"in r||(r.base=e.documentUrl||"");var t={document:te(e.document),remoteContext:{"@context":e.contextUrl}};if("expandContext"in r){var i=te(r.expandContext);t.expandContext="object"==typeof i&&"@context"in i?i:{"@context":i}}ne(t,r,function(e,t){if(e)return n(e);var i;try{var o=new Ce,a=U(r),s=t.document,u=t.remoteContext["@context"];t.expandContext&&(a=o.processContext(a,t.expandContext["@context"],r)),u&&(a=o.processContext(a,u,r)),i=o.expand(a,null,s,r,!1),q(i)&&"@graph"in i&&1===Object.keys(i).length?i=i["@graph"]:null===i&&(i=[]),z(i)||(i=[i])}catch(e){return n(e)}n(null,i)})}if(arguments.length<1)return e.nextTick(function(){n(new TypeError("Could not expand, too few arguments."))});"function"==typeof r&&(n=r,r={}),r=r||{},"documentLoader"in r||(r.documentLoader=e.loadDocument),"keepFreeFloatingNodes"in r||(r.keepFreeFloatingNodes=!1),e.nextTick(function(){if("string"==typeof t){var e=function(e,t){if(e)return n(e);try{if(!t.document)throw new je("No remote document found at the given URL.","jsonld.NullRemoteDocument");"string"==typeof t.document&&(t.document=JSON.parse(t.document))}catch(e){return n(new je("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:e,remoteDoc:t}))}i(t)},o=r.documentLoader(t,e);return void(o&&"then"in o&&o.then(e.bind(null,null),e))}i({contextUrl:null,documentUrl:null,document:t})})},e.flatten=function(t,r,n,i){if(arguments.length<1)return e.nextTick(function(){i(new TypeError("Could not flatten, too few arguments."))});"function"==typeof n?(i=n,n={}):"function"==typeof r&&(i=r,r=null,n={}),n=n||{},"base"in n||(n.base="string"==typeof t?t:""),"documentLoader"in n||(n.documentLoader=e.loadDocument),e.expand(t,n,function(t,o){if(t)return i(new je("Could not expand input before flattening.","jsonld.FlattenError",{cause:t}));var a;try{a=(new Ce).flatten(o)}catch(e){return i(e)}if(null===r)return i(null,a);n.graph=!0,n.skipExpansion=!0,e.compact(a,r,n,function(e,t){if(e)return i(new je("Could not compact flattened output.","jsonld.FlattenError",{cause:e}));i(null,t)})})},e.frame=function(t,r,n,i){function o(r){var o,a=r.document;a?(o=a["@context"],r.contextUrl?(o?z(o)?o.push(r.contextUrl):o=[o,r.contextUrl]:o=r.contextUrl,a["@context"]=o):o=o||{}):o={},e.expand(t,n,function(t,r){if(t)return i(new je("Could not expand input before framing.","jsonld.FrameError",{cause:t}));var s=te(n);s.isFrame=!0,s.keepFreeFloatingNodes=!0,e.expand(a,s,function(t,n){if(t)return i(new je("Could not expand frame before framing.","jsonld.FrameError",{cause:t}));var a;try{a=(new Ce).frame(r,n,s)}catch(e){return i(e)}s.graph=!0,s.skipExpansion=!0,s.link={},e.compact(a,o,s,function(e,t,r){if(e)return i(new je("Could not compact framed output.","jsonld.FrameError",{cause:e}));var n=j(r,"@graph");
// remove @preserve from results
s.link={},t[n]=I(r,t[n],s),i(null,t)})})})}if(arguments.length<2)return e.nextTick(function(){i(new TypeError("Could not frame, too few arguments."))});"function"==typeof n&&(i=n,n={}),n=n||{},"base"in n||(n.base="string"==typeof t?t:""),"documentLoader"in n||(n.documentLoader=e.loadDocument),"embed"in n||(n.embed="@last"),n.explicit=n.explicit||!1,"requireAll"in n||(n.requireAll=!0),n.omitDefault=n.omitDefault||!1,e.nextTick(function(){if("string"==typeof r){var e=function(e,t){if(e)return i(e);try{if(!t.document)throw new je("No remote document found at the given URL.","jsonld.NullRemoteDocument");"string"==typeof t.document&&(t.document=JSON.parse(t.document))}catch(e){return i(new je("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:e,remoteDoc:t}))}o(t)},t=n.documentLoader(r,e);return void(t&&"then"in t&&t.then(e.bind(null,null),e))}o({contextUrl:null,documentUrl:null,document:r})})},e.link=function(t,r,n,i){var o={};r&&(o["@context"]=r),o["@embed"]="@link",e.frame(t,o,n,i)},e.objectify=function(t,r,n,i){"function"==typeof n&&(i=n,n={}),n=n||{},"base"in n||(n.base="string"==typeof t?t:""),"documentLoader"in n||(n.documentLoader=e.loadDocument),e.expand(t,n,function(t,o){if(t)return i(new je("Could not expand input before linking.","jsonld.LinkError",{cause:t}));var a;try{a=(new Ce).flatten(o)}catch(e){return i(e)}n.graph=!0,n.skipExpansion=!0,e.compact(a,r,n,function(t,r,n){if(t)return i(new je("Could not compact flattened output before linking.","jsonld.LinkError",{cause:t}));var o=j(n,"@graph"),a=r[o][0],s=function(t){if(q(t)||z(t)){if(q(t)){if(s.visited[t["@id"]])return;s.visited[t["@id"]]=!0}for(var r in t){var i=t[r],o="@id"===e.getContextValue(n,r,"@type");if(z(i)||q(i)||o)if(H(i)&&o)t[r]=i=a[i],s(i);else if(z(i))for(var u=0;u<i.length;++u)H(i[u])&&o?i[u]=a[i[u]]:q(i[u])&&"@id"in i[u]&&(i[u]=a[i[u]["@id"]]),s(i[u]);else if(q(i)){var c=i["@id"];t[r]=i=a[c],s(i)}}}};s.visited={},s(a),r.of_type={};for(var u in a)if("@type"in a[u]){var c=a[u]["@type"];z(c)||(c=[c]);for(var l=0;l<c.length;++l)c[l]in r.of_type||(r.of_type[c[l]]=[]),r.of_type[c[l]].push(a[u])}i(null,r)})})},e.normalize=function(t,r,n){if(arguments.length<1)return e.nextTick(function(){n(new TypeError("Could not normalize, too few arguments."))});if("function"==typeof r&&(n=r,r={}),r=r||{},"algorithm"in r||(r.algorithm="URGNA2012"),"base"in r||(r.base="string"==typeof t?t:""),"documentLoader"in r||(r.documentLoader=e.loadDocument),"inputFormat"in r){if("application/nquads"!==r.inputFormat)return n(new je("Unknown normalization input format.","jsonld.NormalizeError"));var i=ie(t);(new Ce).normalize(i,r,n)}else{var o=te(r);delete o.format,o.produceGeneralizedRdf=!1,e.toRDF(t,o,function(e,t){if(e)return n(new je("Could not convert input to RDF dataset before normalization.","jsonld.NormalizeError",{cause:e}));(new Ce).normalize(t,r,n)})}},e.fromRDF=function(t,r,n){if(arguments.length<1)return e.nextTick(function(){n(new TypeError("Could not convert from RDF, too few arguments."))});"function"==typeof r&&(n=r,r={}),r=r||{},"useRdfType"in r||(r.useRdfType=!1),"useNativeTypes"in r||(r.useNativeTypes=!1),"format"in r||!H(t)||"format"in r||(r.format="application/nquads"),e.nextTick(function(){function e(e,t,r){(new Ce).fromRDF(e,t,r)}var i;if(r.format){if(!(i=r.rdfParser||pe[r.format]))return n(new je("Unknown input format.","jsonld.UnknownFormat",{format:r.format}))}else i=function(){return t};var o=!1;try{t=i(t,function(t,i){if(o=!0,t)return n(t);e(i,r,n)})}catch(e){if(!o)return n(e);throw e}if(t){if("then"in t)return t.then(function(t){e(t,r,n)},n);e(t,r,n)}})},e.toRDF=function(t,r,n){if(arguments.length<1)return e.nextTick(function(){n(new TypeError("Could not convert to RDF, too few arguments."))});"function"==typeof r&&(n=r,r={}),r=r||{},"base"in r||(r.base="string"==typeof t?t:""),"documentLoader"in r||(r.documentLoader=e.loadDocument),e.expand(t,r,function(e,t){if(e)return n(new je("Could not expand input before serialization to RDF.","jsonld.RdfError",{cause:e}));var i;try{if(i=Ce.prototype.toRDF(t,r),r.format){if("application/nquads"===r.format)return n(null,oe(i));throw new je("Unknown output format.","jsonld.UnknownFormat",{format:r.format})}}catch(e){return n(e)}n(null,i)})},e.createNodeMap=function(t,r,n){if(arguments.length<1)return e.nextTick(function(){n(new TypeError("Could not create node map, too few arguments."))});"function"==typeof r&&(n=r,r={}),r=r||{},"base"in r||(r.base="string"==typeof t?t:""),"documentLoader"in r||(r.documentLoader=e.loadDocument),e.expand(t,r,function(e,t){if(e)return n(new je("Could not expand input before creating node map.","jsonld.CreateNodeMapError",{cause:e}));var i;try{i=(new Ce).createNodeMap(t,r)}catch(e){return n(e)}n(null,i)})},e.merge=function(t,r,n,i){function o(e,t){if(!u){if(e)return u=e,i(new je("Could not expand input before flattening.","jsonld.FlattenError",{cause:e}));s.push(t),0==--c&&a(s)}}function a(t){var o=!0;"mergeNodes"in n&&(o=n.mergeNodes);var a,s=n.namer||n.issuer||new ue("_:b"),u={"@default":{}};try{for(var c=0;c<t.length;++c){var l=t[c];l=e.relabelBlankNodes(l,{issuer:new ue("_:b"+c+"-")});var f=o||0===c?u:{"@default":{}};if(g(l,f,"@default",s),f!==u)for(var h in f){var p=f[h];if(h in u){var d=u[h];for(var v in p)v in d||(d[v]=p[v])}else u[h]=p}}a=m(u)}catch(e){return i(e)}for(var y=[],b=Object.keys(a).sort(),w=0;w<b.length;++w){var _=a[b[w]];$(_)||y.push(_)}if(null===r)return i(null,y);n.graph=!0,n.skipExpansion=!0,e.compact(y,r,n,function(e,t){if(e)return i(new je("Could not compact merged output.","jsonld.MergeError",{cause:e}));i(null,t)})}if(arguments.length<1)return e.nextTick(function(){i(new TypeError("Could not merge, too few arguments."))});if(!z(t))return e.nextTick(function(){i(new TypeError('Could not merge, "docs" must be an array.'))});"function"==typeof n?(i=n,n={}):"function"==typeof r&&(i=r,r=null,n={}),n=n||{};for(var s=[],u=null,c=t.length,l=0;l<t.length;++l){var f={};for(var h in n)f[h]=n[h];e.expand(t[l],f,o)}},e.relabelBlankNodes=function(e,t){return t=t||{},u(t.namer||t.issuer||new ue("_:b"),e)},e.prependBase=function(e,t){return D(e,t)},e.documentLoader=function(t,r){var n=new je("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed"});return c?r(n,{contextUrl:null,documentUrl:t,document:null}):e.promisify(function(e){e(n)})},e.loadDocument=function(t,r){var n=e.documentLoader(t,r);n&&"then"in n&&n.then(r.bind(null,null),r)},e.promises=function(t){t=t||{};var n=Array.prototype.slice,o=e.promisify,a=t.api||{},s=t.version||"jsonld.js";"string"==typeof t.api&&(t.version||(s=t.api),a={}),a.expand=function(t){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");return o.apply(null,[e.expand].concat(n.call(arguments)))},a.compact=function(t,r){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");var i=function(t,r,n,i){e.compact(t,r,n,function(e,t){i(e,t)})};return o.apply(null,[i].concat(n.call(arguments)))},a.flatten=function(t){if(arguments.length<1)throw new TypeError("Could not flatten, too few arguments.");return o.apply(null,[e.flatten].concat(n.call(arguments)))},a.frame=function(t,r){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");return o.apply(null,[e.frame].concat(n.call(arguments)))},a.fromRDF=function(t){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");return o.apply(null,[e.fromRDF].concat(n.call(arguments)))},a.toRDF=function(t){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");return o.apply(null,[e.toRDF].concat(n.call(arguments)))},a.normalize=function(t){if(arguments.length<1)throw new TypeError("Could not normalize, too few arguments.");return o.apply(null,[e.normalize].concat(n.call(arguments)))},"jsonld.js"===s&&(a.link=function(t,r){if(arguments.length<2)throw new TypeError("Could not link, too few arguments.");return o.apply(null,[e.link].concat(n.call(arguments)))},a.objectify=function(t){return o.apply(null,[e.objectify].concat(n.call(arguments)))},a.createNodeMap=function(t){return o.apply(null,[e.createNodeMap].concat(n.call(arguments)))},a.merge=function(t){return o.apply(null,[e.merge].concat(n.call(arguments)))});try{e.Promise=i.Promise||r(127).Promise}catch(e){var u=function(){throw new Error("Unable to find a Promise implementation.")};for(var c in a)a[c]=u}return a},e.promisify=function(t){if(!e.Promise)try{e.Promise=i.Promise||r(127).Promise}catch(e){throw new Error("Unable to find a Promise implementation.")}var n=Array.prototype.slice.call(arguments,1);return new e.Promise(function(e,r){t.apply(null,n.concat(function(t,n){t?r(t):e(n)}))})},e.promises({api:e.promises}),t.prototype=e.promises({version:"json-ld-1.0"}),t.prototype.toString=function(){return this instanceof t?"[object JsonLdProcessor]":"[object JsonLdProcessorPrototype]"},e.JsonLdProcessor=t;var le=!!Object.defineProperty;if(le)try{Object.defineProperty({},"x",{})}catch(e){le=!1}le&&(Object.defineProperty(t,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(t.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:t})),l&&void 0===i.JsonLdProcessor&&(le?Object.defineProperty(i,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:t}):i.JsonLdProcessor=t);var fe="function"==typeof o&&o,he=fe?function(e){fe(e)}:function(e){setTimeout(e,0)};"object"==typeof n&&"function"==typeof n.nextTick?e.nextTick=n.nextTick:e.nextTick=he,e.setImmediate=fe?he:e.nextTick,e.parseLinkHeader=function(e){for(var t={},r=e.match(/(?:<[^>]*?>|"[^"]*?"|[^,])+/g),n=0;n<r.length;++n){var i=r[n].match(/\s*<([^>]*?)>\s*(?:;\s*(.*))?/);if(i){for(var o={target:i[1]},a=i[2],s=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g;i=s.exec(a);)o[i[1]]=void 0===i[2]?i[3]:i[2];var u=o.rel||"";z(t[u])?t[u].push(o):t[u]=u in t?[t[u],o]:o}}return t},e.RequestQueue=function(){this._requests={}},e.RequestQueue.prototype.wrapLoader=function(e){return this._loader=e,this._usePromise=1===e.length,this.add.bind(this)},e.RequestQueue.prototype.add=function(t,r){var n=this;if(!r&&!n._usePromise)throw new Error("callback must be specified.");if(n._usePromise)return new e.Promise(function(e,r){var i=n._requests[t];i||(i=n._requests[t]=n._loader(t).then(function(e){return delete n._requests[t],e}).catch(function(e){throw delete n._requests[t],e})),i.then(function(t){e(t)}).catch(function(e){r(e)})});t in n._requests?n._requests[t].push(r):(n._requests[t]=[r],n._loader(t,function(e,r){var i=n._requests[t];delete n._requests[t];for(var o=0;o<i.length;++o)i[o](e,r)}))},e.DocumentCache=function(e){this.order=[],this.cache={},this.size=e||50,this.expires=3e4},e.DocumentCache.prototype.get=function(e){if(e in this.cache){var t=this.cache[e];if(t.expires>=+new Date)return t.ctx;delete this.cache[e],this.order.splice(this.order.indexOf(e),1)}return null},e.DocumentCache.prototype.set=function(e,t){this.order.length===this.size&&delete this.cache[this.order.shift()],this.order.push(e),this.cache[e]={ctx:t,expires:+new Date+this.expires}},e.ActiveContextCache=function(e){this.order=[],this.cache={},this.size=e||100},e.ActiveContextCache.prototype.get=function(e,t){var r=JSON.stringify(e),n=JSON.stringify(t),i=this.cache[r];return i&&n in i?i[n]:null},e.ActiveContextCache.prototype.set=function(e,t,r){if(this.order.length===this.size){var n=this.order.shift();delete this.cache[n.activeCtx][n.localCtx]}var i=JSON.stringify(e),o=JSON.stringify(t);this.order.push({activeCtx:i,localCtx:o}),i in this.cache||(this.cache[i]={}),this.cache[i][o]=te(r)},e.cache={activeCtx:new e.ActiveContextCache},e.documentLoaders={},e.documentLoaders.jquery=function(t,r){function n(n,i){return 0!==n.indexOf("http:")&&0!==n.indexOf("https:")?i(new je('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:n}),{contextUrl:null,documentUrl:n,document:null}):r.secure&&0!==n.indexOf("https")?i(new je('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:n}),{contextUrl:null,documentUrl:n,document:null}):void t.ajax({url:n,accepts:{json:"application/ld+json, application/json"},headers:{Accept:"application/ld+json, application/json"},dataType:"json",crossDomain:!0,success:function(t,r,o){var a={contextUrl:null,documentUrl:n,document:t},s=o.getResponseHeader("Content-Type"),u=o.getResponseHeader("Link");if(u&&"application/ld+json"!==s){if(u=e.parseLinkHeader(u)[Oe],z(u))return i(new je("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:n}),a);u&&(a.contextUrl=u.target)}i(null,a)},error:function(e,t,r){i(new je("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:n,cause:r}),{contextUrl:null,documentUrl:n,document:null})}})}r=r||{};var i=new e.RequestQueue;return("usePromise"in r?r.usePromise:"undefined"!=typeof Promise)?i.wrapLoader(function(t){return e.promisify(n,t)}):i.wrapLoader(n)},e.documentLoaders.node=function(t){function n(r,c,l){function f(t,i,a){if(h={contextUrl:null,documentUrl:r,document:a||null},t)return l(new je("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:r,cause:t}),h);var s=u.STATUS_CODES[i.statusCode];if(i.statusCode>=400)return l(new je("URL could not be dereferenced: "+s,"jsonld.InvalidUrl",{code:"loading document failed",url:r,httpStatusCode:i.statusCode}),h);if(i.headers.link&&"application/ld+json"!==i.headers["content-type"]){var f=e.parseLinkHeader(i.headers.link)[Oe];if(z(f))return l(new je("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:r}),h);f&&(h.contextUrl=f.target)}if(i.statusCode>=300&&i.statusCode<400&&i.headers.location)return c.length===o?l(new je("URL could not be dereferenced; there were too many redirects.","jsonld.TooManyRedirects",{code:"loading document failed",url:r,httpStatusCode:i.statusCode,redirects:c}),h):c.indexOf(r)!==-1?l(new je("URL could not be dereferenced; infinite redirection was detected.","jsonld.InfiniteRedirectDetected",{code:"recursive context inclusion",url:r,httpStatusCode:i.statusCode,redirects:c}),h):(c.push(r),n(i.headers.location,c,l));c.push(r),l(t,h)}if(0!==r.indexOf("http:")&&0!==r.indexOf("https:"))return l(new je('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:r}),{contextUrl:null,documentUrl:r,document:null});if(t.secure&&0!==r.indexOf("https"))return l(new je('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:r}),{contextUrl:null,documentUrl:r,document:null});var h=null;if(null!==h)return l(null,h);var p={Accept:s};for(var d in t.headers)p[d]=t.headers[d];a({url:r,headers:p,strictSSL:i,followRedirect:!1},f)}t=t||{};var i=!("strictSSL"in t)||t.strictSSL,o="maxRedirects"in t?t.maxRedirects:-1,a="request"in t?t.request:r(22),s="application/ld+json, application/json",u=r(22),c=new e.RequestQueue;if(t.usePromise)return c.wrapLoader(function(t){return e.promisify(n,t,[])});var l=t.headers||{};if("Accept"in l||"accept"in l)throw new RangeError('Accept header may not be specified as an option; only "'+s+'" is supported.');return c.wrapLoader(function(e,t){n(e,[],t)})},e.documentLoaders.xhr=function(t){function r(r,i){if(0!==r.indexOf("http:")&&0!==r.indexOf("https:"))return i(new je('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:r}),{contextUrl:null,documentUrl:r,document:null});if(t.secure&&0!==r.indexOf("https"))return i(new je('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:r}),{contextUrl:null,documentUrl:r,document:null});var o=t.xhr||XMLHttpRequest,a=new o;a.onload=function(){if(a.status>=400)return i(new je("URL could not be dereferenced: "+a.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:r,httpStatusCode:a.status}),{contextUrl:null,documentUrl:r,document:null});var t,o={contextUrl:null,documentUrl:r,document:a.response},s=a.getResponseHeader("Content-Type");if(n.test(a.getAllResponseHeaders())&&(t=a.getResponseHeader("Link")),t&&"application/ld+json"!==s){if(t=e.parseLinkHeader(t)[Oe],z(t))return i(new je("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:r}),o);t&&(o.contextUrl=t.target)}i(null,o)},a.onerror=function(){i(new je("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:r}),{contextUrl:null,documentUrl:r,document:null})},a.open("GET",r,!0),a.setRequestHeader("Accept","application/ld+json, application/json"),a.send()}t=t||{};var n=/(^|(\r\n))link:/i,i=new e.RequestQueue;return("usePromise"in t?t.usePromise:"undefined"!=typeof Promise)?i.wrapLoader(function(t){return e.promisify(r,t)}):i.wrapLoader(r)},e.useDocumentLoader=function(t){if(!(t in e.documentLoaders))throw new je('Unknown document loader type: "'+t+'"',"jsonld.UnknownDocumentLoader",{type:t});e.documentLoader=e.documentLoaders[t].apply(e,Array.prototype.slice.call(arguments,1))},e.processContext=function(t,r){var n={},i=2;arguments.length>3&&(n=arguments[2]||{},i+=1);var o=arguments[i];if("base"in n||(n.base=""),"documentLoader"in n||(n.documentLoader=e.loadDocument),null===r)return o(null,U(n));r=te(r),q(r)&&"@context"in r||(r={"@context":r}),ne(r,n,function(e,r){if(e)return o(e);try{r=(new Ce).processContext(t,r,n)}catch(e){return o(e)}o(null,r)})},e.hasProperty=function(e,t){var r=!1;if(t in e){var n=e[t];r=!z(n)||n.length>0}return r},e.hasValue=function(t,r,n){var i=!1;if(e.hasProperty(t,r)){var o=t[r],a=K(o);if(z(o)||a){a&&(o=o["@list"]);for(var s=0;s<o.length;++s)if(e.compareValues(n,o[s])){i=!0;break}}else z(n)||(i=e.compareValues(n,o))}return i},e.addValue=function(t,r,n,i){if(i=i||{},"propertyIsArray"in i||(i.propertyIsArray=!1),"allowDuplicate"in i||(i.allowDuplicate=!0),z(n)){0!==n.length||!i.propertyIsArray||r in t||(t[r]=[]);for(var o=0;o<n.length;++o)e.addValue(t,r,n[o],i)}else if(r in t){var a=!i.allowDuplicate&&e.hasValue(t,r,n);z(t[r])||a&&!i.propertyIsArray||(t[r]=[t[r]]),a||t[r].push(n)}else t[r]=i.propertyIsArray?[n]:n},e.getValues=function(e,t){var r=e[t]||[];return z(r)||(r=[r]),r},e.removeProperty=function(e,t){delete e[t]},e.removeValue=function(t,r,n,i){"propertyIsArray"in(i=i||{})||(i.propertyIsArray=!1);var o=e.getValues(t,r).filter(function(t){return!e.compareValues(t,n)});0===o.length?e.removeProperty(t,r):1!==o.length||i.propertyIsArray?t[r]=o:t[r]=o[0]},e.compareValues=function(e,t){return e===t||(!(!Y(e)||!Y(t)||e["@value"]!==t["@value"]||e["@type"]!==t["@type"]||e["@language"]!==t["@language"]||e["@index"]!==t["@index"])||!!(q(e)&&"@id"in e&&q(t)&&"@id"in t)&&e["@id"]===t["@id"])},e.getContextValue=function(e,t,r){var n=null;if(null===t)return n;if("@language"===r&&r in e&&(n=e[r]),e.mappings[t]){var i=e.mappings[t];J(r)?n=i:r in i&&(n=i[r])}return n};var pe={};if(e.registerRDFParser=function(e,t){pe[e]=t},e.unregisterRDFParser=function(e){delete pe[e]},c){if(void 0===de)var de=null;if(void 0===ve)var ve={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12}}var ye="http://www.w3.org/2001/XMLSchema#boolean",ge="http://www.w3.org/2001/XMLSchema#double",me="http://www.w3.org/2001/XMLSchema#integer",be="http://www.w3.org/2001/XMLSchema#string",we="http://www.w3.org/1999/02/22-rdf-syntax-ns#",_e=we+"first",xe=we+"rest",ke=we+"nil",Te=we+"type",Ee=we+"PlainLiteral",Se=we+"XMLLiteral",Ne=we+"object",Ie=we+"langString",Oe="http://www.w3.org/ns/json-ld#context",Re=10,je=function(e,t,r){c?(Error.call(this),Error.captureStackTrace(this,this.constructor)):"undefined"!=typeof Error&&(this.stack=(new Error).stack),this.name=t||"jsonld.Error",this.message=e||"An unspecified JSON-LD error occurred.",this.details=r||{}};c?r(22).inherits(je,Error):"undefined"!=typeof Error&&(je.prototype=new Error);var Ce=function(){};Ce.prototype.compact=function(t,r,n,i){if(z(n)){for(var o=[],a=0;a<n.length;++a){var s=this.compact(t,r,n[a],i);null!==s&&o.push(s)}if(i.compactArrays&&1===o.length){var u=e.getContextValue(t,r,"@container");null===u&&(o=o[0])}return o}if(q(n)){if(i.link&&"@id"in n&&n["@id"]in i.link)for(var c=i.link[n["@id"]],a=0;a<c.length;++a)if(c[a].expanded===n)return c[a].compacted;if(Y(n)||$(n)){var o=C(t,r,n);return i.link&&$(n)&&(n["@id"]in i.link||(i.link[n["@id"]]=[]),i.link[n["@id"]].push({expanded:n,compacted:o})),o}var l="@reverse"===r,o={};i.link&&"@id"in n&&(n["@id"]in i.link||(i.link[n["@id"]]=[]),i.link[n["@id"]].push({expanded:n,compacted:o}));for(var f=Object.keys(n).sort(),h=0;h<f.length;++h){var p=f[h],d=n[p];if("@id"!==p&&"@type"!==p)if("@reverse"!==p)if("@index"!==p)if("@graph"!==p&&"@list"!==p&&P(p)){var v=j(t,p);e.addValue(o,v,d)}else{if(0===d.length){var y=j(t,p,d,{vocab:!0},l);e.addValue(o,y,d,{propertyIsArray:!0})}for(var g=0;g<d.length;++g){var m=d[g],y=j(t,p,m,{vocab:!0},l),u=e.getContextValue(t,y,"@container"),b=K(m),w=null;b&&(w=m["@list"]);var _=this.compact(t,y,b?w:m,i);if(b)if(z(_)||(_=[_]),"@list"!==u){var x={};x[j(t,"@list")]=_,_=x,"@index"in m&&(_[j(t,"@index")]=m["@index"])}else if(y in o)throw new je('JSON-LD compact error; property has a "@list" @container rule but there is more than a single @list that matches the compacted term in the document. Compaction might mix unwanted items into the list.',"jsonld.SyntaxError",{code:"compaction to list of lists"});if("@language"===u||"@index"===u){var k;y in o?k=o[y]:o[y]=k={},"@language"===u&&Y(_)&&(_=_["@value"]),e.addValue(k,m[u],_)}else{var T=!i.compactArrays||"@set"===u||"@list"===u||z(_)&&0===_.length||"@list"===p||"@graph"===p;e.addValue(o,y,_,{propertyIsArray:T})}}}else{var u=e.getContextValue(t,r,"@container");if("@index"===u)continue;var v=j(t,p);e.addValue(o,v,d)}else{var E=this.compact(t,"@reverse",d,i);for(var S in E)if(t.mappings[S]&&t.mappings[S].reverse){var N=E[S],u=e.getContextValue(t,S,"@container"),I="@set"===u||!i.compactArrays;e.addValue(o,S,N,{propertyIsArray:I}),delete E[S]}if(Object.keys(E).length>0){var v=j(t,p);e.addValue(o,v,E)}}else{var E;if(H(d))E=j(t,d,null,{vocab:"@type"===p});else{E=[];for(var g=0;g<d.length;++g)E.push(j(t,d[g],null,{vocab:!0}))}var v=j(t,p),T=z(E)&&0===d.length;e.addValue(o,v,E,{propertyIsArray:T})}}return o}return n},Ce.prototype.expand=function(t,r,n,i,o){var a=this;if(null===n||void 0===n)return null;if(!z(n)&&!q(n))return o||null!==r&&"@graph"!==L(t,r,{vocab:!0})?f(t,r,n):null;if(z(n)){var u=[],c=e.getContextValue(t,r,"@container");o=o||"@list"===c;for(var l=0;l<n.length;++l){var h=a.expand(t,r,n[l],i);if(o&&(z(h)||K(h)))throw new je("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"});null!==h&&(z(h)?u=u.concat(h):u.push(h))}return u}"@context"in n&&(t=a.processContext(t,n["@context"],i));for(var p=L(t,r,{vocab:!0}),u={},d=Object.keys(n).sort(),v=0;v<d.length;++v){var y,g=d[v],m=n[g];if("@context"!==g){var b=L(t,g,{vocab:!0});if(null!==b&&(ee(b)||P(b))){if(P(b)){if("@reverse"===p)throw new je("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:m});if(b in u)throw new je("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:b})}if("@id"===b&&!H(m)){if(!i.isFrame)throw new je('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:m});if(!q(m))throw new je('Invalid JSON-LD syntax; "@id" value must be a string or an object.',"jsonld.SyntaxError",{code:"invalid @id value",value:m})}if("@type"===b&&B(m),"@graph"===b&&!q(m)&&!z(m))throw new je('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:m});if("@value"===b&&(q(m)||z(m)))throw new je('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:m});if("@language"===b){if(null===m)continue;if(!H(m))throw new je('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:m});m=m.toLowerCase()}if("@index"===b&&!H(m))throw new je('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:m});if("@reverse"!==b){var c=e.getContextValue(t,g,"@container");if("@language"===c&&q(m))y=s(m);else if("@index"===c&&q(m))y=function(e){for(var r=[],n=Object.keys(m).sort(),o=0;o<n.length;++o){var s=n[o],u=m[s];z(u)||(u=[u]),u=a.expand(t,e,u,i,!1);for(var c=0;c<u.length;++c){var l=u[c];"@index"in l||(l["@index"]=s),r.push(l)}}return r}(g);else{var w="@list"===b;if(w||"@set"===b){var _=r;if(w&&"@graph"===p&&(_=null),y=a.expand(t,_,m,i,w),w&&K(y))throw new je("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"})}else y=a.expand(t,g,m,i,!1)}if(null!==y||"@value"===b)if("@list"===b||K(y)||"@list"!==c||(y=z(y)?y:[y],y={"@list":y}),t.mappings[g]&&t.mappings[g].reverse){var x=u["@reverse"]=u["@reverse"]||{};z(y)||(y=[y]);for(var k=0;k<y.length;++k){var T=y[k];if(Y(T)||K(T))throw new je('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:y});e.addValue(x,b,T,{propertyIsArray:!0})}}else{var E=["@index","@id","@type","@value","@language"].indexOf(b)===-1;e.addValue(u,b,y,{propertyIsArray:E})}}else{if(!q(m))throw new je('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:m});if("@reverse"in(y=a.expand(t,"@reverse",m,i)))for(var S in y["@reverse"])e.addValue(u,S,y["@reverse"][S],{propertyIsArray:!0});var x=u["@reverse"]||null;for(var S in y)if("@reverse"!==S){null===x&&(x=u["@reverse"]={}),e.addValue(x,S,[],{propertyIsArray:!0});for(var N=y[S],k=0;k<N.length;++k){var T=N[k];if(Y(T)||K(T))throw new je('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:y});e.addValue(x,S,T,{propertyIsArray:!0})}}}}}}d=Object.keys(u);var I=d.length;if("@value"in u){if("@type"in u&&"@language"in u)throw new je('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:u});var O=I-1;if("@type"in u&&(O-=1),"@index"in u&&(O-=1),"@language"in u&&(O-=1),0!==O)throw new je('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and at most one other property which can be "@type" or "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:u});if(null===u["@value"])u=null;else{if("@language"in u&&!H(u["@value"]))throw new je("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:u});if("@type"in u&&(!ee(u["@type"])||0===u["@type"].indexOf("_:")))throw new je('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:u})}}else if("@type"in u&&!z(u["@type"]))u["@type"]=[u["@type"]];else if("@set"in u||"@list"in u){if(I>1&&!(2===I&&"@index"in u))throw new je('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:u});"@set"in u&&(u=u["@set"],d=Object.keys(u),I=d.length)}else 1===I&&"@language"in u&&(u=null);return!q(u)||i.keepFreeFloatingNodes||o||null!==r&&"@graph"!==p||(0===I||"@value"in u||"@list"in u||1===I&&"@id"in u)&&(u=null),u},Ce.prototype.createNodeMap=function(e,t){t=t||{};var r=t.namer||t.issuer||new ue("_:b"),n={"@default":{}};return g(e,n,"@default",r),m(n)},Ce.prototype.flatten=function(e){for(var t=this.createNodeMap(e),r=[],n=Object.keys(t).sort(),i=0;i<n.length;++i){var o=t[n[i]];$(o)||r.push(o)}return r},Ce.prototype.frame=function(e,t,r){var n={options:r,graphs:{"@default":{},"@merged":{}},subjectStack:[],link:{}},i=new ue("_:b");g(e,n.graphs,"@merged",i),n.subjects=n.graphs["@merged"];var o=[];return b(n,Object.keys(n.subjects).sort(),t,o,null),o},Ce.prototype.normalize=function(e,t,r){return"URDNA2015"===t.algorithm?new Ae(t).main(e,r):"URGNA2012"===t.algorithm?new Le(t).main(e,r):void r(new Error("Invalid RDF Dataset Normalization algorithm: "+t.algorithm))},Ce.prototype.fromRDF=function(t,r,n){var i={},o={"@default":i},a={};for(var s in t){var u=t[s];s in o||(o[s]={}),"@default"===s||s in i||(i[s]={"@id":s});for(var c=o[s],l=0;l<u.length;++l){var f=u[l],h=f.subject.value,p=f.predicate.value,d=f.object;h in c||(c[h]={"@id":h});var y=c[h],g="IRI"===d.type||"blank node"===d.type;if(!g||d.value in c||(c[d.value]={"@id":d.value}),p!==Te||r.useRdfType||!g){var m=v(d,r.useNativeTypes);if(e.addValue(y,p,m,{propertyIsArray:!0}),g)if(d.value===ke){var b=c[d.value];"usages"in b||(b.usages=[]),b.usages.push({node:y,property:p,value:m})}else d.value in a?a[d.value]=!1:a[d.value]={node:y,property:p,value:m}}else e.addValue(y,"@type",d.value,{propertyIsArray:!0})}}for(var s in o){var w=o[s];if(ke in w){for(var _=w[ke],x=0;x<_.usages.length;++x){for(var k=_.usages[x],y=k.node,T=k.property,E=k.value,S=[],N=[],I=Object.keys(y).length;T===xe&&q(a[y["@id"]])&&z(y[_e])&&1===y[_e].length&&z(y[xe])&&1===y[xe].length&&(3===I||4===I&&z(y["@type"])&&1===y["@type"].length&&y["@type"][0]===we+"List")&&(S.push(y[_e][0]),N.push(y["@id"]),k=a[y["@id"]],y=k.node,T=k.property,E=k.value,I=Object.keys(y).length,0===y["@id"].indexOf("_:")););if(T===_e){if(y["@id"]===ke)continue;E=w[E["@id"]][xe][0],S.pop(),N.pop()}delete E["@id"],E["@list"]=S.reverse();for(var O=0;O<N.length;++O)delete w[N[O]]}delete _.usages}}for(var R=[],j=Object.keys(i).sort(),x=0;x<j.length;++x){var C=j[x],y=i[C];if(C in o)for(var u=y["@graph"]=[],w=o[C],A=Object.keys(w).sort(),L=0;L<A.length;++L){var D=w[A[L]];$(D)||u.push(D)}$(y)||R.push(y)}n(null,R)},Ce.prototype.toRDF=function(e,t){var r=new ue("_:b"),n={"@default":{}};g(e,n,"@default",r);for(var i={},o=Object.keys(n).sort(),a=0;a<o.length;++a){var s=o[a];("@default"===s||ee(s))&&(i[s]=h(n[s],r,t))}return i},Ce.prototype.processContext=function(t,r,n){q(r)&&"@context"in r&&z(r["@context"])&&(r=r["@context"]);var i=z(r)?r:[r];if(0===i.length)return t.clone();for(var o=t,a=0;a<i.length;++a){var s=i[a];if(null!==s){if(q(s)&&"@context"in s&&(s=s["@context"]),!q(s))throw new je("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:s});if(e.cache.activeCtx){var u=e.cache.activeCtx.get(t,s);if(u){o=t=u;continue}}t=o,o=o.clone();var c={};if("@base"in s){var l=s["@base"];if(null===l)l=null;else{if(!H(l))throw new je('Invalid JSON-LD syntax; the value of "@base" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:s});if(""!==l&&!ee(l))throw new je('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI or the empty string.',"jsonld.SyntaxError",{code:"invalid base IRI",context:s})}null!==l&&(l=e.url.parse(l||"")),o["@base"]=l,c["@base"]=!0}if("@vocab"in s){var f=s["@vocab"];if(null===f)delete o["@vocab"];else{if(!H(f))throw new je('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:s});if(!ee(f))throw new je('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:s});o["@vocab"]=f}c["@vocab"]=!0}if("@language"in s){var f=s["@language"];if(null===f)delete o["@language"];else{if(!H(f))throw new je('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:s});o["@language"]=f.toLowerCase()}c["@language"]=!0}for(var h in s)A(o,s,h,c);e.cache.activeCtx&&e.cache.activeCtx.set(t,s,o)}else o=t=U(n)}return o};var Ae=function(){var t={subject:"s",object:"o",name:"g"},r=function(e){e=e||{},this.name="URDNA2015",this.options=e,this.blankNodeInfo={},this.hashToBlankNodes={},this.canonicalIssuer=new ue("_:c14n"),this.quads=[],this.schedule={},this.schedule.MAX_DEPTH="maxCallStackDepth"in e?e.maxCallStackDepth:500,this.schedule.MAX_TOTAL_DEPTH="maxTotalCallStackDepth"in e?e.maxCallStackDepth:4294967295,this.schedule.depth=0,this.schedule.totalDepth=0,this.schedule.timeSlice="timeSlice"in e?e.timeSlice:10};return r.prototype.doWork=function(t,r){var n=this.schedule;if(n.totalDepth>=n.MAX_TOTAL_DEPTH)return r(new Error("Maximum total call stack depth exceeded; normalization aborting."));!function i(){if(n.depth===n.MAX_DEPTH)return n.depth=0,n.running=!1,e.nextTick(i);var o=(new Date).getTime();if(n.running||(n.start=(new Date).getTime(),n.deadline=n.start+n.timeSlice),o<n.deadline)return n.running=!0,n.depth++,n.totalDepth++,t(function(e,t){n.depth--,n.totalDepth--,r(e,t)});n.depth=0,n.running=!1,e.setImmediate(i)}()},r.prototype.forEach=function(e,t,r){var n,i,o=this,a=0;if(z(e))i=e.length,n=function(){return a!==i&&(n.value=e[a++],n.key=a,!0)};else{var s=Object.keys(e);i=s.length,n=function(){return a!==i&&(n.key=s[a++],n.value=e[n.key],!0)}}!function e(i,a){return i?r(i):n()?o.doWork(function(){t(n.value,n.key,e)}):void r()}()},r.prototype.waterfall=function(e,t){var r=this;r.forEach(e,function(e,t,n){r.doWork(e,n)},t)},r.prototype.whilst=function(e,t,r){var n=this;!function i(o){return o?r(o):e()?void n.doWork(t,i):r()}()},r.prototype.main=function(e,t){var r=this;r.schedule.start=(new Date).getTime();var n;if(r.options.format&&"application/nquads"!==r.options.format)return t(new je("Unknown output format.","jsonld.UnknownFormat",{format:r.options.format}));var i={};r.waterfall([function(t){r.forEach(e,function(e,t,n){"@default"===t&&(t=null),r.forEach(e,function(e,n,o){null!==t&&(0===t.indexOf("_:")?e.name={type:"blank node",value:t}:e.name={type:"IRI",value:t}),r.quads.push(e),r.forEachComponent(e,function(t){if("blank node"===t.type){var n=t.value;n in r.blankNodeInfo?r.blankNodeInfo[n].quads.push(e):(i[n]=!0,r.blankNodeInfo[n]={quads:[e]})}}),o()},n)},t)},function(e){var t=!0;r.whilst(function(){return t},function(e){t=!1,r.hashToBlankNodes={},r.waterfall([function(e){r.forEach(i,function(e,t,n){r.hashFirstDegreeQuads(t,function(e,i){if(e)return n(e);i in r.hashToBlankNodes?r.hashToBlankNodes[i].push(t):r.hashToBlankNodes[i]=[t],n()})},e)},function(e){var n=Object.keys(r.hashToBlankNodes).sort();r.forEach(n,function(e,n,o){var a=r.hashToBlankNodes[e];if(a.length>1)return o();var s=a[0];r.canonicalIssuer.getId(s),delete i[s],delete r.hashToBlankNodes[e],t=!0,o()},e)}],e)},e)},function(e){var t=Object.keys(r.hashToBlankNodes).sort();r.forEach(t,function(e,t,n){var i=[],o=r.hashToBlankNodes[e];r.waterfall([function(e){r.forEach(o,function(e,t,n){if(r.canonicalIssuer.hasId(e))return n();var o=new ue("_:b");o.getId(e),r.hashNDegreeQuads(e,o,function(e,t){if(e)return n(e);i.push(t),n()})},e)},function(e){i.sort(function(e,t){return e.hash<t.hash?-1:e.hash>t.hash?1:0}),r.forEach(i,function(e,t,n){for(var i in e.issuer.existing)r.canonicalIssuer.getId(i);n()},e)}],n)},e)},function(e){var t=[];r.waterfall([function(e){r.forEach(r.quads,function(e,n,i){r.forEachComponent(e,function(e){"blank node"===e.type&&0!==e.value.indexOf(r.canonicalIssuer.prefix)&&(e.value=r.canonicalIssuer.getId(e.value))}),t.push(ae(e)),i()},e)},function(e){if(t.sort(),"application/nquads"===r.options.format)return n=t.join(""),e();n=ie(t.join("")),e()}],e)}],function(e){t(e,n)})},r.prototype.hashFirstDegreeQuads=function(e,t){var r=this,n=r.blankNodeInfo[e];if("hash"in n)return t(null,n.hash);var i=[],o=n.quads;r.forEach(o,function(t,n,o){var a={predicate:t.predicate};r.forEachComponent(t,function(t,n){a[n]=r.modifyFirstDegreeComponent(e,t,n)}),i.push(ae(a)),o()},function(e){if(e)return t(e);i.sort(),n.hash=Me.hashNQuads(r.name,i),t(null,n.hash)})},r.prototype.modifyFirstDegreeComponent=function(e,t){return"blank node"!==t.type?t:(t=te(t),t.value=t.value===e?"_:a":"_:z",t)},r.prototype.hashRelatedBlankNode=function(e,t,r,n,i){var o,a=this;a.waterfall([function(t){return a.canonicalIssuer.hasId(e)?(o=a.canonicalIssuer.getId(e),t()):r.hasId(e)?(o=r.getId(e),t()):void a.hashFirstDegreeQuads(e,function(e,r){if(e)return t(e);o=r,t()})}],function(e){if(e)return i(e);var r=new Me(a.name);return r.update(n),"g"!==n&&r.update(a.getRelatedPredicate(t)),r.update(o),i(null,r.digest())})},r.prototype.getRelatedPredicate=function(e){return"<"+e.predicate.value+">"},r.prototype.hashNDegreeQuads=function(e,t,r){var n,i=this,o=new Me(i.name);i.waterfall([function(r){i.createHashToRelated(e,t,function(e,t){if(e)return r(e);n=t,r()})},function(e){var r=Object.keys(n).sort();i.forEach(r,function(e,r,a){o.update(e);var s,u="",c=new De(n[e]);i.whilst(function(){return c.hasNext()},function(e){var r=c.next(),n=t.clone(),o="",a=[];i.waterfall([function(t){i.forEach(r,function(t,r,s){if(i.canonicalIssuer.hasId(t)?o+=i.canonicalIssuer.getId(t):(n.hasId(t)||a.push(t),o+=n.getId(t)),0!==u.length&&o.length>=u.length&&o>u)return e();s()},t)},function(t){i.forEach(a,function(t,r,a){i.hashNDegreeQuads(t,n,function(r,i){return r?a(r):(o+=n.getId(t),o+="<"+i.hash+">",n=i.issuer,0!==u.length&&o.length>=u.length&&o>u?e():void a())})},t)},function(e){(0===u.length||o<u)&&(u=o,s=n),e()}],e)},function(e){if(e)return a(e);o.update(u),t=s,a()})},e)}],function(e){r(e,{hash:o.digest(),issuer:t})})},r.prototype.createHashToRelated=function(e,r,n){var i=this,o={},a=i.blankNodeInfo[e].quads;i.forEach(a,function(n,a,s){i.forEach(n,function(a,s,u){if("predicate"===s||"blank node"!==a.type||a.value===e)return u();var c=a.value,l=t[s];i.hashRelatedBlankNode(c,n,r,l,function(e,t){if(e)return u(e);t in o?o[t].push(c):o[t]=[c],u()})},s)},function(e){n(e,o)})},r.prototype.forEachComponent=function(e,t){for(var r in e)"predicate"!==r&&t(e[r],r,e)},r}(),Le=function(){var e=function(e){Ae.call(this,e),this.name="URGNA2012"};return e.prototype=new Ae,e.prototype.modifyFirstDegreeComponent=function(e,t,r){return"blank node"!==t.type?t:(t=te(t),t.value="name"===r?"_:g":t.value===e?"_:a":"_:z",t)},e.prototype.getRelatedPredicate=function(e){return e.predicate.value},e.prototype.createHashToRelated=function(e,t,r){var n=this,i={},o=n.blankNodeInfo[e].quads;n.forEach(o,function(r,o,a){var s,u;if("blank node"===r.subject.type&&r.subject.value!==e)u=r.subject.value,s="p";else{if("blank node"!==r.object.type||r.object.value===e)return a();u=r.object.value,s="r"}n.hashRelatedBlankNode(u,r,t,s,function(e,t){t in i?i[t].push(u):i[t]=[u],a()})},function(e){r(e,i)})},e}();Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on non-object");var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}),e.registerRDFParser("application/nquads",ie),e.registerRDFParser("rdfa-api",se),e.IdentifierIssuer=ue,e.UniqueNamer=ue,ue.prototype.clone=function(){var e=new ue(this.prefix);return e.counter=this.counter,e.existing=te(this.existing),e},ue.prototype.getId=function(e){if(e&&e in this.existing)return this.existing[e];var t=this.prefix+this.counter;return this.counter+=1,e&&(this.existing[e]=t),t},ue.prototype.getName=ue.prototype.getName,ue.prototype.hasId=function(e){return e in this.existing},ue.prototype.isNamed=ue.prototype.hasId;var De=function(e){this.list=e.sort(),this.done=!1,this.left={};for(var t=0;t<e.length;++t)this.left[e[t]]=!0};De.prototype.hasNext=function(){return!this.done},De.prototype.next=function(){for(var e=this.list.slice(),t=null,r=0,n=this.list.length,i=0;i<n;++i){var o=this.list[i],a=this.left[o];(null===t||o>t)&&(a&&i>0&&o>this.list[i-1]||!a&&i<n-1&&o>this.list[i+1])&&(t=o,r=i)}if(null===t)this.done=!0;else{var s=this.left[t]?r-1:r+1;this.list[r]=this.list[s],this.list[s]=t;for(var i=0;i<n;++i)this.list[i]>t&&(this.left[this.list[i]]=!this.left[this.list[i]])}return e};var Me=function(e){if(!(this instanceof Me))return new Me(e);if(["URDNA2015","URGNA2012"].indexOf(e)===-1)throw new Error("Invalid RDF Dataset Normalization algorithm: "+e);Me._init.call(this,e)};if(Me.hashNQuads=function(e,t){for(var r=new Me(e),n=0;n<t.length;++n)r.update(t[n]);return r.digest()},function(e){if(e){var t=r(22);return Me._init=function(e){e="URDNA2015"===e?"sha256":"sha1",this.md=t.createHash(e)},Me.prototype.update=function(e){return this.md.update(e,"utf8")},void(Me.prototype.digest=function(){return this.md.digest("hex")})}Me._init=function(e){e="URDNA2015"===e?new o.Algorithm:new i.Algorithm,this.md=new n(e)},Me.prototype.update=function(e){return this.md.update(e)},Me.prototype.digest=function(){return this.md.digest().toHex()};var n=function(e){if(!(this instanceof n))return new n(e);if(this._algorithm=e,!n._padding||n._padding.length<this._algorithm.blockSize){n._padding=String.fromCharCode(128);for(var t=String.fromCharCode(0),r=64;r>0;)1&r&&(n._padding+=t),(r>>>=1)>0&&(t+=t)}this.start()};n.prototype.start=function(){this.messageLength=0,this.fullMessageLength=[];for(var e=this._algorithm.messageLengthSize/4,t=0;t<e;++t)this.fullMessageLength.push(0);return this._input=new n.ByteBuffer,this.state=this._algorithm.start(),this},n.prototype.update=function(e){e=new n.ByteBuffer(unescape(encodeURIComponent(e))),this.messageLength+=e.length();var t=e.length();t=[t/4294967296>>>0,t>>>0];for(var r=this.fullMessageLength.length-1;r>=0;--r)this.fullMessageLength[r]+=t[1],t[1]=t[0]+(this.fullMessageLength[r]/4294967296>>>0),this.fullMessageLength[r]=this.fullMessageLength[r]>>>0,t[0]=t[1]/4294967296>>>0;for(this._input.putBytes(e.bytes());this._input.length()>=this._algorithm.blockSize;)this.state=this._algorithm.digest(this.state,this._input);return(this._input.read>2048||0===this._input.length())&&this._input.compact(),this},n.prototype.digest=function(){var e=new n.ByteBuffer;e.putBytes(this._input.bytes());var t=this.fullMessageLength[this.fullMessageLength.length-1]+this._algorithm.messageLengthSize,r=t&this._algorithm.blockSize-1;e.putBytes(n._padding.substr(0,this._algorithm.blockSize-r));for(var i=new n.ByteBuffer,o=0;o<this.fullMessageLength.length;++o)i.putInt32(this.fullMessageLength[o]<<3|this.fullMessageLength[o+1]>>>28);this._algorithm.writeMessageLength(e,i);var a=this._algorithm.digest(this.state.copy(),e),s=new n.ByteBuffer;return a.write(s),s},n.ByteBuffer=function(e){this.data="string"==typeof e?e:"",this.read=0},n.ByteBuffer.prototype.putInt32=function(e){this.data+=String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)},n.ByteBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},n.ByteBuffer.prototype.putBytes=function(e){this.data+=e},n.ByteBuffer.prototype.bytes=function(){return this.data.slice(this.read)},n.ByteBuffer.prototype.length=function(){return this.data.length-this.read},n.ByteBuffer.prototype.compact=function(){this.data=this.data.slice(this.read),this.read=0},n.ByteBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e};var i={_w:null};i.Algorithm=function(){this.name="sha1",this.blockSize=64,this.digestLength=20,this.messageLengthSize=8},i.Algorithm.prototype.start=function(){return i._w||(i._w=new Array(80)),i._createState()},i.Algorithm.prototype.writeMessageLength=function(e,t){e.putBytes(t.bytes())},i.Algorithm.prototype.digest=function(e,t){for(var r,n,o,a,s,u,c,l,f=t.length(),h=i._w;f>=64;){for(n=e.h0,o=e.h1,a=e.h2,s=e.h3,u=e.h4,l=0;l<16;++l)r=t.getInt32(),h[l]=r,c=s^o&(a^s),r=(n<<5|n>>>27)+c+u+1518500249+r,u=s,s=a,a=o<<30|o>>>2,o=n,n=r;for(;l<20;++l)r=h[l-3]^h[l-8]^h[l-14]^h[l-16],r=r<<1|r>>>31,h[l]=r,c=s^o&(a^s),r=(n<<5|n>>>27)+c+u+1518500249+r,u=s,s=a,a=o<<30|o>>>2,o=n,n=r;for(;l<32;++l)r=h[l-3]^h[l-8]^h[l-14]^h[l-16],r=r<<1|r>>>31,h[l]=r,c=o^a^s,r=(n<<5|n>>>27)+c+u+1859775393+r,u=s,s=a,a=o<<30|o>>>2,o=n,n=r;for(;l<40;++l)r=h[l-6]^h[l-16]^h[l-28]^h[l-32],r=r<<2|r>>>30,h[l]=r,c=o^a^s,r=(n<<5|n>>>27)+c+u+1859775393+r,u=s,s=a,a=o<<30|o>>>2,o=n,n=r;for(;l<60;++l)r=h[l-6]^h[l-16]^h[l-28]^h[l-32],r=r<<2|r>>>30,h[l]=r,c=o&a|s&(o^a),r=(n<<5|n>>>27)+c+u+2400959708+r,u=s,s=a,a=o<<30|o>>>2,o=n,n=r;for(;l<80;++l)r=h[l-6]^h[l-16]^h[l-28]^h[l-32],r=r<<2|r>>>30,h[l]=r,c=o^a^s,r=(n<<5|n>>>27)+c+u+3395469782+r,u=s,s=a,a=o<<30|o>>>2,o=n,n=r;e.h0=e.h0+n|0,e.h1=e.h1+o|0,e.h2=e.h2+a|0,e.h3=e.h3+s|0,e.h4=e.h4+u|0,f-=64}return e},i._createState=function(){var e={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520};return e.copy=function(){var t=i._createState();return t.h0=e.h0,t.h1=e.h1,t.h2=e.h2,t.h3=e.h3,t.h4=e.h4,t},e.write=function(t){t.putInt32(e.h0),t.putInt32(e.h1),t.putInt32(e.h2),t.putInt32(e.h3),t.putInt32(e.h4)},e};var o={_k:null,_w:null};o.Algorithm=function(){this.name="sha256",this.blockSize=64,this.digestLength=32,this.messageLengthSize=8},o.Algorithm.prototype.start=function(){return o._k||o._init(),o._createState()},o.Algorithm.prototype.writeMessageLength=function(e,t){e.putBytes(t.bytes())},o.Algorithm.prototype.digest=function(e,t){for(var r,n,i,a,s,u,c,l,f,h,p,d,v,y,g,m=t.length(),b=o._k,w=o._w;m>=64;){for(c=0;c<16;++c)w[c]=t.getInt32();for(;c<64;++c)r=w[c-2],r=(r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10,n=w[c-15],n=(n>>>7|n<<25)^(n>>>18|n<<14)^n>>>3,w[c]=r+w[c-7]+n+w[c-16]|0;for(l=e.h0,f=e.h1,h=e.h2,p=e.h3,d=e.h4,v=e.h5,y=e.h6,g=e.h7,c=0;c<64;++c)a=(d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7),s=y^d&(v^y),i=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),u=l&f|h&(l^f),r=g+a+s+b[c]+w[c],n=i+u,g=y,y=v,v=d,d=p+r|0,p=h,h=f,f=l,l=r+n|0;e.h0=e.h0+l|0,e.h1=e.h1+f|0,e.h2=e.h2+h|0,e.h3=e.h3+p|0,e.h4=e.h4+d|0,e.h5=e.h5+v|0,e.h6=e.h6+y|0,e.h7=e.h7+g|0,m-=64}return e},o._createState=function(){var e={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225};return e.copy=function(){var t=o._createState();return t.h0=e.h0,t.h1=e.h1,t.h2=e.h2,t.h3=e.h3,t.h4=e.h4,t.h5=e.h5,t.h6=e.h6,t.h7=e.h7,t},e.write=function(t){t.putInt32(e.h0),t.putInt32(e.h1),t.putInt32(e.h2),t.putInt32(e.h3),t.putInt32(e.h4),t.putInt32(e.h5),t.putInt32(e.h6),t.putInt32(e.h7)},e},o._init=function(){o._k=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o._w=new Array(64)}}(c),!de)var Ue=function(){de=r(22).XMLSerializer};if(e.url={},e.url.parsers={simple:{keys:["href","scheme","authority","path","query","fragment"],regex:/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/},full:{keys:["href","protocol","scheme","authority","auth","user","password","hostname","port","path","directory","file","query","fragment"],regex:/^(([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?(?:(((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/}},e.url.parse=function(t,r){for(var n={},i=e.url.parsers[r||"full"],o=i.regex.exec(t),a=i.keys.length;a--;)n[i.keys[a]]=void 0===o[a]?null:o[a];return n.normalizedPath=ce(n.path,!!n.authority),n},c?e.useDocumentLoader("node"):"undefined"!=typeof XMLHttpRequest&&e.useDocumentLoader("xhr"),c){e.use=function(t){switch(t){case"request":e.request=r(22);break;default:throw new je("Unknown extension.","jsonld.UnknownExtension",{extension:t})}};var Pe={exports:{},filename:a};r(22)(Pe,"version"),e.version=Pe.exports.version}return e},h=function(){return f(function(){return h()})};!c&&r(262)?(s=[],void 0!==(u=function(){return f(h),h}.apply(t,s))&&(e.exports=u)):(f(h),void 0!==e&&e.exports&&(e.exports=h),l&&("undefined"==typeof jsonld?jsonld=jsonldjs=h:jsonldjs=h))}()}).call(t,r(4),r(2),r(42).setImmediate,"/")},function(e,t,r){var n,n;n=function(){};var t=e.exports={Lexer:n("./lib/N3Lexer"),Parser:n("./lib/N3Parser"),Writer:n("./lib/N3Writer"),Store:n("./lib/N3Store"),StreamParser:n("./lib/N3StreamParser"),StreamWriter:n("./lib/N3StreamWriter"),Util:n("./lib/N3Util")};Object.keys(t).forEach(function(e){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return delete t[e],t[e]=r(226)("./N3"+e)}})})},function(e,t,r){function n(e,t){if(!(this instanceof n))return new n(e,t);this._size=0,this._graphs=Object.create(null),this._entities=Object.create(null),this._entities["><"]=0,this._entityCount=0,this._blankNodeIndex=0,t||!e||e[0]||(t=e,e=null),this._prefixes=Object.create(null),t&&t.prefixes&&this.addPrefixes(t.prefixes),e&&this.addTriples(e)}var i=r(89).expandPrefixedName;n.prototype={get size(){var e=this._size;if(null!==e)return e;var t,r,n=this._graphs;for(var i in n)for(var o in t=n[i].subjects)for(var a in r=t[o])e+=Object.keys(r[a]).length;return this._size=e},_addToIndex:function(e,t,r,n){var i=e[t]||(e[t]={});(i[r]||(i[r]={}))[n]=null},_removeFromIndex:function(e,t,r,n){var i,o=e[t],a=o[r];delete a[n];for(i in a)return;delete o[r];for(i in o)return;delete e[t]},_findInIndex:function(e,t,r,n,i,o,a,s){var u,c,l,f=[],h=Object.keys(this._entities);t&&((u=e,e={})[t]=u[t]);for(var p in e){var d=h[p];if(c=e[p]){r&&((u=c,c={})[r]=u[r]);for(var v in c){var y=h[v];if(l=c[v])for(var g=(n?n in l?[n]:[]:Object.keys(l)),m=g.length-1;m>=0;m--){var b={subject:"",predicate:"",object:"",graph:s};b[i]=d,b[o]=y,b[a]=h[g[m]],f.push(b)}}}}return f},_countInIndex:function(e,t,r,n){var i,o,a,s=0;t&&((i=e,e={})[t]=i[t]);for(var u in e)if(o=e[u]){r&&((i=o,o={})[r]=i[r]);for(var c in o)(a=o[c])&&(n?n in a&&s++:s+=Object.keys(a).length)}return s},addTriple:function(e,t,r,n){t||(n=e.graph,r=e.object,t=e.predicate,e=e.subject),n=n||"";var i=this._graphs[n];i||(i=this._graphs[n]={subjects:{},predicates:{},objects:{}},Object.freeze(i));var o=this._entities;e=o[e]||(o[e]=++this._entityCount),t=o[t]||(o[t]=++this._entityCount),r=o[r]||(o[r]=++this._entityCount),this._addToIndex(i.subjects,e,t,r),this._addToIndex(i.predicates,t,r,e),this._addToIndex(i.objects,r,e,t),this._size=null},addTriples:function(e){for(var t=e.length-1;t>=0;t--)this.addTriple(e[t])},addPrefix:function(e,t){this._prefixes[e]=t},addPrefixes:function(e){for(var t in e)this.addPrefix(t,e[t])},removeTriple:function(e,t,r,n){t||(n=e.graph,r=e.object,t=e.predicate,e=e.subject),n=n||"";var i,o=this._entities,a=this._graphs;if((e=o[e])&&(t=o[t])&&(r=o[r])&&(i=a[n])){var s,u;if((s=i.subjects[e])&&(u=s[t])&&r in u){this._removeFromIndex(i.subjects,e,t,r),this._removeFromIndex(i.predicates,t,r,e),this._removeFromIndex(i.objects,r,e,t),null!==this._size&&this._size--;for(e in i.subjects)return;delete a[n]}}},removeTriples:function(e){for(var t=e.length-1;t>=0;t--)this.removeTriple(e[t])},find:function(e,t,r,n){var o=this._prefixes;return this.findByIRI(i(e,o),i(t,o),i(r,o),i(n,o))},findByIRI:function(e,t,r,n){n=n||"";var i=this._graphs[n],o=this._entities;return i?e&&!(e=o[e])?[]:t&&!(t=o[t])?[]:r&&!(r=o[r])?[]:e?r?this._findInIndex(i.objects,r,e,t,"object","subject","predicate",n):this._findInIndex(i.subjects,e,t,null,"subject","predicate","object",n):t?this._findInIndex(i.predicates,t,r,null,"predicate","object","subject",n):r?this._findInIndex(i.objects,r,null,null,"object","subject","predicate",n):this._findInIndex(i.subjects,null,null,null,"subject","predicate","object",n):[]},count:function(e,t,r,n){var o=this._prefixes;return this.countByIRI(i(e,o),i(t,o),i(r,o),i(n,o))},countByIRI:function(e,t,r,n){n=n||"";var i=this._graphs[n],o=this._entities;return i?e&&!(e=o[e])?0:t&&!(t=o[t])?0:r&&!(r=o[r])?0:e?r?this._countInIndex(i.objects,r,e,t):this._countInIndex(i.subjects,e,t,r):t?this._countInIndex(i.predicates,t,r,e):this._countInIndex(i.objects,r,e,t):0},createBlankNode:function(e){var t,r;if(e)for(t=e="_:"+e,r=1;this._entities[t];)t=e+r++;else do{t="_:b"+this._blankNodeIndex++}while(this._entities[t]);return this._entities[t]=++this._entityCount,t}},e.exports=n},function(e,t,r){function n(e){if(!(this instanceof n))return new n(e);i.call(this,{decodeStrings:!0}),this._readableState.objectMode=!0;var t=this,r=new a(e);r.parse(function(e,r){r&&t.push(r)||e&&t.emit("error",e)},this.emit.bind(this,"prefix")),this._transform=function(e,t,n){r.addChunk(e),n()},this._flush=function(e){r.end(),e()}}var i=r(41).Transform,o=r(149),a=r(88);o.inherits(n,i),e.exports=n},function(e,t,r){function n(e){if(!(this instanceof n))return new n(e);i.call(this,{encoding:"utf8"}),this._writableState.objectMode=!0;var t=this,r=new a({write:function(e,r,n){t.push(e),n&&n()},end:function(e){t.push(null),e&&e()}},e);this._transform=function(e,t,n){r.addTriple(e,n)},this._flush=function(e){r.end(e)}}var i=r(41).Transform,o=r(149),a=r(90);o.inherits(n,i),e.exports=n},function(e,t,r){"use strict";function n(e,t){var r,n=s.Parser(),i=s.Writer({format:"N-Quads"});o.waterfall([function(t){n.parse(e,t)},function(e,t,r){null!==e&&i.addTriple(e),"function"==typeof r&&i.end(r)},function(e,t){try{a.fromRDF(e,{format:"application/nquads"},t)}catch(e){t(e)}},function(e,n){r=JSON.stringify(e),t(null,r)}],function(e,n){t(e,r)})}function i(e,t){var r,n=s.Parser(),i=s.Writer({format:"N-Quads"});o.waterfall([function(t){n.parse(e,t)},function(e,t,r){null!==e&&i.addTriple(e),"function"==typeof r&&i.end(r)},function(e,n){r=e,t(null,r)}],function(e,n){t(e,r)})}e.exports.convertToJson=n,e.exports.convertToNQuads=i;var o=r(153),a=r(129),s=r(130)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(23),u=r(30),c=r(55),l=r(31),f=r(24),h=r(5),p=r(6),d=r(96),v=r(59),y=r(60),g=function(e){function t(e,r,o,a){n(this,t);var s=i(this,Object.getPrototypeOf(t).call(this));return s.termType=t.termType,s.statements=e||[],s.constraints=r||[],s.initBindings=o||[],s.optional=a||[],s}return o(t,e),a(t,[{key:"add",value:function(e,t,r,n){return this.statements.push(new v(e,t,r,n))}},{key:"addStatement",value:function(e){return this.statements.push(e)}},{key:"bnode",value:function(e){return new s(e)}},{key:"bottomTypeURIs",value:function(e){var t,r,n,i,o,a,s,u;t=[];for(o in e)if(e.hasOwnProperty(o)){for(u=e[o],s=this.each(void 0,this.sym("http://www.w3.org/2000/01/rdf-schema#subClassOf"),this.sym(o)),r=!0,i=0,a=s.length;i<a;i++)if(n=s[i],n.uri in e){r=!1;break}r&&(t[o]=u)}return t}},{key:"collection",value:function(){return new c}},{key:"each",value:function(e,t,r,n){var i,o,a,s,u,c,l,f,h,p=[],d=this.statementsMatching(e,t,r,n,!1);if(null==e)for(o=0,c=d.length;o<c;o++)i=d[o],p.push(i.subject);else if(null==t)for(a=0,l=d.length;a<l;a++)i=d[a],p.push(i.predicate);else if(null==r)for(s=0,f=d.length;s<f;s++)i=d[s],p.push(i.object);else if(null==n)for(u=0,h=d.length;u<h;u++)i=d[u],p.push(i.why);return p}},{key:"equals",value:function(e){return!!e&&this.hashString()===e.hashString()}},{key:"findMembersNT",value:function(e){var t,r,n,i,o,a,s,u,c,l,f,h,p,d,v,y,g,m,b,w,_;m={},m[e.toNT()]=!0,c={},h=this.transitiveClosure(m,this.sym("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!0);for(w in h)if(h.hasOwnProperty(w)){for(p=this.statementsMatching(void 0,this.sym("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),this.fromNT(w)),t=0,n=p.length;t<n;t++)b=p[t],c[b.subject.toNT()]=b;for(d=this.each(void 0,this.sym("http://www.w3.org/2000/01/rdf-schema#domain"),this.fromNT(w)),r=0,i=d.length;r<i;r++)for(l=d[r],v=this.statementsMatching(void 0,l),u=0,o=v.length;u<o;u++)b=v[u],c[b.subject.toNT()]=b;for(y=this.each(void 0,this.sym("http://www.w3.org/2000/01/rdf-schema#range"),this.fromNT(w)),f=0,a=y.length;f<a;f++)for(l=y[f],g=this.statementsMatching(void 0,l),_=0,s=g.length;_<s;_++)b=g[_],c[b.object.toNT()]=b}return c}},{key:"findMemberURIs",value:function(e){return this.NTtoURI(this.findMembersNT(e))}},{key:"findSubClassesNT",value:function(e){var t={};return t[e.toNT()]=!0,this.transitiveClosure(t,this.sym("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!0)}},{key:"findSuperClassesNT",value:function(e){var t={};return t[e.toNT()]=!0,this.transitiveClosure(t,this.sym("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!1)}},{key:"findTypesNT",value:function(e){var t,r,n,i,o,a,s,u,c,l,f,h,p,d,v,y,g;for(f="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",g=[],h=this.statementsMatching(e,void 0,void 0),r=0,i=h.length;r<i;r++)if(y=h[r],y.predicate.uri===f)g[y.object.toNT()]=y;else for(p=this.each(y.predicate,this.sym("http://www.w3.org/2000/01/rdf-schema#domain")),n=0,o=p.length;n<o;n++)l=p[n],g[l.toNT()]=y;for(d=this.statementsMatching(void 0,void 0,e),u=0,a=d.length;u<a;u++)for(y=d[u],v=this.each(y.predicate,this.sym("http://www.w3.org/2000/01/rdf-schema#range")),c=0,s=v.length;c<s;c++)t=v[c],g[t.toNT()]=y;return this.transitiveClosure(g,this.sym("http://www.w3.org/2000/01/rdf-schema#subClassOf"),!1)}},{key:"findTypeURIs",value:function(e){return this.NTtoURI(this.findTypesNT(e))}},{key:"connectedStatements",value:function(e,t,r){r=r||[];for(var n=[e],i=[],o=[],a=[],s=this;n.length;)!function(e){var u=function(e){"BlankNode"!==e.termType||i[e.value]||(i[e.value]=!0,n.push(e))},c=s.statementsMatching(null,null,e,t).concat(s.statementsMatching(e,null,null,t));c=c.filter(function(e){if(r[e.predicate.uri])return!1;var t=e.toNT();return!o[t]&&(o[t]=!0,!0)}),c.forEach(function(e,t){u(e.subject),u(e.object)}),a=a.concat(c)}(n.shift());return a}},{key:"formula",value:function(){return new t}},{key:"fromNT",value:function(e){var t,r,n,i;switch(e[0]){case"<":return this.sym(e.slice(1,-1));case'"':if(n=void 0,t=void 0,(r=e.lastIndexOf('"'))<e.length-1)if("@"===e[r+1])n=e.slice(r+2);else{if("^^"!==e.slice(r+1,r+3))throw new Error("Can't convert string from NT: "+e);t=this.fromNT(e.slice(r+3))}return e=e.slice(1,r),e=e.replace(/\\"/g,'"'),e=e.replace(/\\n/g,"\n"),e=e.replace(/\\\\/g,"\\"),this.literal(e,n,t);case"_":return i=new s,i.id=parseInt(e.slice(3),10),s.nextId--,i;case"?":return new y(e.slice(1))}throw new Error("Can't convert from NT: "+e)}},{key:"holds",value:function(e,t,r,n){var i;if(1===arguments.length){if(!e)return!0;if(e instanceof Array){for(i=0;i<e.length;i++)if(!this.holds(e[i]))return!1;return!0}if(e instanceof v)return this.holds(e.subject,e.predicate,e.object,e.why);if(e.statements)return this.holds(e.statements)}return null!=this.anyStatementMatching(e,t,r,n)}},{key:"holdsStatement",value:function(e){return this.holds(e.subject,e.predicate,e.object,e.why)}},{key:"list",value:function(e){var t=new c;return e.forEach(function(e){t.append(e)}),t}},{key:"literal",value:function(e,t,r){return new l(""+e,t,r)}},{key:"NTtoURI",value:function(e){var t,r,n={};for(t in e)e.hasOwnProperty(t)&&(r=e[t],"<"===t[0]&&(n[t.slice(1,-1)]=r));return n}},{key:"serialize",value:function(e,t,r){var n,i,o;switch(o=d(this),o.suggestNamespaces(this.namespaces),o.setBase(e),i=r?this.statementsMatching(void 0,void 0,void 0,r):this.statements,null!=t?t:"text/n3"){case"application/rdf+xml":n=o.statementsToXML(i);break;case"text/n3":case"text/turtle":n=o.statementsToN3(i);break;default:throw new Error("serialize: Content-type "+t+" not supported.")}return n}},{key:"substitute",value:function(e){var r=this.statements.map(function(t){return t.substitute(e)});console.log("formula subs statmnts:"+r);var n=new t;return n.add(r),console.log("indexed-form subs formula:"+n),n}},{key:"sym",value:function(e,t){if(t)throw new Error("This feature (kb.sym with 2 args) is removed. Do not assume prefix mappings.");return new h(e)}},{key:"the",value:function(e,t,r,n){var i=this.any(e,t,r,n);return null==i&&f.error("No value found for the() {"+e+" "+t+" "+r+"}."),i}},{key:"transitiveClosure",value:function(e,t,r){var n,i,o,a,s,u,c={};Object.assign(c,e);for(var l={};;){if(null==(u=function(){for(var e in c)if(c.hasOwnProperty(e))return e}()))return l;for(s=r?this.each(void 0,t,this.fromNT(u)):this.each(this.fromNT(u),t),i=0,o=s.length;i<o;i++)n=s[i],(a=n.toNT())in l||a in c||(c[a]=c[u]);l[u]=c[u],delete c[u]}}},{key:"topTypeURIs",value:function(e){var t,r,n,i,o,a,s,u;s=[];for(n in e)if(e.hasOwnProperty(n)){for(u=e[n],o=0,a=this.each(this.sym(n),this.sym("http://www.w3.org/2000/01/rdf-schema#subClassOf")),t=0,i=a.length;t<i;t++)if(r=a[t],"http://www.w3.org/2000/01/rdf-schema#Resource"!==r.uri){o++;break}o||(s[n]=u)}return s["http://www.w3.org/2000/01/rdf-schema#Resource"]&&delete s["http://www.w3.org/2000/01/rdf-schema#Resource"],s["http://www.w3.org/2002/07/owl#Thing"]&&delete s["http://www.w3.org/2002/07/owl#Thing"],s}},{key:"toString",value:function(){return"{"+this.statements.join("\n")+"}"}},{key:"whether",value:function(e,t,r,n){return this.statementsMatching(e,t,r,n,!1).length}}]),t}(p);g.termType="formula",g.prototype.classOrder=u.Formula,g.prototype.isVar=0,g.prototype.ns=r(40),g.prototype.variable=function(e){return new y(e)},e.exports=g},function(e,t,r){"use strict";function n(e,t,r,n,d){function v(){d&&d(null,t)}function y(e,r){e&&d(e,t);try{_.parse(r,g)}catch(e){d(e,t)}}function g(e,r,n){if(e&&d(e,t),r)x.push(r);else{for(var i=0;i<x.length;i++)m(t,x[i]);d(null,t)}}function m(e,t){var r=b(t.subject),n=b(t.predicate),i=b(t.object),o=null;t.graph&&(o=b(t.graph)),e.add(r,n,i,o)}function b(e){var t;if(s.Util.isLiteral(e)){t=s.Util.getLiteralValue(e);var r=s.Util.getLiteralLanguage(e),n=new c(s.Util.getLiteralType(e));return new a(t,r,n)}return s.Util.isIRI(e)?new c(e):s.Util.isBlank(e)?(t=e.substring(2,e.length),new i(t)):null}n=n||"text/turtle";try{if("text/n3"===n||"text/turtle"===n){u(t,t,r,r,null,null,"",null).loadBuf(e),v()}else if("application/rdf+xml"===n){var w=new f(t);w.parse(p.parseXML(e),r,t.sym(r)),v()}else if("application/xhtml+xml"===n)l(p.parseXML(e,{contentType:"application/xhtml+xml"}),t,r),v();else if("text/html"===n)l(p.parseXML(e,{contentType:"text/html"}),t,r),v();else if("application/sparql-update"===n)h(e,t,r),v();else{if("application/ld+json"!==n&&"application/nquads"!==n&&"application/n-quads"!==n)throw new Error("Don't know how to parse "+n+" yet");var _=s.Parser(),x=[];if("application/ld+json"===n){var k;try{k=JSON.parse(e)}catch(e){d(e,null)}o.toRDF(k,{format:"application/nquads"},y)}else y(null,e)}}catch(e){!function(e){if("application/ld+json"!==n||"application/nquads"!==n||"application/n-quads"!==n){if(!d)throw new Error("Error trying to parse <"+r+"> as "+n+":\n"+e+":\n"+e.stack);d(e,t)}}(e)}}e.exports=n;var i=r(23),o=r(129),a=r(31),s=r(130),u=r(57),c=r(5),l=r(94).parseRDFaDOM,f=r(95),h=r(137),p=r(13)},function(e,t,r){"use strict";function n(e,t,r){var n,a,s,u=["INSERT","DELETE","WHERE"],c=o("http://www.w3.org/ns/pim/patch#"),l=i(t,t,r,r,null,null,"",null),f={},h=function(e,t,r,n,i){return"Line "+(t+1)+" of <"+e+">: Bad syntax:\n   "+i+'\n   at: "'+r.slice(n,n+30)+'"'};n=0;var p=t.sym(r+"#query");for(f.query=p;;){if((a=l.skipSpace(e,n))<0)return f;if(";"===e[a]){if((n=l.skipSpace(e,a+1))<0)return f;a=n}var d=!1;for(s=0;s<u.length;s++){var v=u[s];if(e.slice(a,a+v.length)===v){if((n=l.skipSpace(e,a+v.length))<0)throw h(l._thisDoc,l.lines,e,a+v.length,"found EOF, needed {...} after "+v);if(("INSERT"===v||"DELETE"===v)&&"DATA"===e.slice(n,n+4)){if((a=l.skipSpace(e,n+4))<0)throw h(l._thisDoc,l.lines,e,n+4,"needed {...} after INSERT DATA "+v);n=a}var y=[];if((a=l.node(e,n,y))<0)throw h(l._thisDoc,l.lines,e,n,"bad syntax or EOF in {...} after "+v);f[v.toLowerCase()]=y[0],t.add(p,c(v.toLowerCase()),y[0]),d=!0,n=a}}if(!d&&"@prefix"===e.slice(a,a+7)){if((n=l.directive(e,a))<0)throw h(l._thisDoc,l.lines,e,n,"bad syntax or EOF after @prefix ");n=l.checkDot(e,n),d=!0}if(!d)throw h(l._thisDoc,l.lines,e,a,"Unknown syntax at start of statememt: '"+e.slice(a).slice(0,20)+"'")}}e.exports=n;var i=r(57),o=r(40)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(39).namedNode,a=function(){function e(t,r){n(this,e),this.parent=t,this.via=r,this.connected=!1,this.pending={},this.subscribed={},this.socket={};try{this.socket=new WebSocket(r),this.socket.onopen=this.onOpen,this.socket.onclose=this.onClose,this.socket.onmessage=this.onMessage,this.socket.onerror=this.onError}catch(e){this.onError(e)}}return i(e,[{key:"_decode",value:function(e){var t,r,n,i,o,a,s;i={},o=function(){var r,n,i,o;for(i=e.split("&"),o=[],r=0,n=i.length;r<n;r++)t=i[r],o.push(t.split("="));return o}();for(r in o)t=o[r],a=[decodeURIComponent(t[0]),decodeURIComponent(t[1])],n=a[0],s=a[1],null==i[n]&&(i[n]=[]),i[n].push(s);return i}},{key:"_send",value:function(e,t,r){var n,i;return i=[e,t,r].join(" "),"function"==typeof(n=this.socket).send?n.send(i):void 0}},{key:"_subscribe",value:function(e){return this._send("sub",e,""),this.subscribed[e]=!0,this.subscribed[e]}},{key:"onClose",value:function(e){var t;this.connected=!1;for(t in this.subscribed)this.pending[t]=!0;return this.subscribed={},this.subscribed}},{key:"onError",value:function(e){throw new Error("onError"+e)}},{key:"onMessage",value:function(e){var t,r;return r=e.data.split(" "),"ping"===r[0]?"function"==typeof(t=this.socket).send?t.send("pong "+r.slice(1).join(" ")):void 0:"pub"===r[0]?this.parent.onUpdate(r[1],this._decode(r[2])):void 0}},{key:"onOpen",value:function(e){var t,r;this.connected=!0,t=[];for(r in this.pending)delete this.pending[r],t.push(this._subscribe(r));return t}},{key:"subscribe",value:function(e){return this.connected?this._subscribe(e):(this.pending[e]=!0,this.pending[e])}}]),e}(),s=function(){function e(t){n(this,e),this.fetcher=t,this.graph={},this.via={},this.fetcher.addCallback("headers",this.onHeaders)}return i(e,[{key:"onHeaders",value:function(e){var t,r,n;return null==e.headers||("undefined"==typeof WebSocket||null===WebSocket||(t=e.headers.etag,n=e.headers["updates-via"],r=e.uri,t&&n&&(this.graph[r]={etag:t,via:n},this.register(n,r)),!0))}},{key:"onUpdate",value:function(e,t){return this.fetcher.refresh(o(e))}},{key:"register",value:function(e,t){return null==this.via[e]&&(this.via[e]=new a(this,e)),this.via[e].subscribe(t)}}]),e}();e.exports.UpdatesSocket=a,e.exports.UpdatesVia=s},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=r(5),o=function e(){n(this,e)};o.boolean=new i("http://www.w3.org/2001/XMLSchema#boolean"),o.dateTime=new i("http://www.w3.org/2001/XMLSchema#dateTime"),o.decimal=new i("http://www.w3.org/2001/XMLSchema#decimal"),o.double=new i("http://www.w3.org/2001/XMLSchema#double"),o.integer=new i("http://www.w3.org/2001/XMLSchema#integer"),o.langString=new i("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),o.string=new i("http://www.w3.org/2001/XMLSchema#string"),e.exports=o},function(e,t,r){"use strict";function n(e){if(!(this instanceof n))return new n(e);i.call(this,e)}e.exports=n;var i=r(98),o=r(38);o.inherits=r(19),o.inherits(n,i),n.prototype._transform=function(e,t,r){r(null,e)}},function(e,t,r){"use strict";(function(t){function n(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?j(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}function i(e,t){O=O||r(25),e=e||{},this.objectMode=!!e.objectMode,t instanceof O&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=~~this.highWaterMark,this.buffer=new F,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(q||(q=r(147).StringDecoder),this.decoder=new q(e.encoding),this.encoding=e.encoding)}function o(e){if(O=O||r(25),!(this instanceof o))return new o(e);this._readableState=new i(e,this),this.readable=!0,e&&"function"==typeof e.read&&(this._read=e.read),C.call(this)}function a(e,t,r,n,i){var o=l(t,r);if(o)e.emit("error",o);else if(null===r)t.reading=!1,f(e,t);else if(t.objectMode||r&&r.length>0)if(t.ended&&!i){var a=new Error("stream.push() after EOF");e.emit("error",a)}else if(t.endEmitted&&i){var u=new Error("stream.unshift() after end event");e.emit("error",u)}else{var c;!t.decoder||i||n||(r=t.decoder.write(r),c=!t.objectMode&&0===r.length),i||(t.reading=!1),c||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&h(e))),d(e,t)}else i||(t.reading=!1);return s(t)}function s(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function u(e){return e>=z?e=z:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function c(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=u(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function l(e,t){var r=null;return L.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function f(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,h(e)}}function h(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(P("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?R(p,e):p(e))}function p(e){P("emit readable"),e.emit("readable"),w(e)}function d(e,t){t.readingMore||(t.readingMore=!0,R(v,e,t))}function v(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(P("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function y(e){return function(){var t=e._readableState;P("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&A(e,"data")&&(t.flowing=!0,w(e))}}function g(e){P("readable nexttick read 0"),e.read(0)}function m(e,t){t.resumeScheduled||(t.resumeScheduled=!0,R(b,e,t))}function b(e,t){t.reading||(P("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),w(e),t.flowing&&!t.reading&&e.read(0)}function w(e){var t=e._readableState;for(P("flow",t.flowing);t.flowing&&null!==e.read(););}function _(e,t){if(0===t.length)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=x(e,t.buffer,t.decoder),r}function x(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?k(e,t):T(e,t),n}function k(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var o=r.data,a=e>o.length?o.length:e;if(a===o.length?i+=o:i+=o.slice(0,e),0===(e-=a)){a===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(a));break}++n}return t.length-=n,i}function T(e,t){var r=D.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var o=n.data,a=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,a),0===(e-=a)){a===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(a));break}++i}return t.length-=i,r}function E(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,R(S,t,e))}function S(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function N(e,t){for(var r=0,n=e.length;r<n;r++)t(e[r],r)}function I(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}e.exports=o;var O,R=r(91),j=r(128);o.ReadableState=i;var C,A=(r(54).EventEmitter,function(e,t){return e.listeners(t).length});!function(){try{C=r(41)}catch(e){}finally{C||(C=r(54).EventEmitter)}}();var L=r(10).Buffer,D=r(67),M=r(38);M.inherits=r(19);var U=r(271),P=void 0;P=U&&U.debuglog?U.debuglog("stream"):function(){};var q,F=r(239);M.inherits(o,C),o.prototype.push=function(e,t){var r=this._readableState;return r.objectMode||"string"!=typeof e||(t=t||r.defaultEncoding)!==r.encoding&&(e=D.from(e,t),t=""),a(this,r,e,t,!1)},o.prototype.unshift=function(e){return a(this,this._readableState,e,"",!0)},o.prototype.isPaused=function(){return this._readableState.flowing===!1},o.prototype.setEncoding=function(e){return q||(q=r(147).StringDecoder),this._readableState.decoder=new q(e),this._readableState.encoding=e,this};var z=8388608;o.prototype.read=function(e){P("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return P("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?E(this):h(this),null;if(0===(e=c(e,t))&&t.ended)return 0===t.length&&E(this),null;var n=t.needReadable;P("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&(n=!0,P("length less than watermark",n)),t.ended||t.reading?(n=!1,P("reading or ended",n)):n&&(P("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=c(r,t)));var i;return i=e>0?_(e,t):null,null===i?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&E(this)),null!==i&&this.emit("data",i),i},o.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},o.prototype.pipe=function(e,r){function i(e){P("onunpipe"),e===h&&a()}function o(){P("onend"),e.end()}function a(){P("cleanup"),e.removeListener("close",c),e.removeListener("finish",l),e.removeListener("drain",g),e.removeListener("error",u),e.removeListener("unpipe",i),h.removeListener("end",o),h.removeListener("end",a),h.removeListener("data",s),m=!0,!p.awaitDrain||e._writableState&&!e._writableState.needDrain||g()}function s(t){P("ondata"),b=!1,!1!==e.write(t)||b||((1===p.pipesCount&&p.pipes===e||p.pipesCount>1&&I(p.pipes,e)!==-1)&&!m&&(P("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++,b=!0),h.pause())}function u(t){P("onerror",t),f(),e.removeListener("error",u),0===A(e,"error")&&e.emit("error",t)}function c(){e.removeListener("finish",l),f()}function l(){P("onfinish"),e.removeListener("close",c),f()}function f(){P("unpipe"),h.unpipe(e)}var h=this,p=this._readableState;switch(p.pipesCount){case 0:p.pipes=e;break;case 1:p.pipes=[p.pipes,e];break;default:p.pipes.push(e)}p.pipesCount+=1,P("pipe count=%d opts=%j",p.pipesCount,r);var d=(!r||r.end!==!1)&&e!==t.stdout&&e!==t.stderr,v=d?o:a;p.endEmitted?R(v):h.once("end",v),e.on("unpipe",i);var g=y(h);e.on("drain",g);var m=!1,b=!1;return h.on("data",s),n(e,"error",u),e.once("close",c),e.once("finish",l),e.emit("pipe",h),p.flowing||(P("pipe resume"),h.resume()),e},o.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var r=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<n;i++)r[i].emit("unpipe",this);return this}var o=I(t.pipes,e);return o===-1?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},o.prototype.on=function(e,t){var r=C.prototype.on.call(this,e,t);if("data"===e)this._readableState.flowing!==!1&&this.resume();else if("readable"===e){var n=this._readableState;n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&h(this):R(g,this))}return r},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){var e=this._readableState;return e.flowing||(P("resume"),e.flowing=!0,m(this,e)),this},o.prototype.pause=function(){return P("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(P("pause"),this._readableState.flowing=!1,this.emit("pause")),this},o.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;e.on("end",function(){if(P("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&n.push(e)}n.push(null)}),e.on("data",function(i){if(P("wrapped data"),t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)){n.push(i)||(r=!0,e.pause())}});for(var i in e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));return N(["error","close","destroy","pause","resume"],function(t){e.on(t,n.emit.bind(n,t))}),n._read=function(t){P("wrapped _read",t),r&&(r=!1,e.resume())},n},o._fromList=_}).call(t,r(4))},function(e,t,r){"use strict";function n(e){var t=r(231)(e);return{acl:t.base("http://www.w3.org/ns/auth/acl#"),app:t.base("http://www.w3.org/ns/solid/app#"),dct:t.base("http://purl.org/dc/terms/"),foaf:t.base("http://xmlns.com/foaf/0.1/"),ldp:t.base("http://www.w3.org/ns/ldp#"),owl:t.base("http://www.w3.org/2002/07/owl#"),pim:t.base("http://www.w3.org/ns/pim/space#"),rdf:t.base("http://www.w3.org/1999/02/22-rdf-syntax-ns#"),rdfs:t.base("http://www.w3.org/2000/01/rdf-schema#"),schema:t.base("http://schema.org/"),sioc:t.base("http://rdfs.org/sioc/ns#"),solid:t.base("http://www.w3.org/ns/solid/terms#"),vcard:t.base("http://www.w3.org/2006/vcard/ns#"),xsd:t.base("http://www.w3.org/2001/XMLSchema#")}}e.exports=n},function(e,t,r){"use strict";function n(e,t,r){this.name=null,this.parsedGraph=null,this.response=r,this.types=[],this.uri=t,this.rdf=e,r&&(r.url!==t&&(this.uri=r.url),this.initFromResponse(r)),this.initName()}var i=r(101);e.exports=n,n.prototype.initName=function(){if(this.uri){var e=this.uri.split("/");this.name=e.pop(),!this.name&&e.length>0&&(this.name=e.pop())}},n.prototype.initFromResponse=function(e){var t=e.contentType();if(!t)throw new Error("Cannot parse container without a Content-Type: header");var r=i.parseGraph(this.rdf,this.uri,e.raw(),t);this.parsedGraph=r,this.types=this.types=Object.keys(r.findTypeURIs(this.rdf.namedNode(this.uri)))},n.prototype.isContainer=function(){return!1},n.prototype.isType=function(e){return this.types.indexOf(e)!==-1}},function(e,t,r){"use strict";function n(e,t){return t&&"http"!==t.slice(0,4)?[e,t].map(function(e){return"/"===e[0]&&(e=e.slice(1)),"/"===e[e.length-1]&&(e=e.slice(0,e.length-1)),e}).join("/"):t}function i(e,t){var r="";return e&&e.length>0&&(e=e.map(function(e){return u(e,!0)}),r+="DELETE DATA { "+e.join(" . ")+" };\n"),t&&t.length>0&&(t=t.map(function(e){return u(e,!0)}),r+="INSERT DATA { "+t.join(" . ")+" };\n"),r}function o(e){var t,r,n,i,o=e.split("//");return 2===o.length?(t=o[0],r=o[1]):r=e,i=r.split("/"),n=t?t+"//"+i[0]:i[0],e.startsWith("//")&&(n="//"+n),n}function a(e,t){var r={};if(e){e.split(",").forEach(function(t){t&&e.indexOf(t)>=0&&(r[t.trim().toLowerCase()]=!0)})}return t&&t.indexOf("application/sparql-update")>=0&&(r.patch=!0),r}function s(e){if(!e)return{};for(var t=e.match(/<[^>]*>\s*(\s*;\s*[^\(\)<>@,;:"\/\[\]\?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*")))*(,|$)/g),r={},n=0;n<t.length;n++)for(var i=t[n].split(">"),o=i[0].substring(1),a=i[1],s=a.match(/[^\(\)<>@,;:"\/\[\]\?={} \t]+=(([^\(\)<>@,;:"\/\[\]\?={} \t]+)|("[^"]*"))/g),u=0;u<s.length;u++){var c=s[u],l=c.split("="),f=l[1].replace(/["']/g,"");r[f]||(r[f]=[]),r[f].push(o),r[f].length>1&&r[f].sort()}return r}function u(e,t){return"string"!=typeof e&&(e=e.toCanonical()),t&&e.endsWith(".")&&(e=e.slice(0,-1)),e}e.exports.absoluteUrl=n,e.exports.composePatchQuery=i,e.exports.hostname=o,e.exports.parseAllowedMethods=a,e.exports.parseLinkHeader=s,e.exports.statementToNT=u},function(e,t,r){(function(e){var n=r(254),i=r(267),o=r(169),a=r(148),s=t;s.request=function(t,r){t="string"==typeof t?a.parse(t):i(t);var o=e.location.protocol.search(/^https?:$/)===-1?"http:":"",s=t.protocol||o,u=t.hostname||t.host,c=t.port,l=t.path||"/";u&&u.indexOf(":")!==-1&&(u="["+u+"]"),t.url=(u?s+"//"+u:"")+(c?":"+c:"")+l,t.method=(t.method||"GET").toUpperCase(),t.headers=t.headers||{};var f=new n(t);return r&&f.on("response",r),f},s.get=function(e,t){var r=s.request(e,t);return r.end(),r},s.Agent=function(){},s.Agent.defaultMaxSockets=4,s.STATUS_CODES=o,s.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(t,r(2))},function(e,t,r){(function(e){function r(){if(void 0!==o)return o;if(e.XMLHttpRequest){o=new e.XMLHttpRequest;try{o.open("GET",e.XDomainRequest?"/":"https://example.com")}catch(e){o=null}}else o=null;return o}function n(e){var t=r();if(!t)return!1;try{return t.responseType=e,t.responseType===e}catch(e){}return!1}function i(e){return"function"==typeof e}t.fetch=i(e.fetch)&&i(e.ReadableStream),t.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),t.blobConstructor=!0}catch(e){}var o,a=void 0!==e.ArrayBuffer,s=a&&i(e.ArrayBuffer.prototype.slice);t.arraybuffer=t.fetch||a&&n("arraybuffer"),t.msstream=!t.fetch&&s&&n("ms-stream"),t.mozchunkedarraybuffer=!t.fetch&&a&&n("moz-chunked-arraybuffer"),t.overrideMimeType=t.fetch||!!r()&&i(r().overrideMimeType),t.vbArray=i(e.VBArray),o=null}).call(t,r(2))},function(e,t,r){function n(e){if(e&&!u(e))throw new Error("Unknown encoding: "+e)}function i(e){return e.toString(this.encoding)}function o(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function a(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var s=r(10).Buffer,u=s.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},c=t.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),n(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=a;break;default:return void(this.write=i)}this.charBuffer=new s(6),this.charReceived=0,this.charLength=0};c.prototype.write=function(e){for(var t="";this.charLength;){var r=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";e=e.slice(r,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var n=t.charCodeAt(t.length-1);if(!(n>=55296&&n<=56319)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i);var i=t.length-1,n=t.charCodeAt(i);if(n>=55296&&n<=56319){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,i)}return t},c.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var r=e[e.length-t];if(1==t&&r>>5==6){this.charLength=2;break}if(t<=2&&r>>4==14){this.charLength=3;break}if(t<=3&&r>>3==30){this.charLength=4;break}}this.charReceived=t},c.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;t+=n.slice(0,r).toString(i)}return t}},function(e,t,r){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,r){if(e&&c.isObject(e)&&e instanceof n)return e;var i=new n;return i.parse(e,t,r),i}function o(e){return c.isString(e)&&(e=i(e)),e instanceof n?e.format():n.prototype.format.call(e)}function a(e,t){return i(e,!1,!0).resolve(t)}function s(e,t){return e?i(e,!1,!0).resolveObject(t):t}var u=r(227),c=r(257);t.parse=i,t.resolve=a,t.resolveObject=s,t.format=o,t.Url=n;var l=/^([a-z0-9.+-]+:)/i,f=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,p=["<",">",'"',"`"," ","\r","\n","\t"],d=["{","}","|","\\","^","`"].concat(p),v=["'"].concat(d),y=["%","/","?",";","#"].concat(v),g=["/","?","#"],m={javascript:!0,"javascript:":!0},b={javascript:!0,"javascript:":!0},w={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},_=r(230);n.prototype.parse=function(e,t,r){if(!c.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),i=n!==-1&&n<e.indexOf("#")?"?":"#",o=e.split(i);o[0]=o[0].replace(/\\/g,"/"),e=o.join(i);var a=e;if(a=a.trim(),!r&&1===e.split("#").length){var s=h.exec(a);if(s)return this.path=a,this.href=a,this.pathname=s[1],s[2]?(this.search=s[2],this.query=t?_.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var f=l.exec(a);if(f){f=f[0];var p=f.toLowerCase();this.protocol=p,a=a.substr(f.length)}if(r||f||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var d="//"===a.substr(0,2);!d||f&&b[f]||(a=a.substr(2),this.slashes=!0)}if(!b[f]&&(d||f&&!w[f])){for(var x=-1,k=0;k<g.length;k++){var T=a.indexOf(g[k]);T!==-1&&(x===-1||T<x)&&(x=T)}var E,S;S=x===-1?a.lastIndexOf("@"):a.lastIndexOf("@",x),S!==-1&&(E=a.slice(0,S),a=a.slice(S+1),this.auth=decodeURIComponent(E)),x=-1;for(var k=0;k<y.length;k++){var T=a.indexOf(y[k]);T!==-1&&(x===-1||T<x)&&(x=T)}x===-1&&(x=a.length),this.host=a.slice(0,x),a=a.slice(x),this.parseHost(),this.hostname=this.hostname||"";var N="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!N)for(var I=this.hostname.split(/\./),k=0,O=I.length;k<O;k++){var R=I[k];if(R&&!R.match(/^[+a-z0-9A-Z_-]{0,63}$/)){for(var j="",C=0,A=R.length;C<A;C++)R.charCodeAt(C)>127?j+="x":j+=R[C];if(!j.match(/^[+a-z0-9A-Z_-]{0,63}$/)){var L=I.slice(0,k),D=I.slice(k+1),M=R.match(/^([+a-z0-9A-Z_-]{0,63})(.*)$/);M&&(L.push(M[1]),D.unshift(M[2])),D.length&&(a="/"+D.join(".")+a),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),N||(this.hostname=u.toASCII(this.hostname));var U=this.port?":"+this.port:"",P=this.hostname||"";this.host=P+U,this.href+=this.host,N&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!m[p])for(var k=0,O=v.length;k<O;k++){var q=v[k];if(a.indexOf(q)!==-1){var F=encodeURIComponent(q);F===q&&(F=escape(q)),a=a.split(q).join(F)}}var z=a.indexOf("#");z!==-1&&(this.hash=a.substr(z),a=a.slice(0,z));var B=a.indexOf("?");if(B!==-1?(this.search=a.substr(B),this.query=a.substr(B+1),t&&(this.query=_.parse(this.query)),a=a.slice(0,B)):t&&(this.search="",this.query={}),a&&(this.pathname=a),w[p]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var U=this.pathname||"",H=this.search||"";this.path=U+H}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&c.isObject(this.query)&&Object.keys(this.query).length&&(o=_.stringify(this.query));var a=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||w[t])&&i!==!1?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),a&&"?"!==a.charAt(0)&&(a="?"+a),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+i+r+a+n},n.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(c.isString(e)){var t=new n;t.parse(e,!1,!0),e=t}for(var r=new n,i=Object.keys(this),o=0;o<i.length;o++){var a=i[o];r[a]=this[a]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),u=0;u<s.length;u++){var l=s[u];"protocol"!==l&&(r[l]=e[l])}return w[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!w[e.protocol]){for(var f=Object.keys(e),h=0;h<f.length;h++){var p=f[h];r[p]=e[p]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||b[e.protocol])r.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var v=r.pathname||"",y=r.search||"";r.path=v+y}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var g=r.pathname&&"/"===r.pathname.charAt(0),m=e.host||e.pathname&&"/"===e.pathname.charAt(0),_=m||g||r.host&&e.pathname,x=_,k=r.pathname&&r.pathname.split("/")||[],d=e.pathname&&e.pathname.split("/")||[],T=r.protocol&&!w[r.protocol];if(T&&(r.hostname="",r.port=null,r.host&&(""===k[0]?k[0]=r.host:k.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),_=_&&(""===d[0]||""===k[0])),m)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,k=d;else if(d.length)k||(k=[]),k.pop(),k=k.concat(d),r.search=e.search,r.query=e.query;else if(!c.isNullOrUndefined(e.search)){if(T){r.hostname=r.host=k.shift();var E=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");E&&(r.auth=E.shift(),r.host=r.hostname=E.shift())}return r.search=e.search,r.query=e.query,c.isNull(r.pathname)&&c.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!k.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var S=k.slice(-1)[0],N=(r.host||e.host||k.length>1)&&("."===S||".."===S)||""===S,I=0,O=k.length;O>=0;O--)S=k[O],"."===S?k.splice(O,1):".."===S?(k.splice(O,1),I++):I&&(k.splice(O,1),I--);if(!_&&!x)for(;I--;I)k.unshift("..");!_||""===k[0]||k[0]&&"/"===k[0].charAt(0)||k.unshift(""),N&&"/"!==k.join("/").substr(-1)&&k.push("");var R=""===k[0]||k[0]&&"/"===k[0].charAt(0);if(T){r.hostname=r.host=R?"":k.length?k.shift():"";var E=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");E&&(r.auth=E.shift(),r.host=r.hostname=E.shift())}return _=_||r.host&&k.length,_&&!R&&k.unshift(""),k.length?r.pathname=k.join("/"):(r.pathname=null,r.path=null),c.isNull(r.pathname)&&c.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var e=this.host,t=f.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,r){(function(e,n){function i(e,r){var n={seen:[],stylize:a};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),v(r)?n.showHidden=r:r&&t._extend(n,r),_(n.showHidden)&&(n.showHidden=!1),_(n.depth)&&(n.depth=2),_(n.colors)&&(n.colors=!1),_(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),u(n,e,n.depth)}function o(e,t){var r=i.styles[t];return r?"["+i.colors[r][0]+"m"+e+"["+i.colors[r][1]+"m":e}function a(e,t){return e}function s(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}function u(e,r,n){if(e.customInspect&&r&&S(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,e);return b(i)||(i=u(e,i,n)),i}var o=c(e,r);if(o)return o;var a=Object.keys(r),v=s(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(r)),E(r)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return l(r);if(0===a.length){if(S(r)){var y=r.name?": "+r.name:"";return e.stylize("[Function"+y+"]","special")}if(x(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(T(r))return e.stylize(Date.prototype.toString.call(r),"date");if(E(r))return l(r)}var g="",m=!1,w=["{","}"];if(d(r)&&(m=!0,w=["[","]"]),S(r)){g=" [Function"+(r.name?": "+r.name:"")+"]"}if(x(r)&&(g=" "+RegExp.prototype.toString.call(r)),T(r)&&(g=" "+Date.prototype.toUTCString.call(r)),E(r)&&(g=" "+l(r)),0===a.length&&(!m||0==r.length))return w[0]+g+w[1];if(n<0)return x(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special");e.seen.push(r);var _;return _=m?f(e,r,n,v,a):a.map(function(t){return h(e,r,n,v,t,m)}),e.seen.pop(),p(_,g,w)}function c(e,t){if(_(t))return e.stylize("undefined","undefined");if(b(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return m(t)?e.stylize(""+t,"number"):v(t)?e.stylize(""+t,"boolean"):y(t)?e.stylize("null","null"):void 0}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,r,n,i){for(var o=[],a=0,s=t.length;a<s;++a)j(t,String(a))?o.push(h(e,t,r,n,String(a),!0)):o.push("");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(e,t,r,n,i,!0))}),o}function h(e,t,r,n,i,o){var a,s,c;if(c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},c.get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),j(n,i)||(a="["+i+"]"),s||(e.seen.indexOf(c.value)<0?(s=y(r)?u(e,c.value,null):u(e,c.value,r-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),_(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function p(e,t,r){var n=0;return e.reduce(function(e,t){return n++,t.indexOf("\n")>=0&&n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function d(e){return Array.isArray(e)}function v(e){return"boolean"==typeof e}function y(e){return null===e}function g(e){return null==e}function m(e){return"number"==typeof e}function b(e){return"string"==typeof e}function w(e){return"symbol"==typeof e}function _(e){return void 0===e}function x(e){return k(e)&&"[object RegExp]"===I(e)}function k(e){return"object"==typeof e&&null!==e}function T(e){return k(e)&&"[object Date]"===I(e)}function E(e){return k(e)&&("[object Error]"===I(e)||e instanceof Error)}function S(e){return"function"==typeof e}function N(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e}function I(e){return Object.prototype.toString.call(e)}function O(e){return e<10?"0"+e.toString(10):e.toString(10)}function R(){var e=new Date,t=[O(e.getHours()),O(e.getMinutes()),O(e.getSeconds())].join(":");return[e.getDate(),L[e.getMonth()],t].join(" ")}function j(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.format=function(e){if(!b(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(i(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,o=n.length,a=String(e).replace(/%[sdj%]/g,function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}}),s=n[r];r<o;s=n[++r])y(s)||!k(s)?a+=" "+s:a+=" "+i(s);return a},t.deprecate=function(r,i){function o(){if(!a){if(n.throwDeprecation)throw new Error(i);n.traceDeprecation?console.trace(i):console.error(i),a=!0}return r.apply(this,arguments)}if(_(e.process))return function(){return t.deprecate(r,i).apply(this,arguments)};if(n.noDeprecation===!0)return r;var a=!1;return o};var C,A={};t.debuglog=function(e){if(_(C)&&(C=n.env.NODE_DEBUG||""),e=e.toUpperCase(),!A[e])if(new RegExp("\\b"+e+"\\b","i").test(C)){var r=n.pid;A[e]=function(){var n=t.format.apply(t,arguments);console.error("%s %d: %s",e,r,n)}}else A[e]=function(){};return A[e]},t.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=d,t.isBoolean=v,t.isNull=y,t.isNullOrUndefined=g,t.isNumber=m,t.isString=b,t.isSymbol=w,t.isUndefined=_,t.isRegExp=x,t.isObject=k,t.isDate=T,t.isError=E,t.isFunction=S,t.isPrimitive=N,t.isBuffer=r(260);var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];t.log=function(){console.log("%s - %s",R(),t.format.apply(t,arguments))},t.inherits=r(259),t._extend=function(e,t){if(!t||!k(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(t,r(2),r(4))},function(e,t){function r(e,t){for(var r in e)t[r]=e[r]}function n(e,t){function n(){}var i=e.prototype;if(Object.create){var o=Object.create(t.prototype);i.__proto__=o}i instanceof t||(n.prototype=t.prototype,n=new n,r(i,n),e.prototype=i=n),i.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),i.constructor=e)}function i(e,t){if(t instanceof Error)var r=t;else r=this,Error.call(this,ie[e]),this.message=ie[e],Error.captureStackTrace&&Error.captureStackTrace(this,i);return r.code=e,t&&(this.message=this.message+": "+t),r}function o(){}function a(e,t){this._node=e,this._refresh=t,s(this)}function s(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var n=e._refresh(e._node);z(e,"length",n.length),r(n,e),e._inc=t}}function u(){}function c(e,t){for(var r=e.length;r--;)if(e[r]===t)return r}function l(e,t,r,n){if(n?t[c(t,n)]=r:t[t.length++]=r,e){r.ownerElement=e;var i=e.ownerDocument;i&&(n&&m(i,e,n),g(i,e,r))}}function f(e,t,r){var n=c(t,r);if(!(n>=0))throw i(ae,new Error(e.tagName+"@"+r));for(var o=t.length-1;n<o;)t[n]=t[++n];if(t.length=o,e){var a=e.ownerDocument;a&&(m(a,e,r),r.ownerElement=null)}}function h(e){if(this._features={},e)for(var t in e)this._features=e[t]}function p(){}function d(e){return"<"==e&&"&lt;"||">"==e&&"&gt;"||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function v(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(v(e,t))return!0}while(e=e.nextSibling)}function y(){}function g(e,t,r){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==r.namespaceURI&&(t._nsMap[r.prefix?r.localName:""]=r.value)}function m(e,t,r,n){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==r.namespaceURI&&delete t._nsMap[r.prefix?r.localName:""]}function b(e,t,r){if(e&&e._inc){e._inc++;var n=t.childNodes;if(r)n[n.length++]=r;else{for(var i=t.firstChild,o=0;i;)n[o++]=i,i=i.nextSibling;n.length=o}}}function w(e,t){var r=t.previousSibling,n=t.nextSibling;return r?r.nextSibling=n:e.firstChild=n,n?n.previousSibling=r:e.lastChild=r,b(e.ownerDocument,e),t}function _(e,t,r){var n=t.parentNode;if(n&&n.removeChild(t),t.nodeType===te){var i=t.firstChild;if(null==i)return t;var o=t.lastChild}else i=o=t;var a=r?r.previousSibling:e.lastChild;i.previousSibling=a,o.nextSibling=r,a?a.nextSibling=i:e.firstChild=i,null==r?e.lastChild=o:r.previousSibling=o;do{i.parentNode=e}while(i!==o&&(i=i.nextSibling));return b(e.ownerDocument||e,e),t.nodeType==te&&(t.firstChild=t.lastChild=null),t}function x(e,t){var r=t.parentNode;if(r){var n=e.lastChild;r.removeChild(t);var n=e.lastChild}var n=e.lastChild;return t.parentNode=e,t.previousSibling=n,t.nextSibling=null,n?n.nextSibling=t:e.firstChild=t,e.lastChild=t,b(e.ownerDocument,e,t),t}function k(){this._nsMap={}}function T(){}function E(){}function S(){}function N(){}function I(){}function O(){}function R(){}function j(){}function C(){}function A(){}function L(){}function D(){}function M(e,t){var r=[],n=9==this.nodeType?this.documentElement:this,i=n.prefix,o=n.namespaceURI;if(o&&null==i){var i=n.lookupPrefix(o);if(null==i)var a=[{namespace:o,prefix:null}]}return P(this,r,e,t,a),r.join("")}function U(e,t,r){var n=e.prefix||"",i=e.namespaceURI;if(!n&&!i)return!1;if("xml"===n&&"http://www.w3.org/XML/1998/namespace"===i||"http://www.w3.org/2000/xmlns/"==i)return!1;for(var o=r.length;o--;){var a=r[o];if(a.prefix==n)return a.namespace!=i}return!0}function P(e,t,r,n,i){if(n){if(!(e=n(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case V:i||(i=[]);var o=(i.length,e.attributes),a=o.length,s=e.firstChild,u=e.tagName;r=H===e.namespaceURI||r,t.push("<",u);for(var c=0;c<a;c++){var l=o.item(c);"xmlns"==l.prefix?i.push({prefix:l.localName,namespace:l.value}):"xmlns"==l.nodeName&&i.push({prefix:"",namespace:l.value})}for(var c=0;c<a;c++){var l=o.item(c);if(U(l,r,i)){var f=l.prefix||"",h=l.namespaceURI,p=f?" xmlns:"+f:" xmlns";t.push(p,'="',h,'"'),i.push({prefix:f,namespace:h})}P(l,t,r,n,i)}if(U(e,r,i)){var f=e.prefix||"",h=e.namespaceURI,p=f?" xmlns:"+f:" xmlns";t.push(p,'="',h,'"'),i.push({prefix:f,namespace:h})}if(s||r&&!/^(?:meta|link|img|br|hr|input)$/i.test(u)){if(t.push(">"),r&&/^script$/i.test(u))for(;s;)s.data?t.push(s.data):P(s,t,r,n,i),s=s.nextSibling;else for(;s;)P(s,t,r,n,i),s=s.nextSibling;t.push("</",u,">")}else t.push("/>");return;case Z:case te:for(var s=e.firstChild;s;)P(s,t,r,n,i),s=s.nextSibling;return;case W:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,d),'"');case G:return t.push(e.data.replace(/[<&]/g,d));case J:return t.push("<![CDATA[",e.data,"]]>");case K:return t.push("<!--",e.data,"-->");case ee:var v=e.publicId,y=e.systemId;if(t.push("<!DOCTYPE ",e.name),v)t.push(' PUBLIC "',v),y&&"."!=y&&t.push('" "',y),t.push('">');else if(y&&"."!=y)t.push(' SYSTEM "',y,'">');else{var g=e.internalSubset;g&&t.push(" [",g,"]"),t.push(">")}return;case Y:return t.push("<?",e.target," ",e.data,"?>");case Q:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function q(e,t,r){var n;switch(t.nodeType){case V:n=t.cloneNode(!1),n.ownerDocument=e;case te:break;case W:r=!0}if(n||(n=t.cloneNode(!1)),n.ownerDocument=e,n.parentNode=null,r)for(var i=t.firstChild;i;)n.appendChild(q(e,i,r)),i=i.nextSibling;return n}function F(e,t,r){var n=new t.constructor;for(var i in t){var a=t[i];"object"!=typeof a&&a!=n[i]&&(n[i]=a)}switch(t.childNodes&&(n.childNodes=new o),n.ownerDocument=e,n.nodeType){case V:var s=t.attributes,c=n.attributes=new u,l=s.length;c._ownerElement=n;for(var f=0;f<l;f++)n.setAttributeNode(F(e,s.item(f),!0));break;case W:r=!0}if(r)for(var h=t.firstChild;h;)n.appendChild(F(e,h,r)),h=h.nextSibling;return n}function z(e,t,r){e[t]=r}function B(e){switch(e.nodeType){case V:case te:var t=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&t.push(B(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}var H="http://www.w3.org/1999/xhtml",X={},V=X.ELEMENT_NODE=1,W=X.ATTRIBUTE_NODE=2,G=X.TEXT_NODE=3,J=X.CDATA_SECTION_NODE=4,Q=X.ENTITY_REFERENCE_NODE=5,$=X.ENTITY_NODE=6,Y=X.PROCESSING_INSTRUCTION_NODE=7,K=X.COMMENT_NODE=8,Z=X.DOCUMENT_NODE=9,ee=X.DOCUMENT_TYPE_NODE=10,te=X.DOCUMENT_FRAGMENT_NODE=11,re=X.NOTATION_NODE=12,ne={},ie={},oe=(ne.INDEX_SIZE_ERR=(ie[1]="Index size error",1),ne.DOMSTRING_SIZE_ERR=(ie[2]="DOMString size error",2),ne.HIERARCHY_REQUEST_ERR=(ie[3]="Hierarchy request error",3)),ae=(ne.WRONG_DOCUMENT_ERR=(ie[4]="Wrong document",4),ne.INVALID_CHARACTER_ERR=(ie[5]="Invalid character",5),ne.NO_DATA_ALLOWED_ERR=(ie[6]="No data allowed",6),ne.NO_MODIFICATION_ALLOWED_ERR=(ie[7]="No modification allowed",7),ne.NOT_FOUND_ERR=(ie[8]="Not found",8)),se=(ne.NOT_SUPPORTED_ERR=(ie[9]="Not supported",9),ne.INUSE_ATTRIBUTE_ERR=(ie[10]="Attribute in use",10));ne.INVALID_STATE_ERR=(ie[11]="Invalid state",11),ne.SYNTAX_ERR=(ie[12]="Syntax error",12),ne.INVALID_MODIFICATION_ERR=(ie[13]="Invalid modification",13),ne.NAMESPACE_ERR=(ie[14]="Invalid namespace",14),ne.INVALID_ACCESS_ERR=(ie[15]="Invalid access",15);i.prototype=Error.prototype,r(ne,i),o.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var r=[],n=0;n<this.length;n++)P(this[n],r,e,t);return r.join("")}},a.prototype.item=function(e){return s(this),this[e]},n(a,o),u.prototype={length:0,item:o.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var r=this[t];if(r.nodeName==e)return r}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new i(se);var r=this.getNamedItem(e.nodeName);return l(this._ownerElement,this,e,r),r},setNamedItemNS:function(e){var t,r=e.ownerElement;if(r&&r!=this._ownerElement)throw new i(se);return t=this.getNamedItemNS(e.namespaceURI,e.localName),l(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return f(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var r=this.getNamedItemNS(e,t);return f(this._ownerElement,this,r),r},getNamedItemNS:function(e,t){for(var r=this.length;r--;){var n=this[r];if(n.localName==t&&n.namespaceURI==e)return n}return null}},h.prototype={hasFeature:function(e,t){var r=this._features[e.toLowerCase()];return!(!r||t&&!(t in r))},createDocument:function(e,t,r){var n=new y;if(n.implementation=this,n.childNodes=new o,n.doctype=r,r&&n.appendChild(r),t){var i=n.createElementNS(e,t);n.appendChild(i)}return n},createDocumentType:function(e,t,r){var n=new O;return n.name=e,n.nodeName=e,n.publicId=t,n.systemId=r,n}},p.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return _(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return w(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return F(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==G&&e.nodeType==G?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var r=t._nsMap;if(r)for(var n in r)if(r[n]==e)return n;t=t.nodeType==W?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var r=t._nsMap;if(r&&e in r)return r[e];t=t.nodeType==W?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},r(X,p),r(X,p.prototype),y.prototype={nodeName:"#document",nodeType:Z,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==te){for(var r=e.firstChild;r;){var n=r.nextSibling;this.insertBefore(r,t),r=n}return e}return null==this.documentElement&&e.nodeType==V&&(this.documentElement=e),_(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),w(this,e)},importNode:function(e,t){return q(this,e,t)},getElementById:function(e){var t=null;return v(this.documentElement,function(r){if(r.nodeType==V&&r.getAttribute("id")==e)return t=r,!0}),t},createElement:function(e){var t=new k;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new o,(t.attributes=new u)._ownerElement=t,t},createDocumentFragment:function(){var e=new A;return e.ownerDocument=this,e.childNodes=new o,e},createTextNode:function(e){var t=new S;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new N;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new I;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var r=new L;return r.ownerDocument=this,r.tagName=r.target=e,r.nodeValue=r.data=t,r},createAttribute:function(e){var t=new T;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new C;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var r=new k,n=t.split(":"),i=r.attributes=new u;return r.childNodes=new o,r.ownerDocument=this,r.nodeName=t,r.tagName=t,r.namespaceURI=e,2==n.length?(r.prefix=n[0],r.localName=n[1]):r.localName=t,i._ownerElement=r,r},createAttributeNS:function(e,t){var r=new T,n=t.split(":");return r.ownerDocument=this,r.nodeName=t,r.name=t,r.namespaceURI=e,r.specified=!0,2==n.length?(r.prefix=n[0],r.localName=n[1]):r.localName=t,r}},n(y,p),k.prototype={nodeType:V,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var r=this.ownerDocument.createAttribute(e);r.value=r.nodeValue=""+t,this.setAttributeNode(r)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===te?this.insertBefore(e,null):x(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var r=this.getAttributeNodeNS(e,t);r&&this.removeAttributeNode(r)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var r=this.getAttributeNodeNS(e,t);return r&&r.value||""},setAttributeNS:function(e,t,r){var n=this.ownerDocument.createAttributeNS(e,t);n.value=n.nodeValue=""+r,this.setAttributeNode(n)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new a(this,function(t){var r=[];return v(t,function(n){n===t||n.nodeType!=V||"*"!==e&&n.tagName!=e||r.push(n)}),r})},getElementsByTagNameNS:function(e,t){return new a(this,function(r){var n=[];return v(r,function(i){i===r||i.nodeType!==V||"*"!==e&&i.namespaceURI!==e||"*"!==t&&i.localName!=t||n.push(i)}),n})}},y.prototype.getElementsByTagName=k.prototype.getElementsByTagName,y.prototype.getElementsByTagNameNS=k.prototype.getElementsByTagNameNS,n(k,p),T.prototype.nodeType=W,n(T,p),E.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(ie[oe])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,r){r=this.data.substring(0,e)+r+this.data.substring(e+t),this.nodeValue=this.data=r,this.length=r.length}},n(E,p),S.prototype={nodeName:"#text",nodeType:G,splitText:function(e){var t=this.data,r=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var n=this.ownerDocument.createTextNode(r);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}},n(S,E),N.prototype={nodeName:"#comment",nodeType:K},n(N,E),I.prototype={nodeName:"#cdata-section",nodeType:J},n(I,E),O.prototype.nodeType=ee,n(O,p),R.prototype.nodeType=re,n(R,p),j.prototype.nodeType=$,n(j,p),C.prototype.nodeType=Q,n(C,p),A.prototype.nodeName="#document-fragment",A.prototype.nodeType=te,n(A,p),L.prototype.nodeType=Y,n(L,p),D.prototype.serializeToString=function(e,t,r){return M.call(e,t,r)},p.prototype.toString=M;try{Object.defineProperty&&(Object.defineProperty(a.prototype,"length",{get:function(){return s(this),this.$$length}}),Object.defineProperty(p.prototype,"textContent",{get:function(){return B(this)},set:function(e){switch(this.nodeType){case V:case te:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),z=function(e,t,r){e["$$"+t]=r})}catch(e){}t.DOMImplementation=h,t.XMLSerializer=D},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return"NamedNode"===e.termType?e.value.split("#")[0]:null}Object.defineProperty(t,"__esModule",{value:!0});var o=r(33),a=n(o),s=r(45),u=n(s),c=r(64),l=n(c),f=r(44),h=n(f),p=r(14),d=n(p),v=r(32),y=n(v),g=r(66),m=n(g),b=r(165),w=n(b),_=r(65),x=n(_),k=r(93),T=n(k),E=r(247),S=r(103),N=n(S),I=(r(104),function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new k.IndexedFormula;(0,d.default)(this,t);var r=(0,m.default)(this,(t.__proto__||(0,h.default)(t)).call(this,e));return r.webClient=new E.SolidWebClient(T.default),r.lockedGraphs=new l.default,r.on("queryDone",function(){return r.lockedGraphs.clear()}),r}return(0,x.default)(t,e),(0,y.default)(t,[{key:"getObjects",value:function(){function e(e,t){return r.apply(this,arguments)}var r=(0,u.default)(a.default.mark(function e(r,n){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureGraphLoaded(i(r));case 2:return e.abrupt("return",(0,w.default)(t.prototype.__proto__||(0,h.default)(t.prototype),"getObjects",this).call(this,r,n));case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"getSubjects",value:function(){function e(e,t,n){return r.apply(this,arguments)}var r=(0,u.default)(a.default.mark(function e(r,n,o){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=3;break}return e.next=3,this.ensureGraphLoaded(i(o));case 3:return e.abrupt("return",(0,w.default)(t.prototype.__proto__||(0,h.default)(t.prototype),"getSubjects",this).call(this,r,n,o));case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"getNodesByValue",value:function(){function e(e){return r.apply(this,arguments)}var r=(0,u.default)(a.default.mark(function e(r){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureGraphLoaded(i(r));case 2:return e.abrupt("return",(0,w.default)(t.prototype.__proto__||(0,h.default)(t.prototype),"getNodesByValue",this).call(this,r));case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"ensureGraphLoaded",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,u.default)(a.default.mark(function e(t){var r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:if(!this.lockedGraphs.has(t)){e.next=4;break}return e.abrupt("return",!0);case 4:return e.next=6,this.webClient.get(t);case 6:return r=e.sent.parsedGraph(),this.lockedGraphs.add(t),this.store.addAll(r.statements),e.abrupt("return",!0);case 10:case"end":return e.stop()}},e,this)}));return e}()}]),t}(N.default));t.default=I},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.datatype,r=e.language,n=e.value;if(!t&&!r)return n;var i={"@value":n};return t&&(i["@type"]=t.value),r&&(i["@language"]=r.value),i}function o(e){var t,r,n,i,o,a;return _.default.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:t=!0,r=!1,n=void 0,u.prev=3,i=(0,f.default)((0,s.default)(e));case 5:if(t=(o=i.next()).done){u.next=12;break}return a=o.value,u.next=9,[a,e[a]];case 9:t=!0,u.next=5;break;case 12:u.next=18;break;case 14:u.prev=14,u.t0=u.catch(3),r=!0,n=u.t0;case 18:u.prev=18,u.prev=19,!t&&i.return&&i.return();case 21:if(u.prev=21,!r){u.next=24;break}throw n;case 24:return u.finish(21);case 25:return u.finish(18);case 26:case"end":return u.stop()}},j[0],this,[[3,14,18,26],[19,,21,25]])}Object.defineProperty(t,"__esModule",{value:!0});var a=r(63),s=n(a),u=r(112),c=n(u),l=r(62),f=n(l),h=r(110),p=n(h),d=r(111),v=n(d),y=r(14),g=n(y),m=r(32),b=n(m),w=r(33),_=n(w),x=r(45),k=n(x),T=r(109),E=n(T),S=function(){var e=(0,k.default)(_.default.mark(function e(t,r){var n;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="string"==typeof r?(0,R.default)(r):r,e.next=3,new A(t).query(r);case 3:return n=e.sent,t.trigger("queryDone"),e.abrupt("return",n);case 6:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),N=r(43),I=r(61),O=r(157),R=n(O),j=[o].map(_.default.mark),C=E.default.all.bind(E.default),A=function(){function e(t){(0,g.default)(this,e),this.backend=t}return(0,b.default)(e,[{key:"query",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,k.default)(_.default.mark(function e(t){var r;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.prefixMap=this.getPrefixMap(t.prefixList),e.next=3,this.contextSensitiveQuery(this.toNode(t.context),t.contextSensitiveQuery);case 3:return r=e.sent,e.abrupt("return",(0,v.default)({"@context":this.prefixMap},r));case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"getPrefixMap",value:function(e){return e.reduce(function(e,t){return(0,v.default)({},e,(0,p.default)({},t.name.value,t.uri.value))},{})}},{key:"contextSensitiveQuery",value:function(){function e(e,r){return t.apply(this,arguments)}var t=(0,k.default)(_.default.mark(function e(t,r){var n,i,o,a,s,u=this;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.nodeSpecifier,e.next=3,this.specifiedNodes((0,I.nodeSet)([t]),n);case 3:return i=e.sent,e.next=6,E.default.all(i.map(function(e){return u.traverse(e,r.traversal)}));case 6:if(o=e.sent,o.length){e.next=9;break}return e.abrupt("return",{});case 9:if(a=n.type,s=n.contextType,"emptyNodeSpecifier"!==a&&("matchingNodeSpecifier"!==a||"subject"!==s)){e.next=14;break}return e.abrupt("return",o[0]);case 14:if("matchingNodeSpecifier"!==a||"graph"!==s){e.next=16;break}return e.abrupt("return",{"@id":t.get("value"),"@graph":o});case 16:throw new N.QueryError("Unrecognized context type for node specifier.  Expected 'graph' or 'subject', but got: "+n.contextType);case 17:case"end":return e.stop()}},e,this)}));return e}()},{key:"specifiedNodes",value:function(){function e(e,r){return t.apply(this,arguments)}var t=(0,k.default)(_.default.mark(function e(t,r){return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=r.type,e.next="uri"===e.t0?3:"prefixedUri"===e.t0?3:"emptyNodeSpecifier"===e.t0?4:"matchingNodeSpecifier"===e.t0?5:6;break;case 3:return e.abrupt("return",(0,I.nodeSet)([this.toNode(r)]));case 4:return e.abrupt("return",t);case 5:return e.abrupt("return",this.matchesMatchList(t,r.contextType,r.matchList));case 6:throw new N.QueryError("Invalid node specifier type: "+r);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"matchesMatchList",value:function(){function e(e,r,n){return t.apply(this,arguments)}var t=(0,k.default)(_.default.mark(function e(t,r,n){var i=this;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(n.map(function(e){return i.matches(t,r,e)}));case 2:return e.t0=function(e,t){return e.intersect(t)},e.abrupt("return",e.sent.reduce(e.t0));case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"matches",value:function(){function e(e,r,n){return t.apply(this,arguments)}var t=(0,k.default)(_.default.mark(function e(t,r,n){var i,o,a,s=this;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=r,e.next="subject"===e.t0?3:"graph"===e.t0?21:28;break;case 3:return e.prev=3,e.next=6,C(t.map(function(e){return s.backend.getObjects(e,s.toNode(n.predicate))}));case 6:return e.t1=function(e,t){return e.union(t)},i=e.sent.reduce(e.t1),e.next=10,this.specifiedNodes(i,"intermediateMatch"===n.type?n.nodeSpecifier:n.value);case 10:return o=e.sent,e.next=13,C(o.map(function(e){return s.backend.getSubjects(s.toNode(n.predicate),e)}));case 13:return e.t2=function(e,t){return e.union(t)},a=e.sent.reduce(e.t2),e.abrupt("return",t.intersect(a));case 18:return e.prev=18,e.t3=e.catch(3),e.abrupt("return",(0,I.nodeSet)([]));case 21:return e.prev=21,e.abrupt("return",t.map(function(){var e=(0,k.default)(_.default.mark(function e(t){return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=C,e.next=3,s.specifiedNodes(null,"intermediateMatch"===n.type?n.nodeSpecifier:n.value);case 3:return e.t1=function(e){return s.backend.getSubjects(s.toNode(n.predicate),e,t)},e.t2=e.sent.map(e.t1),e.next=7,(0,e.t0)(e.t2);case 7:return e.t3=function(e,t){return e.union(t)},e.abrupt("return",e.sent.reduce(e.t3));case 9:case"end":return e.stop()}},e,s)}));return function(t){return e.apply(this,arguments)}}()).reduce(function(e,t){return e.union(t)}));case 25:return e.prev=25,e.t4=e.catch(21),e.abrupt("return",(0,I.nodeSet)([]));case 28:throw new N.QueryError("Invalid context type: "+r);case 29:case"end":return e.stop()}},e,this,[[3,18],[21,25]])}));return e}()},{key:"traverse",value:function(){function e(e,r){return t.apply(this,arguments)}var t=(0,k.default)(_.default.mark(function e(t,r){var n,i,o,a,s,u,c,l;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=void 0,i=[],o=!0,a=!1,s=void 0,e.prev=5,u=(0,f.default)(r.selectorList);case 7:if(o=(c=u.next()).done){e.next=40;break}if(l=c.value,!n){e.next=11;break}return e.abrupt("break",40);case 11:e.t0=l.type,e.next="leafSelector"===e.t0?14:"intermediateSelector"===e.t0?30:36;break;case 14:return e.prev=14,e.t1=i,e.next=18,this.traverseLeafSelector(t,l);case 18:e.t2=e.sent,e.t1.push.call(e.t1,e.t2),e.next=29;break;case 22:if(e.prev=22,e.t3=e.catch(14),!(0,N.isInlineError)(e.t3)){e.next=28;break}n=e.t3,e.next=29;break;case 28:throw e.t3;case 29:return e.abrupt("break",37);case 30:return e.t4=i,e.next=33,this.traverseIntermediateSelector(t,l);case 33:return e.t5=e.sent,e.t4.push.call(e.t4,e.t5),e.abrupt("break",37);case 36:throw new N.QueryError("Invalid selector type.  Expected 'leafSelector' or 'intermediateSelector', but got: "+l.type);case 37:o=!0,e.next=7;break;case 40:e.next=46;break;case 42:e.prev=42,e.t6=e.catch(5),a=!0,s=e.t6;case 46:e.prev=46,e.prev=47,!o&&u.return&&u.return();case 49:if(e.prev=49,!a){e.next=52;break}throw s;case 52:return e.finish(49);case 53:return e.finish(46);case 54:return e.abrupt("return",n?{"@id":t.get("value"),"@error":(0,N.formatErrorForResponse)(n)}:(0,v.default)({"@id":t.get("value")},i.reduce(function(e,t){return(0,v.default)({},e,t)},{})));case 55:case"end":return e.stop()}},e,this,[[5,42,46,54],[14,22],[47,,49,53]])}));return e}()},{key:"traverseLeafSelector",value:function(){function e(e,r){return t.apply(this,arguments)}var t=(0,k.default)(_.default.mark(function e(t,r){var n,o;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.toNode(r.predicate).get("value"),e.next=3,backend.getObjects(t,this.toNode(r.predicate));case 3:return e.t0=i,o=e.sent.map(e.t0),e.abrupt("return",(0,p.default)({},this.toPrefixed(n),o));case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"traverseIntermediateSelector",value:function(){function e(e,r){return t.apply(this,arguments)}var t=(0,k.default)(_.default.mark(function e(t,r){var n,i,o,a=this;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,backend.getObjects(t,this.toNode(r.predicate));case 2:return n=e.sent,i=this.toNode(r.predicate).get("value"),e.next=6,C(n.map(function(){var e=(0,k.default)(_.default.mark(function e(t){return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.contextSensitiveQuery(t,r.contextSensitiveQuery));case 1:case"end":return e.stop()}},e,a)}));return function(t){return e.apply(this,arguments)}}()));case 6:return e.t0=function(e){return null!=e},o=e.sent.filter(e.t0),e.abrupt("return",(0,p.default)({},this.toPrefixed(i),o));case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"toNode",value:function(e){var t={termType:"NamedNode"};switch(e.type){case"uri":return(0,I.Node)((0,v.default)({},t,{value:e.value}));case"prefixedUri":if(this.prefixMap[e.prefix])return(0,I.Node)((0,v.default)({},t,{value:this.prefixMap[e.prefix]+e.path}));throw new N.QueryError('Missing prefix definition for "'+e.prefix+'"');default:throw new N.QueryError("Cannot convert from "+e+" to an RDF NamedNode.  Expected type 'uri' or 'prefixedUri'")}}},{key:"toPrefixed",value:function(e){var t=!0,r=!1,n=void 0;try{for(var i,a=(0,f.default)(o(this.prefixMap));!(t=(i=a.next()).done);t=!0){var s=(0,c.default)(i.value,2),u=s[0],l=s[1];if(e.startsWith(l))return u+":"+e.substr(l.length)}}catch(e){r=!0,n=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw n}}return e}}]),e}();t.default=S},function(e,t,r){(function(r,n){var i,o;/*!
 * async
 * https://github.com/caolan/async
 *
 * Copyright 2010-2014 Caolan McMahon
 * Released under the MIT license
 */
!function(){function a(e){var t=!1;return function(){if(t)throw new Error("Callback was already called.");t=!0,e.apply(s,arguments)}}var s,u,c={};s=this,null!=s&&(u=s.async),c.noConflict=function(){return s.async=u,c};var l=Object.prototype.toString,f=Array.isArray||function(e){return"[object Array]"===l.call(e)},h=function(e,t){for(var r=0;r<e.length;r+=1)t(e[r],r,e)},p=function(e,t){if(e.map)return e.map(t);var r=[];return h(e,function(e,n,i){r.push(t(e,n,i))}),r},d=function(e,t,r){return e.reduce?e.reduce(t,r):(h(e,function(e,n,i){r=t(r,e,n,i)}),r)},v=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t};void 0!==r&&r.nextTick?(c.nextTick=r.nextTick,c.setImmediate=void 0!==n?function(e){n(e)}:c.nextTick):"function"==typeof n?(c.nextTick=function(e){n(e)},c.setImmediate=c.nextTick):(c.nextTick=function(e){setTimeout(e,0)},c.setImmediate=c.nextTick),c.each=function(e,t,r){function n(t){t?(r(t),r=function(){}):(i+=1)>=e.length&&r()}if(r=r||function(){},!e.length)return r();var i=0;h(e,function(e){t(e,a(n))})},c.forEach=c.each,c.eachSeries=function(e,t,r){if(r=r||function(){},!e.length)return r();var n=0,i=function(){t(e[n],function(t){t?(r(t),r=function(){}):(n+=1,n>=e.length?r():i())})};i()},c.forEachSeries=c.eachSeries,c.eachLimit=function(e,t,r,n){y(t).apply(null,[e,r,n])},c.forEachLimit=c.eachLimit;var y=function(e){return function(t,r,n){if(n=n||function(){},!t.length||e<=0)return n();var i=0,o=0,a=0;!function s(){if(i>=t.length)return n();for(;a<e&&o<t.length;)o+=1,a+=1,r(t[o-1],function(e){e?(n(e),n=function(){}):(i+=1,a-=1,i>=t.length?n():s())})}()}},g=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[c.each].concat(t))}},m=function(e,t){return function(){var r=Array.prototype.slice.call(arguments);return t.apply(null,[y(e)].concat(r))}},b=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[c.eachSeries].concat(t))}},w=function(e,t,r,n){if(t=p(t,function(e,t){return{index:t,value:e}}),n){var i=[];e(t,function(e,t){r(e.value,function(r,n){i[e.index]=n,t(r)})},function(e){n(e,i)})}else e(t,function(e,t){r(e.value,function(e){t(e)})})};c.map=g(w),c.mapSeries=b(w),c.mapLimit=function(e,t,r,n){return _(t)(e,r,n)};var _=function(e){return m(e,w)};c.reduce=function(e,t,r,n){c.eachSeries(e,function(e,n){r(t,e,function(e,r){t=r,n(e)})},function(e){n(e,t)})},c.inject=c.reduce,c.foldl=c.reduce,c.reduceRight=function(e,t,r,n){var i=p(e,function(e){return e}).reverse();c.reduce(i,t,r,n)},c.foldr=c.reduceRight;var x=function(e,t,r,n){var i=[];t=p(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){r(e.value,function(r){r&&i.push(e),t()})},function(e){n(p(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};c.filter=g(x),c.filterSeries=b(x),c.select=c.filter,c.selectSeries=c.filterSeries;var k=function(e,t,r,n){var i=[];t=p(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){r(e.value,function(r){r||i.push(e),t()})},function(e){n(p(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};c.reject=g(k),c.rejectSeries=b(k);var T=function(e,t,r,n){e(t,function(e,t){r(e,function(r){r?(n(e),n=function(){}):t()})},function(e){n()})};c.detect=g(T),c.detectSeries=b(T),c.some=function(e,t,r){c.each(e,function(e,n){t(e,function(e){e&&(r(!0),r=function(){}),n()})},function(e){r(!1)})},c.any=c.some,c.every=function(e,t,r){c.each(e,function(e,n){t(e,function(e){e||(r(!1),r=function(){}),n()})},function(e){r(!0)})},c.all=c.every,c.sortBy=function(e,t,r){c.map(e,function(e,r){t(e,function(t,n){t?r(t):r(null,{value:e,criteria:n})})},function(e,t){if(e)return r(e);var n=function(e,t){var r=e.criteria,n=t.criteria;return r<n?-1:r>n?1:0};r(null,p(t.sort(n),function(e){return e.value}))})},c.auto=function(e,t){t=t||function(){};var r=v(e),n=r.length;if(!n)return t();var i={},o=[],a=function(e){o.unshift(e)},s=function(e){for(var t=0;t<o.length;t+=1)if(o[t]===e)return void o.splice(t,1)},u=function(){n--,h(o.slice(0),function(e){e()})};a(function(){if(!n){var e=t;t=function(){},e(null,i)}}),h(r,function(r){var n=f(e[r])?e[r]:[e[r]],o=function(e){var n=Array.prototype.slice.call(arguments,1);if(n.length<=1&&(n=n[0]),e){var o={};h(v(i),function(e){o[e]=i[e]}),o[r]=n,t(e,o),t=function(){}}else i[r]=n,c.setImmediate(u)},l=n.slice(0,Math.abs(n.length-1))||[],p=function(){return d(l,function(e,t){return e&&i.hasOwnProperty(t)},!0)&&!i.hasOwnProperty(r)};if(p())n[n.length-1](o,i);else{var y=function(){p()&&(s(y),n[n.length-1](o,i))};a(y)}})},c.retry=function(e,t,r){var n=[];"function"==typeof e&&(r=t,t=e,e=5),e=parseInt(e,10)||5;var i=function(i,o){for(;e;)n.push(function(e,t){return function(r){e(function(e,n){r(!e||t,{err:e,result:n})},o)}}(t,!(e-=1)));c.series(n,function(e,t){t=t[t.length-1],(i||r)(t.err,t.result)})};return r?i():i},c.waterfall=function(e,t){if(t=t||function(){},!f(e)){var r=new Error("First argument to waterfall must be an array of functions");return t(r)}if(!e.length)return t();var n=function(e){return function(r){if(r)t.apply(null,arguments),t=function(){};else{var i=Array.prototype.slice.call(arguments,1),o=e.next();o?i.push(n(o)):i.push(t),c.setImmediate(function(){e.apply(null,i)})}}};n(c.iterator(e))()};var E=function(e,t,r){if(r=r||function(){},f(t))e.map(t,function(e,t){e&&e(function(e){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),t.call(null,e,r)})},r);else{var n={};e.each(v(t),function(e,r){t[e](function(t){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),n[e]=i,r(t)})},function(e){r(e,n)})}};c.parallel=function(e,t){E({map:c.map,each:c.each},e,t)},c.parallelLimit=function(e,t,r){E({map:_(t),each:y(t)},e,r)},c.series=function(e,t){if(t=t||function(){},f(e))c.mapSeries(e,function(e,t){e&&e(function(e){var r=Array.prototype.slice.call(arguments,1);r.length<=1&&(r=r[0]),t.call(null,e,r)})},t);else{var r={};c.eachSeries(v(e),function(t,n){e[t](function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[t]=i,n(e)})},function(e){t(e,r)})}},c.iterator=function(e){var t=function(r){var n=function(){return e.length&&e[r].apply(null,arguments),n.next()};return n.next=function(){return r<e.length-1?t(r+1):null},n};return t(0)},c.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var S=function(e,t,r,n){var i=[];e(t,function(e,t){r(e,function(e,r){i=i.concat(r||[]),t(e)})},function(e){n(e,i)})};c.concat=g(S),c.concatSeries=b(S),c.whilst=function(e,t,r){e()?t(function(n){if(n)return r(n);c.whilst(e,t,r)}):r()},c.doWhilst=function(e,t,r){e(function(n){if(n)return r(n);var i=Array.prototype.slice.call(arguments,1);t.apply(null,i)?c.doWhilst(e,t,r):r()})},c.until=function(e,t,r){e()?r():t(function(n){if(n)return r(n);c.until(e,t,r)})},c.doUntil=function(e,t,r){e(function(n){if(n)return r(n);var i=Array.prototype.slice.call(arguments,1);t.apply(null,i)?r():c.doUntil(e,t,r)})},c.queue=function(e,t){function r(e,t,r,n){if(e.started||(e.started=!0),f(t)||(t=[t]),0==t.length)return c.setImmediate(function(){e.drain&&e.drain()});h(t,function(t){var i={data:t,callback:"function"==typeof n?n:null};r?e.tasks.unshift(i):e.tasks.push(i),e.saturated&&e.tasks.length===e.concurrency&&e.saturated(),c.setImmediate(e.process)})}void 0===t&&(t=1);var n=0,i={tasks:[],concurrency:t,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(e,t){r(i,e,!1,t)},kill:function(){i.drain=null,i.tasks=[]},unshift:function(e,t){r(i,e,!0,t)},process:function(){if(!i.paused&&n<i.concurrency&&i.tasks.length){var t=i.tasks.shift();i.empty&&0===i.tasks.length&&i.empty(),n+=1;var r=function(){n-=1,t.callback&&t.callback.apply(t,arguments),i.drain&&i.tasks.length+n===0&&i.drain(),i.process()},o=a(r);e(t.data,o)}},length:function(){return i.tasks.length},running:function(){return n},idle:function(){return i.tasks.length+n===0},pause:function(){i.paused!==!0&&(i.paused=!0)},resume:function(){if(i.paused!==!1){i.paused=!1;for(var e=1;e<=i.concurrency;e++)c.setImmediate(i.process)}}};return i},c.priorityQueue=function(e,t){function r(e,t){return e.priority-t.priority}function n(e,t,r){for(var n=-1,i=e.length-1;n<i;){var o=n+(i-n+1>>>1);r(t,e[o])>=0?n=o:i=o-1}return n}function i(e,t,i,o){if(e.started||(e.started=!0),f(t)||(t=[t]),0==t.length)return c.setImmediate(function(){e.drain&&e.drain()});h(t,function(t){var a={data:t,priority:i,callback:"function"==typeof o?o:null};e.tasks.splice(n(e.tasks,a,r)+1,0,a),e.saturated&&e.tasks.length===e.concurrency&&e.saturated(),c.setImmediate(e.process)})}var o=c.queue(e,t);return o.push=function(e,t,r){i(o,e,t,r)},delete o.unshift,o},c.cargo=function(e,t){var r=!1,n=[],i={tasks:n,payload:t,saturated:null,empty:null,drain:null,drained:!0,push:function(e,r){f(e)||(e=[e]),h(e,function(e){n.push({data:e,callback:"function"==typeof r?r:null}),i.drained=!1,i.saturated&&n.length===t&&i.saturated()}),c.setImmediate(i.process)},process:function o(){if(!r){if(0===n.length)return i.drain&&!i.drained&&i.drain(),void(i.drained=!0);var a="number"==typeof t?n.splice(0,t):n.splice(0,n.length),s=p(a,function(e){return e.data});i.empty&&i.empty(),r=!0,e(s,function(){r=!1;var e=arguments;h(a,function(t){t.callback&&t.callback.apply(null,e)}),o()})}},length:function(){return n.length},running:function(){return r}};return i};var N=function(e){return function(t){var r=Array.prototype.slice.call(arguments,1);t.apply(null,r.concat([function(t){var r=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[e]&&h(r,function(t){console[e](t)}))}]))}};c.log=N("log"),c.dir=N("dir"),c.memoize=function(e,t){var r={},n={};t=t||function(e){return e};var i=function(){var i=Array.prototype.slice.call(arguments),o=i.pop(),a=t.apply(null,i);a in r?c.nextTick(function(){o.apply(null,r[a])}):a in n?n[a].push(o):(n[a]=[o],e.apply(null,i.concat([function(){r[a]=arguments;var e=n[a];delete n[a];for(var t=0,i=e.length;t<i;t++)e[t].apply(null,arguments)}])))};return i.memo=r,i.unmemoized=e,i},c.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},c.times=function(e,t,r){for(var n=[],i=0;i<e;i++)n.push(i);return c.map(n,t,r)},c.timesSeries=function(e,t,r){for(var n=[],i=0;i<e;i++)n.push(i);return c.mapSeries(n,t,r)},c.seq=function(){var e=arguments;return function(){var t=this,r=Array.prototype.slice.call(arguments),n=r.pop();c.reduce(e,r,function(e,r,n){r.apply(t,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);n(e,t)}]))},function(e,r){n.apply(t,[e].concat(r))})}},c.compose=function(){return c.seq.apply(null,Array.prototype.reverse.call(arguments))};var I=function(e,t){var r=function(){var r=this,n=Array.prototype.slice.call(arguments),i=n.pop();return e(t,function(e,t){e.apply(r,n.concat([t]))},i)};if(arguments.length>2){var n=Array.prototype.slice.call(arguments,2);return r.apply(this,n)}return r};c.applyEach=g(I),c.applyEachSeries=b(I),c.forever=function(e,t){function r(n){if(n){if(t)return t(n);throw n}e(r)}r()},void 0!==e&&e.exports?e.exports=c:(i=[],void 0!==(o=function(){return c}.apply(t,i))&&(e.exports=o))}()}).call(t,r(4),r(42).setImmediate)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=r(33),o=n(i),a=r(45),s=n(a),u=r(14),c=n(u),l=r(32),f=n(l),h=r(43),p=function(){function e(){(0,c.default)(this,e),this.eventHandlers={}}return(0,f.default)(e,[{key:"getObjects",value:function(){function e(e,r){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(t,r){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new h.NotImplementedError("getObjects",this.className);case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"getSubjects",value:function(){function e(e,r,n){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(t,r,n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new h.NotImplementedError("getSubjects",this.className);case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"getNodesByValue",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new h.NotImplementedError("getNodesByValue",this.className);case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"on",value:function(e,t){this.eventHandlers[e]?this.eventHandlers[e].push(t):this.eventHandlers[e]=[t]}},{key:"trigger",value:function(e){var t=this;return(this.eventHandlers[e]||[]).map(function(e){return e.call(t)})}},{key:"className",get:function(){return this.constructor.name}}]),e}();t.default=p},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.LdpBackend=t.InMemoryBackend=t.query=void 0;var i=r(152),o=n(i),a=r(103),s=n(a),u=r(151),c=n(u);t.query=o.default,t.InMemoryBackend=s.default,t.LdpBackend=c.default},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){var t,r,n,i,c,l,f,h,p;return d.default.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:t=1,r=-1,n=void 0,i=void 0,c=(0,y.default)(e),l=void 0,f=function(){r++,l=c.next()},h=function(){n="",i=_.START},h(),f();case 10:if(l.done){d.next=79;break}p=l.value,d.t0=i,d.next=d.t0===_.START?15:d.t0===_.ID?41:d.t0===_.STRING?50:d.t0===_.SYMBOL?60:d.t0===_.KEYWORD?69:77;break;case 15:if(!o(p)){d.next=19;break}p===x.NEWLINE&&(r=0,t++),d.next=39;break;case 19:if(!s(p,b.symbols)){d.next=24;break}n+=p,i=_.SYMBOL,d.next=39;break;case 24:if(!s(p,b.keywords)){d.next=29;break}n+=p,i=_.KEYWORD,d.next=39;break;case 29:if(p!==x.QUOTE){d.next=33;break}i=_.STRING,d.next=39;break;case 33:if(!a(p)){d.next=38;break}n+=p,i=_.ID,d.next=39;break;case 38:throw new m.IllegalCharacterError("Illegal character '"+p+"'",t,r);case 39:return f(),d.abrupt("break",77);case 41:if(!o(p)){d.next=47;break}return d.next=44,u(n,t,r);case 44:h(),d.next=49;break;case 47:n+=p,f();case 49:return d.abrupt("break",77);case 50:if(p!==x.QUOTE){d.next=57;break}return d.next=53,new b.Token(b.tokenTypes.STRLIT,n,t,r);case 53:f(),h(),d.next=59;break;case 57:n+=p,f();case 59:return d.abrupt("break",77);case 60:if(!s(n+p,b.symbols)){d.next=65;break}n+=p,f(),d.next=68;break;case 65:return d.next=67,new b.Token(b.symbols[n],n,t,r);case 67:h();case 68:return d.abrupt("break",77);case 69:if(!o(p)){d.next=75;break}return d.next=72,new b.Token(b.keywords[n],n,t,r);case 72:h(),d.next=76;break;case 75:s(n+p,b.keywords)&&(n+=p,f());case 76:return d.abrupt("break",77);case 77:d.next=10;break;case 79:d.t1=i,d.next=d.t1===_.SYMBOL?82:d.t1===_.KEYWORD?89:d.t1===_.STRING?96:d.t1===_.ID?98:101;break;case 82:if(!b.symbols[n]){d.next=87;break}return d.next=85,new b.Token(b.symbols[n],n,t,r);case 85:d.next=88;break;case 87:throw new m.UnterminatedTokenError("Unterminated symbol '"+n+"'",t,r);case 88:return d.abrupt("break",101);case 89:if(!b.keywords[n]){d.next=94;break}return d.next=92,new b.Token(b.keywords[n],n,t,r);case 92:d.next=95;break;case 94:throw new m.UnterminatedTokenError("Unterminated keyword '"+n+"'",t,r);case 95:return d.abrupt("break",101);case 96:throw new m.UnterminatedTokenError("Unterminated string literal '"+n+"'",t,r);case 98:return d.next=100,new u(n,t,r);case 100:return d.abrupt("break",101);case 101:return d.next=103,new b.Token(b.tokenTypes.EOF,null,t,r);case 103:case"end":return d.stop()}},w[0],this)}function o(e){return" "===e||"\n"===e||"\r"===e||"\t"===e}function a(e){return/[a-z]/i.test(e)}function s(e,t){return(0,h.default)(t).filter(function(t){return t.startsWith(e)}).length>0}function u(e,t,r){if(b.NAME_REGEX.test(e))return new b.Token(b.tokenTypes.NAME,e,t,r);if(b.PREFIXED_URI_REGEX.test(e)){var n=b.PREFIXED_URI_REGEX.exec(e),i=(0,l.default)(n,3),o=(i[0],i[1]),a=i[2];return new b.Token(b.tokenTypes.PREFIXED_URI,{prefix:o,path:a},t,r)}if((0,g.isUri)(e))return new b.Token(b.tokenTypes.URI,e,t,r);throw new m.UnrecognizedTokenError("Unrecognized token: "+e,t,r)}Object.defineProperty(t,"__esModule",{value:!0});var c=r(112),l=n(c),f=r(63),h=n(f),p=r(33),d=n(p),v=r(62),y=n(v),g=r(261),m=r(43),b=r(106),w=[i].map(d.default.mark),_={START:"START",ID:"ID",STRING:"STRING",SYMBOL:"SYMBOL",KEYWORD:"KEYWORD"},x={NEWLINE:"\n",QUOTE:'"'};t.default=i},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return o(new P((0,L.default)(e)))}function o(e){return M.queryNode({prefixList:a(e),context:q(e),contextSensitiveQuery:u(e)})}function a(e){var t=U.tokenTypes.PREFIX,r=U.tokenTypes.URI,n=U.tokenTypes.PREFIXED_URI;e.expect(t,r,n);for(var i=[];e.current.type!==r&&e.current.type!==n;)i.push(s(e));return i}function s(e){var t=(U.tokenTypes.NAME,U.tokenTypes.PREFIX);return e.expect(t),e.advance(),M.prefixNode({name:v(e),uri:p(e)})}function u(e){return M.contextSensitiveQueryNode({nodeSpecifier:c(e),traversal:g(e)})}function c(e){var t,r=U.tokenTypes.ARROW,n=U.tokenTypes.LPAREN,i=U.tokenTypes.LBRACE,o=U.tokenTypes.RPAREN;return e.when((t={},(0,_.default)(t,r,function(){e.advance(),e.expect(n),e.advance();var t=M.matchingNodeSpecifierNode({contextType:"graph",matchList:l(e)});return e.expect(o),e.advance(),t}),(0,_.default)(t,n,function(){e.advance();var t=M.matchingNodeSpecifierNode({contextType:"subject",matchList:l(e)});return e.expect(o),e.advance(),t}),(0,_.default)(t,i,function(){return M.emptyNodeSpecifierNode()}),t))}function l(e){var t=U.tokenTypes.URI,r=U.tokenTypes.PREFIXED_URI,n=U.tokenTypes.RPAREN;e.expect(t,r,n);for(var i=[];e.current.type!==n;)i.push(f(e));return i}function f(e){var t,r=U.tokenTypes.URI,n=U.tokenTypes.PREFIXED_URI,i=U.tokenTypes.STRLIT,o=U.tokenTypes.LPAREN,a=F(e);return e.when((t={},(0,_.default)(t,r,function(){return M.leafMatchNode({predicate:a,value:p(e)})}),(0,_.default)(t,n,function(){return M.leafMatchNode({predicate:a,value:d(e)})}),(0,_.default)(t,i,function(){return M.leafMatchNode({predicate:a,value:y(e)})}),(0,_.default)(t,o,function(){return M.intermediateMatchNode({predicate:a,nodeSpecifier:c(e)})}),t))}function h(e){var t,r=U.tokenTypes.URI,n=U.tokenTypes.PREFIXED_URI;return e.when((t={},(0,_.default)(t,r,function(){return p(e)}),(0,_.default)(t,n,function(){return d(e)}),t))}function p(e){var t=U.tokenTypes.URI,r=e.when((0,_.default)({},t,function(){return M.uriNode({value:e.current.value})}));return e.advance(),r}function d(e){var t=U.tokenTypes.PREFIXED_URI,r=e.when((0,_.default)({},t,function(){var t=e.current.value,r=t.prefix,n=t.path;return M.prefixedUriNode({prefix:r,path:n})}));return e.advance(),r}function v(e){var t=U.tokenTypes.NAME;e.expect(t);var r=M.nameNode({value:e.current.value});return e.advance(),r}function y(e){var t=U.tokenTypes.STRLIT,r=e.when((0,_.default)({},t,function(){return M.stringLiteralNode({value:e.current.value})}));return e.advance(),r}function g(e){var t=U.tokenTypes.LBRACE,r=U.tokenTypes.RBRACE;e.expect(t),e.advance();var n=m(e);return e.expect(r),e.advance(),M.traversalNode({selectorList:n})}function m(e){for(var t=U.tokenTypes.RBRACE,r=[];e.current.type!==t;)r.push(b(e));return r}function b(e){var t,r=U.tokenTypes.ARROW,n=U.tokenTypes.URI,i=U.tokenTypes.PREFIXED_URI,o=U.tokenTypes.LPAREN,a=U.tokenTypes.LBRACE,s=U.tokenTypes.RBRACE,c=h(e);return e.when((t={},(0,_.default)(t,n,function(){return M.leafSelectorNode({predicate:c})}),(0,_.default)(t,i,function(){return M.leafSelectorNode({predicate:c})}),(0,_.default)(t,s,function(){return M.leafSelectorNode({predicate:c})}),(0,_.default)(t,o,function(){return M.intermediateSelectorNode({predicate:c,contextSensitiveQuery:u(e)})}),(0,_.default)(t,a,function(){return M.intermediateSelectorNode({predicate:c,contextSensitiveQuery:u(e)})}),(0,_.default)(t,r,function(){return M.intermediateSelectorNode({predicate:c,contextSensitiveQuery:u(e)})}),t))}Object.defineProperty(t,"__esModule",{value:!0});var w=r(110),_=n(w),x=r(167),k=n(x),T=r(63),E=n(T),S=r(64),N=n(S),I=r(14),O=n(I),R=r(32),j=n(R);t.default=i;var C=r(43),A=r(156),L=n(A),D=r(105),M=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(D),U=r(106),P=function(){function e(t){(0,O.default)(this,e),this.iterator=t,this.buffer=[],this.advance()}return(0,j.default)(e,[{key:"advance",value:function(){this.current=this.buffer.length?this.buffer.shift():this._pull()}},{key:"lookahead",value:function(e){for(var t=e-this.buffer.length,r=0;r<t;r++)this.buffer.push(this._pull());return this.buffer.slice(0,e)}},{key:"expect",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(!new N.default(t).has(this.current.type))throw new C.UnexpectedTokenError(t,this.current);return!0}},{key:"when",value:function(e){var t=(0,E.default)(e);return this.expect.apply(this,(0,k.default)(t)),e[this.current.type]()}},{key:"_pull",value:function(){return this.iterator.next().value}}]),e}(),q=h,F=h},function(e,t,r){e.exports={default:r(170),__esModule:!0}},function(e,t,r){e.exports={default:r(172),__esModule:!0}},function(e,t,r){e.exports={default:r(174),__esModule:!0}},function(e,t,r){e.exports={default:r(176),__esModule:!0}},function(e,t,r){e.exports={default:r(179),__esModule:!0}},function(e,t,r){e.exports={default:r(182),__esModule:!0}},function(e,t,r){e.exports={default:r(183),__esModule:!0}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=r(44),o=n(i),a=r(161),s=n(a);t.default=function e(t,r,n){null===t&&(t=Function.prototype);var i=(0,s.default)(t,r);if(void 0===i){var a=(0,o.default)(t);return null===a?void 0:e(a,r,n)}if("value"in i)return i.value;var u=i.get;if(void 0!==u)return u.call(n)}},function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}},function(e,t,r){"use strict";t.__esModule=!0;var n=r(158),i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return(0,i.default)(e)}},function(e,t,r){"use strict";function n(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function i(e){return 3*e.length/4-n(e)}function o(e){var t,r,i,o,a,s,u=e.length;a=n(e),s=new f(3*u/4-a),i=a>0?u-4:u;var c=0;for(t=0,r=0;t<i;t+=4,r+=3)o=l[e.charCodeAt(t)]<<18|l[e.charCodeAt(t+1)]<<12|l[e.charCodeAt(t+2)]<<6|l[e.charCodeAt(t+3)],s[c++]=o>>16&255,s[c++]=o>>8&255,s[c++]=255&o;return 2===a?(o=l[e.charCodeAt(t)]<<2|l[e.charCodeAt(t+1)]>>4,s[c++]=255&o):1===a&&(o=l[e.charCodeAt(t)]<<10|l[e.charCodeAt(t+1)]<<4|l[e.charCodeAt(t+2)]>>2,s[c++]=o>>8&255,s[c++]=255&o),s}function a(e){return c[e>>18&63]+c[e>>12&63]+c[e>>6&63]+c[63&e]}function s(e,t,r){for(var n,i=[],o=t;o<r;o+=3)n=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(a(n));return i.join("")}function u(e){for(var t,r=e.length,n=r%3,i="",o=[],a=0,u=r-n;a<u;a+=16383)o.push(s(e,a,a+16383>u?u:a+16383));return 1===n?(t=e[r-1],i+=c[t>>2],i+=c[t<<4&63],i+="=="):2===n&&(t=(e[r-2]<<8)+e[r-1],i+=c[t>>10],i+=c[t>>4&63],i+=c[t<<2&63],i+="="),o.push(i),o.join("")}t.byteLength=i,t.toByteArray=o,t.fromByteArray=u;for(var c=[],l=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,d=h.length;p<d;++p)c[p]=h[p],l[h.charCodeAt(p)]=p;l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},function(e,t){e.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(e,t,r){r(29),r(208),e.exports=r(0).Array.from},function(e,t,r){r(37),r(29),e.exports=r(206)},function(e,t,r){r(37),r(29),e.exports=r(207)},function(e,t,r){r(210),e.exports=r(0).Object.assign},function(e,t,r){r(211);var n=r(0).Object;e.exports=function(e,t){return n.create(e,t)}},function(e,t,r){r(212);var n=r(0).Object;e.exports=function(e,t,r){return n.defineProperty(e,t,r)}},function(e,t,r){r(213);var n=r(0).Object;e.exports=function(e,t){return n.getOwnPropertyDescriptor(e,t)}},function(e,t,r){r(214),e.exports=r(0).Object.getPrototypeOf},function(e,t,r){r(215),e.exports=r(0).Object.keys},function(e,t,r){r(216),e.exports=r(0).Object.setPrototypeOf},function(e,t,r){r(86),r(29),r(37),r(217),e.exports=r(0).Promise},function(e,t,r){r(86),r(29),r(37),r(218),r(220),e.exports=r(0).Set},function(e,t,r){r(219),r(86),r(221),r(222),e.exports=r(0).Symbol},function(e,t,r){r(29),r(37),e.exports=r(84).f("iterator")},function(e,t){e.exports=function(){}},function(e,t,r){var n=r(48);e.exports=function(e,t){var r=[];return n(e,!1,r.push,r,t),r}},function(e,t,r){var n=r(18),i=r(52),o=r(205);e.exports=function(e){return function(t,r,a){var s,u=n(t),c=i(u.length),l=o(a,c);if(e&&r!=r){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===r)return e||l||0;return!e&&-1}}},function(e,t,r){var n=r(15),i=r(72),o=r(28),a=r(52),s=r(189);e.exports=function(e,t){var r=1==e,u=2==e,c=3==e,l=4==e,f=6==e,h=5==e||f,p=t||s;return function(t,s,d){for(var v,y,g=o(t),m=i(g),b=n(s,d,3),w=a(m.length),_=0,x=r?p(t,w):u?p(t,0):void 0;w>_;_++)if((h||_ in m)&&(v=m[_],y=b(v,_,g),e))if(r)x[_]=y;else if(y)switch(e){case 3:return!0;case 5:return v;case 6:return _;case 2:x.push(v)}else if(l)return!1;return f?-1:c||l?l:x}}},function(e,t,r){var n=r(17),i=r(117),o=r(1)("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),n(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,r){var n=r(188);e.exports=function(e,t){return new(n(e))(t)}},function(e,t,r){"use strict";var n=r(9).f,i=r(50),o=r(78),a=r(15),s=r(69),u=r(47),c=r(48),l=r(73),f=r(120),h=r(125),p=r(11),d=r(74).fastKey,v=p?"_s":"size",y=function(e,t){var r,n=d(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};e.exports={getConstructor:function(e,t,r,l){var f=e(function(e,n){s(e,f,t,"_i"),e._i=i(null),e._f=void 0,e._l=void 0,e[v]=0,void 0!=n&&c(n,r,e[l],e)});return o(f.prototype,{clear:function(){for(var e=this,t=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete t[r.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var t=this,r=y(t,e);if(r){var n=r.n,i=r.p;delete t._i[r.i],r.r=!0,i&&(i.n=n),n&&(n.p=i),t._f==r&&(t._f=n),t._l==r&&(t._l=i),t[v]--}return!!r},forEach:function(e){s(this,f,"forEach");for(var t,r=a(e,arguments.length>1?arguments[1]:void 0,3);t=t?t.n:this._f;)for(r(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!y(this,e)}}),p&&n(f.prototype,"size",{get:function(){return u(this[v])}}),f},def:function(e,t,r){var n,i,o=y(e,t);return o?o.v=r:(e._l=o={i:i=d(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=o),n&&(n.n=o),e[v]++,"F"!==i&&(e._i[i]=o)),e},getEntry:y,setStrong:function(e,t,r){l(e,t,function(e,t){this._t=e,this._k=t,this._l=void 0},function(){for(var e=this,t=e._k,r=e._l;r&&r.r;)r=r.p;return e._t&&(e._l=r=r?r.n:e._t._f)?"keys"==t?f(0,r.k):"values"==t?f(0,r.v):f(0,[r.k,r.v]):(e._t=void 0,f(1))},r?"entries":"values",!r,!0),h(t)}}},function(e,t,r){var n=r(46),i=r(185);e.exports=function(e){return function(){if(n(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,r){"use strict";var n=r(3),i=r(8),o=r(74),a=r(20),s=r(16),u=r(78),c=r(48),l=r(69),f=r(17),h=r(36),p=r(9).f,d=r(187)(0),v=r(11);e.exports=function(e,t,r,y,g,m){var b=n[e],w=b,_=g?"set":"add",x=w&&w.prototype,k={};return v&&"function"==typeof w&&(m||x.forEach&&!a(function(){(new w).entries().next()}))?(w=t(function(t,r){l(t,w,e,"_c"),t._c=new b,void 0!=r&&c(r,g,t[_],t)}),d("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in x&&(!m||"clear"!=e)&&s(w.prototype,e,function(r,n){if(l(this,w,e),!t&&m&&!f(r))return"get"==e&&void 0;var i=this._c[e](0===r?0:r,n);return t?this:i})}),"size"in x&&p(w.prototype,"size",{get:function(){return this._c.size}})):(w=y.getConstructor(t,e,g,_),u(w.prototype,r),o.NEED=!0),h(w,e),k[e]=w,i(i.G+i.W+i.F,k),m||y.setStrong(w,e,g),w}},function(e,t,r){"use strict";var n=r(9),i=r(35);e.exports=function(e,t,r){t in e?n.f(e,t,i(0,r)):e[t]=r}},function(e,t,r){var n=r(27),i=r(76),o=r(51);e.exports=function(e){var t=n(e),r=i.f;if(r)for(var a,s=r(e),u=o.f,c=0;s.length>c;)u.call(e,a=s[c++])&&t.push(a);return t}},function(e,t){e.exports=function(e,t,r){var n=void 0===r;switch(t.length){case 0:return n?e():e.call(r);case 1:return n?e(t[0]):e.call(r,t[0]);case 2:return n?e(t[0],t[1]):e.call(r,t[0],t[1]);case 3:return n?e(t[0],t[1],t[2]):e.call(r,t[0],t[1],t[2]);case 4:return n?e(t[0],t[1],t[2],t[3]):e.call(r,t[0],t[1],t[2],t[3])}return e.apply(r,t)}},function(e,t,r){"use strict";var n=r(50),i=r(35),o=r(36),a={};r(16)(a,r(1)("iterator"),function(){return this}),e.exports=function(e,t,r){e.prototype=n(a,{next:i(1,r)}),o(e,t+" Iterator")}},function(e,t,r){var n=r(27),i=r(18);e.exports=function(e,t){for(var r,o=i(e),a=n(o),s=a.length,u=0;s>u;)if(o[r=a[u++]]===t)return r}},function(e,t,r){var n=r(3),i=r(126).set,o=n.MutationObserver||n.WebKitMutationObserver,a=n.process,s=n.Promise,u="process"==r(34)(a);e.exports=function(){var e,t,r,c=function(){var n,i;for(u&&(n=a.domain)&&n.exit();e;){i=e.fn,e=e.next;try{i()}catch(n){throw e?r():t=void 0,n}}t=void 0,n&&n.enter()};if(u)r=function(){a.nextTick(c)};else if(o){var l=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),r=function(){f.data=l=!l}}else if(s&&s.resolve){var h=s.resolve();r=function(){h.then(c)}}else r=function(){i.call(n,c)};return function(n){var i={fn:n,next:void 0};t&&(t.next=i),e||(e=i,r()),t=i}}},function(e,t,r){"use strict";var n=r(27),i=r(76),o=r(51),a=r(28),s=r(72),u=Object.assign;e.exports=!u||r(20)(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(e){t[e]=e}),7!=u({},e)[r]||Object.keys(u({},t)).join("")!=n})?function(e,t){for(var r=a(e),u=arguments.length,c=1,l=i.f,f=o.f;u>c;)for(var h,p=s(arguments[c++]),d=l?n(p).concat(l(p)):n(p),v=d.length,y=0;v>y;)f.call(p,h=d[y++])&&(r[h]=p[h]);return r}:u},function(e,t,r){var n=r(9),i=r(12),o=r(27);e.exports=r(11)?Object.defineProperties:function(e,t){i(e);for(var r,a=o(t),s=a.length,u=0;s>u;)n.f(e,r=a[u++],t[r]);return e}},function(e,t,r){var n=r(18),i=r(121).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?s(e):i(n(e))}},function(e,t,r){var n=r(17),i=r(12),o=function(e,t){if(i(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=r(15)(Function.call,r(75).f(Object.prototype,"__proto__").set,2),n(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,r){return o(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:o}},function(e,t,r){var n=r(12),i=r(68),o=r(1)("species");e.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||void 0==(r=n(a)[o])?t:i(r)}},function(e,t,r){var n=r(81),i=r(47);e.exports=function(e){return function(t,r){var o,a,s=String(i(t)),u=n(r),c=s.length;return u<0||u>=c?e?"":void 0:(o=s.charCodeAt(u),o<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536)}}},function(e,t,r){var n=r(81),i=Math.max,o=Math.min;e.exports=function(e,t){return e=n(e),e<0?i(e+t,0):o(e,t)}},function(e,t,r){var n=r(12),i=r(85);e.exports=r(0).getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},function(e,t,r){var n=r(46),i=r(1)("iterator"),o=r(26);e.exports=r(0).isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||o.hasOwnProperty(n(t))}},function(e,t,r){"use strict";var n=r(15),i=r(8),o=r(28),a=r(118),s=r(116),u=r(52),c=r(193),l=r(85);i(i.S+i.F*!r(119)(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,i,f,h=o(e),p="function"==typeof this?this:Array,d=arguments.length,v=d>1?arguments[1]:void 0,y=void 0!==v,g=0,m=l(h);if(y&&(v=n(v,d>2?arguments[2]:void 0,2)),void 0==m||p==Array&&s(m))for(t=u(h.length),r=new p(t);t>g;g++)c(r,g,y?v(h[g],g):h[g]);else for(f=m.call(h),r=new p;!(i=f.next()).done;g++)c(r,g,y?a(f,v,[i.value,g],!0):i.value);return r.length=g,r}})},function(e,t,r){"use strict";var n=r(184),i=r(120),o=r(26),a=r(18);e.exports=r(73)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,r):"values"==t?i(0,e[r]):i(0,[r,e[r]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},function(e,t,r){var n=r(8);n(n.S+n.F,"Object",{assign:r(199)})},function(e,t,r){var n=r(8);n(n.S,"Object",{create:r(50)})},function(e,t,r){var n=r(8);n(n.S+n.F*!r(11),"Object",{defineProperty:r(9).f})},function(e,t,r){var n=r(18),i=r(75).f;r(77)("getOwnPropertyDescriptor",function(){return function(e,t){return i(n(e),t)}})},function(e,t,r){var n=r(28),i=r(122);r(77)("getPrototypeOf",function(){return function(e){return i(n(e))}})},function(e,t,r){var n=r(28),i=r(27);r(77)("keys",function(){return function(e){return i(n(e))}})},function(e,t,r){var n=r(8);n(n.S,"Object",{setPrototypeOf:r(202).set})},function(e,t,r){"use strict";var n,i,o,a=r(49),s=r(3),u=r(15),c=r(46),l=r(8),f=r(17),h=r(68),p=r(69),d=r(48),v=r(203),y=r(126).set,g=r(198)(),m=s.TypeError,b=s.process,w=s.Promise,b=s.process,_="process"==c(b),x=function(){},k=!!function(){try{var e=w.resolve(1),t=(e.constructor={})[r(1)("species")]=function(e){e(x,x)};return(_||"function"==typeof PromiseRejectionEvent)&&e.then(x)instanceof t}catch(e){}}(),T=function(e,t){return e===t||e===w&&t===o},E=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},S=function(e){return T(w,e)?new N(e):new i(e)},N=i=function(e){var t,r;this.promise=new e(function(e,n){if(void 0!==t||void 0!==r)throw m("Bad Promise constructor");t=e,r=n}),this.resolve=h(t),this.reject=h(r)},I=function(e){try{e()}catch(e){return{error:e}}},O=function(e,t){if(!e._n){e._n=!0;var r=e._c;g(function(){for(var n=e._v,i=1==e._s,o=0;r.length>o;)!function(t){var r,o,a=i?t.ok:t.fail,s=t.resolve,u=t.reject,c=t.domain;try{a?(i||(2==e._h&&C(e),e._h=1),a===!0?r=n:(c&&c.enter(),r=a(n),c&&c.exit()),r===t.promise?u(m("Promise-chain cycle")):(o=E(r))?o.call(r,s,u):s(r)):u(n)}catch(e){u(e)}}(r[o++]);e._c=[],e._n=!1,t&&!e._h&&R(e)})}},R=function(e){y.call(s,function(){var t,r,n,i=e._v;if(j(e)&&(t=I(function(){_?b.emit("unhandledRejection",i,e):(r=s.onunhandledrejection)?r({promise:e,reason:i}):(n=s.console)&&n.error&&n.error("Unhandled promise rejection",i)}),e._h=_||j(e)?2:1),e._a=void 0,t)throw t.error})},j=function(e){if(1==e._h)return!1;for(var t,r=e._a||e._c,n=0;r.length>n;)if(t=r[n++],t.fail||!j(t.promise))return!1;return!0},C=function(e){y.call(s,function(){var t;_?b.emit("rejectionHandled",e):(t=s.onrejectionhandled)&&t({promise:e,reason:e._v})})},A=function(e){var t=this;t._d||(t._d=!0,t=t._w||t,t._v=e,t._s=2,t._a||(t._a=t._c.slice()),O(t,!0))},L=function(e){var t,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===e)throw m("Promise can't be resolved itself");(t=E(e))?g(function(){var n={_w:r,_d:!1};try{t.call(e,u(L,n,1),u(A,n,1))}catch(e){A.call(n,e)}}):(r._v=e,r._s=1,O(r,!1))}catch(e){A.call({_w:r,_d:!1},e)}}};k||(w=function(e){p(this,w,"Promise","_h"),h(e),n.call(this);try{e(u(L,this,1),u(A,this,1))}catch(e){A.call(this,e)}},n=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},n.prototype=r(78)(w.prototype,{then:function(e,t){var r=S(v(this,w));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=_?b.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&O(this,!1),r.promise},catch:function(e){return this.then(void 0,e)}}),N=function(){var e=new n;this.promise=e,this.resolve=u(L,e,1),this.reject=u(A,e,1)}),l(l.G+l.W+l.F*!k,{Promise:w}),r(36)(w,"Promise"),r(125)("Promise"),o=r(0).Promise,l(l.S+l.F*!k,"Promise",{reject:function(e){var t=S(this);return(0,t.reject)(e),t.promise}}),l(l.S+l.F*(a||!k),"Promise",{resolve:function(e){if(e instanceof w&&T(e.constructor,this))return e;var t=S(this);return(0,t.resolve)(e),t.promise}}),l(l.S+l.F*!(k&&r(119)(function(e){w.all(e).catch(x)})),"Promise",{all:function(e){var t=this,r=S(t),n=r.resolve,i=r.reject,o=I(function(){var r=[],o=0,a=1;d(e,!1,function(e){var s=o++,u=!1;r.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,r[s]=e,--a||n(r))},i)}),--a||n(r)});return o&&i(o.error),r.promise},race:function(e){var t=this,r=S(t),n=r.reject,i=I(function(){d(e,!1,function(e){t.resolve(e).then(r.resolve,n)})});return i&&n(i.error),r.promise}})},function(e,t,r){"use strict";var n=r(190);e.exports=r(192)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return n.def(this,e=0===e?0:e,e)}},n)},function(e,t,r){"use strict";var n=r(3),i=r(21),o=r(11),a=r(8),s=r(124),u=r(74).KEY,c=r(20),l=r(80),f=r(36),h=r(53),p=r(1),d=r(84),v=r(83),y=r(197),g=r(194),m=r(117),b=r(12),w=r(18),_=r(82),x=r(35),k=r(50),T=r(201),E=r(75),S=r(9),N=r(27),I=E.f,O=S.f,R=T.f,j=n.Symbol,C=n.JSON,A=C&&C.stringify,L=p("_hidden"),D=p("toPrimitive"),M={}.propertyIsEnumerable,U=l("symbol-registry"),P=l("symbols"),q=l("op-symbols"),F=Object.prototype,z="function"==typeof j,B=n.QObject,H=!B||!B.prototype||!B.prototype.findChild,X=o&&c(function(){return 7!=k(O({},"a",{get:function(){return O(this,"a",{value:7}).a}})).a})?function(e,t,r){var n=I(F,t);n&&delete F[t],O(e,t,r),n&&e!==F&&O(F,t,n)}:O,V=function(e){var t=P[e]=k(j.prototype);return t._k=e,t},W=z&&"symbol"==typeof j.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof j},G=function(e,t,r){return e===F&&G(q,t,r),b(e),t=_(t,!0),b(r),i(P,t)?(r.enumerable?(i(e,L)&&e[L][t]&&(e[L][t]=!1),r=k(r,{enumerable:x(0,!1)})):(i(e,L)||O(e,L,x(1,{})),e[L][t]=!0),X(e,t,r)):O(e,t,r)},J=function(e,t){b(e);for(var r,n=g(t=w(t)),i=0,o=n.length;o>i;)G(e,r=n[i++],t[r]);return e},Q=function(e,t){return void 0===t?k(e):J(k(e),t)},$=function(e){var t=M.call(this,e=_(e,!0));return!(this===F&&i(P,e)&&!i(q,e))&&(!(t||!i(this,e)||!i(P,e)||i(this,L)&&this[L][e])||t)},Y=function(e,t){if(e=w(e),t=_(t,!0),e!==F||!i(P,t)||i(q,t)){var r=I(e,t);return!r||!i(P,t)||i(e,L)&&e[L][t]||(r.enumerable=!0),r}},K=function(e){for(var t,r=R(w(e)),n=[],o=0;r.length>o;)i(P,t=r[o++])||t==L||t==u||n.push(t);return n},Z=function(e){for(var t,r=e===F,n=R(r?q:w(e)),o=[],a=0;n.length>a;)!i(P,t=n[a++])||r&&!i(F,t)||o.push(P[t]);return o};z||(j=function(){if(this instanceof j)throw TypeError("Symbol is not a constructor!");var e=h(arguments.length>0?arguments[0]:void 0),t=function(r){this===F&&t.call(q,r),i(this,L)&&i(this[L],e)&&(this[L][e]=!1),X(this,e,x(1,r))};return o&&H&&X(F,e,{configurable:!0,set:t}),V(e)},s(j.prototype,"toString",function(){return this._k}),E.f=Y,S.f=G,r(121).f=T.f=K,r(51).f=$,r(76).f=Z,o&&!r(49)&&s(F,"propertyIsEnumerable",$,!0),d.f=function(e){return V(p(e))}),a(a.G+a.W+a.F*!z,{Symbol:j});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)p(ee[te++]);for(var ee=N(p.store),te=0;ee.length>te;)v(ee[te++]);a(a.S+a.F*!z,"Symbol",{for:function(e){return i(U,e+="")?U[e]:U[e]=j(e)},keyFor:function(e){if(W(e))return y(U,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){H=!0},useSimple:function(){H=!1}}),a(a.S+a.F*!z,"Object",{create:Q,defineProperty:G,defineProperties:J,getOwnPropertyDescriptor:Y,getOwnPropertyNames:K,getOwnPropertySymbols:Z}),C&&a(a.S+a.F*(!z||c(function(){var e=j();return"[null]"!=A([e])||"{}"!=A({a:e})||"{}"!=A(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!W(e)){for(var t,r,n=[e],i=1;arguments.length>i;)n.push(arguments[i++]);return t=n[1],"function"==typeof t&&(r=t),!r&&m(t)||(t=function(e,t){if(r&&(t=r.call(this,e,t)),!W(t))return t}),n[1]=t,A.apply(C,n)}}}),j.prototype[D]||r(16)(j.prototype,D,j.prototype.valueOf),f(j,"Symbol"),f(Math,"Math",!0),f(n.JSON,"JSON",!0)},function(e,t,r){var n=r(8);n(n.P+n.R,"Set",{toJSON:r(191)("Set")})},function(e,t,r){r(83)("asyncIterator")},function(e,t,r){r(83)("observable")},function(e,t,r){var n=r(145),i=e.exports;for(var o in n)n.hasOwnProperty(o)&&(i[o]=n[o]);i.request=function(e,t){return e||(e={}),e.scheme="https",e.protocol="https:",n.request.call(this,e,t)}},function(e,t){t.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,c=u>>1,l=-7,f=r?i-1:0,h=r?-1:1,p=e[t+f];for(f+=h,o=p&(1<<-l)-1,p>>=-l,l+=s;l>0;o=256*o+e[t+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=n;l>0;a=256*a+e[t+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return a?0/0:1/0*(p?-1:1);a+=Math.pow(2,n),o-=c}return(p?-1:1)*a*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||1/0===t?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),t+=a+f>=1?h/u:h*Math.pow(2,1-f),t*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(t*u-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[r+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[r+p]=255&a,p+=d,a/=256,c-=8);e[r+p-d]|=128*v}},function(e,t,r){!function(e,r){r(t)}(0,function(e){"use strict";function t(e){return e.value=!1,e}function r(e){e&&(e.value=!0)}function n(){}function i(e,t){t=t||0;for(var r=Math.max(0,e.length-t),n=new Array(r),i=0;i<r;i++)n[i]=e[i+t];return n}function o(e){return void 0===e.size&&(e.size=e.__iterate(s)),e.size}function a(e,t){if("number"!=typeof t){var r=t>>>0;if(""+r!==t||4294967295===r)return 0/0;t=r}return t<0?o(e)+t:t}function s(){return!0}function u(e,t,r){return(0===e||void 0!==r&&e<=-r)&&(void 0===t||void 0!==r&&t>=r)}function c(e,t){return f(e,t,0)}function l(e,t){return f(e,t,t)}function f(e,t,r){return void 0===e?r:e<0?1/0===t?t:0|Math.max(0,t+e):void 0===t||t===e?e:0|Math.min(t,e)}function h(e){return(p(e)||m(e))&&!e.__ownerID}function p(e){return!(!e||!e[Ct])}function d(e){return!(!e||!e[At])}function v(e){return!(!e||!e[Lt])}function y(e){return d(e)||v(e)}function g(e){return!(!e||!e[Dt])}function m(e){return!(!e||!e[Mt])}function b(e){return!(!e||"function"!=typeof e.equals||"function"!=typeof e.hashCode)}function w(e,t,r,n){var i=0===e?t:1===e?r:[t,r];return n?n.value=i:n={value:i,done:!1},n}function _(){return{value:void 0,done:!0}}function x(e){return!!E(e)}function k(e){return e&&"function"==typeof e.next}function T(e){var t=E(e);return t&&t.call(e)}function E(e){var t=e&&(Xt&&e[Xt]||e[Vt]);if("function"==typeof t)return t}function S(e){return e&&"number"==typeof e.length}function N(e){return!(!e||!e[Kt])}function I(){return tr||(tr=new Zt([]))}function O(e){var t=Array.isArray(e)?new Zt(e):k(e)?new ir(e):x(e)?new nr(e):void 0;if(t)return t.fromEntrySeq();if("object"==typeof e)return new er(e);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+e)}function R(e){var t=C(e);if(t)return t;throw new TypeError("Expected Array or collection object of values: "+e)}function j(e){var t=C(e);if(t)return t;if("object"==typeof e)return new er(e);throw new TypeError("Expected Array or collection object of values, or keyed object: "+e)}function C(e){return S(e)?new Zt(e):k(e)?new ir(e):x(e)?new nr(e):void 0}function A(e,t){if(e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){if(e=e.valueOf(),t=t.valueOf(),e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1}return!!(b(e)&&b(t)&&e.equals(t))}function L(e,t){return D([],t||M,e,"",t&&t.length>2?[]:void 0,{"":e})}function D(e,t,r,n,i,o){var a=Array.isArray(r)?$t:U(r)?Qt:null;if(a){if(~e.indexOf(r))throw new TypeError("Cannot convert circular structure to Immutable");e.push(r),i&&""!==n&&i.push(n);var s=t.call(o,n,a(r).map(function(n,o){return D(e,t,n,o,i,r)}),i&&i.slice());return e.pop(),i&&i.pop(),s}return r}function M(e,t){return d(t)?t.toMap():t.toList()}function U(e){return e&&(e.constructor===Object||void 0===e.constructor)}function P(e){return e>>>1&1073741824|3221225471&e}function q(e){if(e===!1||null===e||void 0===e)return 0;if("function"==typeof e.valueOf&&((e=e.valueOf())===!1||null===e||void 0===e))return 0;if(e===!0)return 1;var t=typeof e;if("number"===t){if(e!==e||1/0===e)return 0;var r=0|e;for(r!==e&&(r^=4294967295*e);e>4294967295;)e/=4294967295,r^=e;return P(r)}if("string"===t)return e.length>fr?F(e):z(e);if("function"==typeof e.hashCode)return e.hashCode();if("object"===t)return B(e);if("function"==typeof e.toString)return z(e.toString());throw new Error("Value type "+t+" cannot be hashed.")}function F(e){var t=dr[e];return void 0===t&&(t=z(e),pr===hr&&(pr=0,dr={}),pr++,dr[e]=t),t}function z(e){for(var t=0,r=0;r<e.length;r++)t=31*t+e.charCodeAt(r)|0;return P(t)}function B(e){var t;if(ur&&void 0!==(t=rr.get(e)))return t;if(void 0!==(t=e[lr]))return t;if(!sr){if(void 0!==(t=e.propertyIsEnumerable&&e.propertyIsEnumerable[lr]))return t;if(void 0!==(t=H(e)))return t}if(t=++cr,1073741824&cr&&(cr=0),ur)rr.set(e,t);else{if(void 0!==ar&&ar(e)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(sr)Object.defineProperty(e,lr,{enumerable:!1,configurable:!1,writable:!1,value:t});else if(void 0!==e.propertyIsEnumerable&&e.propertyIsEnumerable===e.constructor.prototype.propertyIsEnumerable)e.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},e.propertyIsEnumerable[lr]=t;else{if(void 0===e.nodeType)throw new Error("Unable to set a non-enumerable property on object.");e[lr]=t}}return t}function H(e){if(e&&e.nodeType>0)switch(e.nodeType){case 1:return e.uniqueID;case 9:return e.documentElement&&e.documentElement.uniqueID}}function X(e){var t=le(e);return t._iter=e,t.size=e.size,t.flip=function(){return e},t.reverse=function(){var t=e.reverse.apply(this);return t.flip=function(){return e.reverse()},t},t.has=function(t){return e.includes(t)},t.includes=function(t){return e.has(t)},t.cacheResult=fe,t.__iterateUncached=function(t,r){var n=this;return e.__iterate(function(e,r){return t(r,e,n)!==!1},r)},t.__iteratorUncached=function(t,r){if(t===Ht){var n=e.__iterator(t,r);return new Gt(function(){var e=n.next();if(!e.done){var t=e.value[0];e.value[0]=e.value[1],e.value[1]=t}return e})}return e.__iterator(t===Bt?zt:Bt,r)},t}function V(e,t,r){var n=le(e);return n.size=e.size,n.has=function(t){return e.has(t)},n.get=function(n,i){var o=e.get(n,Ot);return o===Ot?i:t.call(r,o,n,e)},n.__iterateUncached=function(n,i){var o=this;return e.__iterate(function(e,i,a){return n(t.call(r,e,i,a),i,o)!==!1},i)},n.__iteratorUncached=function(n,i){var o=e.__iterator(Ht,i);return new Gt(function(){var i=o.next();if(i.done)return i;var a=i.value,s=a[0];return w(n,s,t.call(r,a[1],s,e),i)})},n}function W(e,t){var r=this,n=le(e);return n._iter=e,n.size=e.size,n.reverse=function(){return e},e.flip&&(n.flip=function(){var t=X(e);return t.reverse=function(){return e.flip()},t}),n.get=function(r,n){return e.get(t?r:-1-r,n)},n.has=function(r){return e.has(t?r:-1-r)},n.includes=function(t){return e.includes(t)},n.cacheResult=fe,n.__iterate=function(r,n){var i=this,a=0;return n&&o(e),e.__iterate(function(e,o){return r(e,t?o:n?i.size-++a:a++,i)},!n)},n.__iterator=function(n,i){var a=0;i&&o(e);var s=e.__iterator(Ht,!i);return new Gt(function(){var e=s.next();if(e.done)return e;var o=e.value;return w(n,t?o[0]:i?r.size-++a:a++,o[1],e)})},n}function G(e,t,r,n){var i=le(e);return n&&(i.has=function(n){var i=e.get(n,Ot);return i!==Ot&&!!t.call(r,i,n,e)},i.get=function(n,i){var o=e.get(n,Ot);return o!==Ot&&t.call(r,o,n,e)?o:i}),i.__iterateUncached=function(i,o){var a=this,s=0;return e.__iterate(function(e,o,u){if(t.call(r,e,o,u))return i(e,n?o:s++,a)},o),s},i.__iteratorUncached=function(i,o){var a=e.__iterator(Ht,o),s=0;return new Gt(function(){for(;;){var o=a.next();if(o.done)return o;var u=o.value,c=u[0],l=u[1];if(t.call(r,l,c,e))return w(i,n?c:s++,l,o)}})},i}function J(e,t,r){var n=br().asMutable();return e.__iterate(function(i,o){n.update(t.call(r,i,o,e),0,function(e){return e+1})}),n.asImmutable()}function Q(e,t,r){var n=d(e),i=(g(e)?Pr():br()).asMutable();e.__iterate(function(o,a){i.update(t.call(r,o,a,e),function(e){return e=e||[],e.push(n?[a,o]:o),e})});var o=ce(e);return i.map(function(t){return se(e,o(t))})}function $(e,t,r,n){var i=e.size;if(u(t,r,i))return e;var o=c(t,i),s=l(r,i);if(o!==o||s!==s)return $(e.toSeq().cacheResult(),t,r,n);var f,h=s-o;h===h&&(f=h<0?0:h);var p=le(e);return p.size=0===f?f:e.size&&f||void 0,!n&&N(e)&&f>=0&&(p.get=function(t,r){return t=a(this,t),t>=0&&t<f?e.get(t+o,r):r}),p.__iterateUncached=function(t,r){var i=this;if(0===f)return 0;if(r)return this.cacheResult().__iterate(t,r);var a=0,s=!0,u=0;return e.__iterate(function(e,r){if(!s||!(s=a++<o))return u++,t(e,n?r:u-1,i)!==!1&&u!==f}),u},p.__iteratorUncached=function(t,r){if(0!==f&&r)return this.cacheResult().__iterator(t,r);var i=0!==f&&e.__iterator(t,r),a=0,s=0;return new Gt(function(){for(;a++<o;)i.next();if(++s>f)return _();var e=i.next();return n||t===Bt?e:t===zt?w(t,s-1,void 0,e):w(t,s-1,e.value[1],e)})},p}function Y(e,t,r){var n=le(e);return n.__iterateUncached=function(n,i){var o=this;if(i)return this.cacheResult().__iterate(n,i);var a=0;return e.__iterate(function(e,i,s){return t.call(r,e,i,s)&&++a&&n(e,i,o)}),a},n.__iteratorUncached=function(n,i){var o=this;if(i)return this.cacheResult().__iterator(n,i);var a=e.__iterator(Ht,i),s=!0;return new Gt(function(){if(!s)return _();var e=a.next();if(e.done)return e;var i=e.value,u=i[0],c=i[1];return t.call(r,c,u,o)?n===Ht?e:w(n,u,c,e):(s=!1,_())})},n}function K(e,t,r,n){var i=le(e);return i.__iterateUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterate(i,o);var s=!0,u=0;return e.__iterate(function(e,o,c){if(!s||!(s=t.call(r,e,o,c)))return u++,i(e,n?o:u-1,a)}),u},i.__iteratorUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterator(i,o);var s=e.__iterator(Ht,o),u=!0,c=0;return new Gt(function(){var e,o,l;do{if(e=s.next(),e.done)return n||i===Bt?e:i===zt?w(i,c++,void 0,e):w(i,c++,e.value[1],e);var f=e.value;o=f[0],l=f[1],u&&(u=t.call(r,l,o,a))}while(u);return i===Ht?e:w(i,o,l,e)})},i}function Z(e,t){var r=d(e),n=[e].concat(t).map(function(e){return p(e)?r&&(e=Pt(e)):e=r?O(e):R(Array.isArray(e)?e:[e]),e}).filter(function(e){return 0!==e.size});if(0===n.length)return e;if(1===n.length){var i=n[0];if(i===e||r&&d(i)||v(e)&&v(i))return i}var o=new Zt(n);return r?o=o.toKeyedSeq():v(e)||(o=o.toSetSeq()),o=o.flatten(!0),o.size=n.reduce(function(e,t){if(void 0!==e){var r=t.size;if(void 0!==r)return e+r}},0),o}function ee(e,t,r){var n=le(e);return n.__iterateUncached=function(i,o){function a(e,c){e.__iterate(function(e,o){return(!t||c<t)&&p(e)?a(e,c+1):i(e,r?o:s++,n)===!1&&(u=!0),!u},o)}if(o)return this.cacheResult().__iterate(i,o);var s=0,u=!1;return a(e,0),s},n.__iteratorUncached=function(n,i){if(i)return this.cacheResult().__iterator(n,i);var o=e.__iterator(n,i),a=[],s=0;return new Gt(function(){for(;o;){var e=o.next();if(e.done===!1){var u=e.value;if(n===Ht&&(u=u[1]),t&&!(a.length<t)||!p(u))return r?e:w(n,s++,u,e);a.push(o),o=u.__iterator(n,i)}else o=a.pop()}return _()})},n}function te(e,t,r){var n=ce(e);return e.toSeq().map(function(i,o){return n(t.call(r,i,o,e))}).flatten(!0)}function re(e,t){var r=le(e);return r.size=e.size&&2*e.size-1,r.__iterateUncached=function(r,n){var i=this,o=0;return e.__iterate(function(e){return(!o||r(t,o++,i)!==!1)&&r(e,o++,i)!==!1},n),o},r.__iteratorUncached=function(r,n){var i,o=e.__iterator(Bt,n),a=0;return new Gt(function(){return(!i||a%2)&&(i=o.next(),i.done)?i:a%2?w(r,a++,t):w(r,a++,i.value,i)})},r}function ne(e,t,r){t||(t=he);var n=d(e),i=0,o=e.toSeq().map(function(t,n){return[n,t,i++,r?r(t,n,e):t]}).toArray();return o.sort(function(e,r){return t(e[3],r[3])||e[2]-r[2]}).forEach(n?function(e,t){o[t].length=2}:function(e,t){o[t]=e[1]}),n?Qt(o):v(e)?$t(o):Yt(o)}function ie(e,t,r){if(t||(t=he),r){var n=e.toSeq().map(function(t,n){return[t,r(t,n,e)]}).reduce(function(e,r){return oe(t,e[1],r[1])?r:e});return n&&n[0]}return e.reduce(function(e,r){return oe(t,e,r)?r:e})}function oe(e,t,r){var n=e(r,t);return 0===n&&r!==t&&(void 0===r||null===r||r!==r)||n>0}function ae(e,t,r){var n=le(e);return n.size=new Zt(r).map(function(e){return e.size}).min(),n.__iterate=function(e,t){for(var r,n=this,i=this.__iterator(Bt,t),o=0;!(r=i.next()).done&&e(r.value,o++,n)!==!1;);return o},n.__iteratorUncached=function(e,n){var i=r.map(function(e){return e=Ut(e),T(n?e.reverse():e)}),o=0,a=!1;return new Gt(function(){var r;return a||(r=i.map(function(e){return e.next()}),a=r.some(function(e){return e.done})),a?_():w(e,o++,t.apply(null,r.map(function(e){return e.value})))})},n}function se(e,t){return e===t?e:N(e)?t:e.constructor(t)}function ue(e){if(e!==Object(e))throw new TypeError("Expected [K, V] tuple: "+e)}function ce(e){return d(e)?Pt:v(e)?qt:Ft}function le(e){return Object.create((d(e)?Qt:v(e)?$t:Yt).prototype)}function fe(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):Jt.prototype.cacheResult.call(this)}function he(e,t){return void 0===e&&void 0===t?0:void 0===e?1:void 0===t?-1:e>t?1:e<t?-1:0}function pe(e){if(S(e)&&"string"!=typeof e)return e;if(g(e))return e.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+e)}function de(e,t){if(!e)throw new Error(t)}function ve(e){de(1/0!==e,"Cannot perform this action with an infinite size.")}function ye(e){return"string"==typeof e?JSON.stringify(e):String(e)}function ge(e){return!(!e||!e[wr])}function me(e,t){return w(e,t[0],t[1])}function be(e,t){return{node:e,index:0,__prev:t}}function we(e,t,r,n){var i=Object.create(_r);return i.size=e,i._root=t,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function _e(){return Nr||(Nr=we(0))}function xe(e,r,n){var i,o;if(e._root){var a=t(Rt),s=t(jt);if(i=ke(e._root,e.__ownerID,0,void 0,r,n,a,s),!s.value)return e;o=e.size+(a.value?n===Ot?-1:1:0)}else{if(n===Ot)return e;o=1,i=new xr(e.__ownerID,[[r,n]])}return e.__ownerID?(e.size=o,e._root=i,e.__hash=void 0,e.__altered=!0,e):i?we(o,i):_e()}function ke(e,t,n,i,o,a,s,u){return e?e.update(t,n,i,o,a,s,u):a===Ot?e:(r(u),r(s),new Sr(t,i,[o,a]))}function Te(e){return e.constructor===Sr||e.constructor===Er}function Ee(e,t,r,n,i){if(e.keyHash===n)return new Er(t,n,[e.entry,i]);var o,a=(0===r?e.keyHash:e.keyHash>>>r)&It,s=(0===r?n:n>>>r)&It,u=a===s?[Ee(e,t,r+St,n,i)]:(o=new Sr(t,n,i),a<s?[e,o]:[o,e]);return new kr(t,1<<a|1<<s,u)}function Se(e,t,r,i){e||(e=new n);for(var o=new Sr(e,q(r),[r,i]),a=0;a<t.length;a++){var s=t[a];o=o.update(e,0,void 0,s[0],s[1])}return o}function Ne(e,t,r,n){for(var i=0,o=0,a=new Array(r),s=0,u=1,c=t.length;s<c;s++,u<<=1){var l=t[s];void 0!==l&&s!==n&&(i|=u,a[o++]=l)}return new kr(e,i,a)}function Ie(e,t,r,n,i){for(var o=0,a=new Array(Nt),s=0;0!==r;s++,r>>>=1)a[s]=1&r?t[o++]:void 0;return a[n]=i,new Tr(e,o+1,a)}function Oe(e,t,r){for(var n=[],i=0;i<r.length;i++){var o=r[i],a=Pt(o);p(o)||(a=a.map(function(e){return L(e)})),n.push(a)}return Ce(e,t,n)}function Re(e,t){return e&&e.mergeDeep&&p(t)?e.mergeDeep(t):A(e,t)?e:t}function je(e){return function(t,r,n){if(t&&t.mergeDeepWith&&p(r))return t.mergeDeepWith(e,r);var i=e(t,r,n);return A(t,i)?t:i}}function Ce(e,t,r){return r=r.filter(function(e){return 0!==e.size}),0===r.length?e:0!==e.size||e.__ownerID||1!==r.length?e.withMutations(function(e){for(var n=t?function(r,n){e.update(n,Ot,function(e){return e===Ot?r:t(e,r,n)})}:function(t,r){e.set(r,t)},i=0;i<r.length;i++)r[i].forEach(n)}):e.constructor(r[0])}function Ae(e,t,r,n,i){var o=e===Ot;if(r===t.length){var a=o?n:e,s=i(a);return s===a?e:s}if(!(o||e&&e.set))throw new TypeError("Invalid keyPath: Value at ["+t.slice(0,r).map(ye)+"] does not have a .set() method and cannot be updated: "+e);var u=t[r],c=o?Ot:e.get(u,Ot),l=Ae(c,t,r+1,n,i);return l===c?e:l===Ot?e.remove(u):(o?_e():e).set(u,l)}function Le(e){return e-=e>>1&1431655765,e=(858993459&e)+(e>>2&858993459),e=e+(e>>4)&252645135,e+=e>>8,127&(e+=e>>16)}function De(e,t,r,n){var o=n?e:i(e);return o[t]=r,o}function Me(e,t,r,n){var i=e.length+1;if(n&&t+1===i)return e[t]=r,e;for(var o=new Array(i),a=0,s=0;s<i;s++)s===t?(o[s]=r,a=-1):o[s]=e[s+a];return o}function Ue(e,t,r){var n=e.length-1;if(r&&t===n)return e.pop(),e;for(var i=new Array(n),o=0,a=0;a<n;a++)a===t&&(o=1),i[a]=e[a+o];return i}function Pe(e){return!(!e||!e[Ar])}function qe(e,t){function r(e,t,r){return 0===t?n(e,r):i(e,t,r)}function n(e,r){var n=r===s?u&&u.array:e&&e.array,i=r>o?0:o-r,c=a-r;return c>Nt&&(c=Nt),function(){if(i===c)return Ur;var e=t?--c:i++;return n&&n[e]}}function i(e,n,i){var s,u=e&&e.array,c=i>o?0:o-i>>n,l=1+(a-i>>n);return l>Nt&&(l=Nt),function(){for(;;){if(s){var e=s();if(e!==Ur)return e;s=null}if(c===l)return Ur;var o=t?--l:c++;s=r(u&&u[o],n-St,i+(o<<n))}}}var o=e._origin,a=e._capacity,s=Je(a),u=e._tail;return r(e._root,e._level,0)}function Fe(e,t,r,n,i,o,a){var s=Object.create(Lr);return s.size=t-e,s._origin=e,s._capacity=t,s._level=r,s._root=n,s._tail=i,s.__ownerID=o,s.__hash=a,s.__altered=!1,s}function ze(){return Mr||(Mr=Fe(0,0,St))}function Be(e,r,n){if((r=a(e,r))!==r)return e;if(r>=e.size||r<0)return e.withMutations(function(e){r<0?We(e,r).set(0,n):We(e,0,r+1).set(r,n)});r+=e._origin;var i=e._tail,o=e._root,s=t(jt);return r>=Je(e._capacity)?i=He(i,e.__ownerID,0,r,n,s):o=He(o,e.__ownerID,e._level,r,n,s),s.value?e.__ownerID?(e._root=o,e._tail=i,e.__hash=void 0,e.__altered=!0,e):Fe(e._origin,e._capacity,e._level,o,i):e}function He(e,t,n,i,o,a){var s=i>>>n&It,u=e&&s<e.array.length;if(!u&&void 0===o)return e;var c;if(n>0){var l=e&&e.array[s],f=He(l,t,n-St,i,o,a);return f===l?e:(c=Xe(e,t),c.array[s]=f,c)}return u&&e.array[s]===o?e:(r(a),c=Xe(e,t),void 0===o&&s===c.array.length-1?c.array.pop():c.array[s]=o,c)}function Xe(e,t){return t&&e&&t===e.ownerID?e:new Dr(e?e.array.slice():[],t)}function Ve(e,t){if(t>=Je(e._capacity))return e._tail;if(t<1<<e._level+St){for(var r=e._root,n=e._level;r&&n>0;)r=r.array[t>>>n&It],n-=St;return r}}function We(e,t,r){void 0!==t&&(t|=0),void 0!==r&&(r|=0);var i=e.__ownerID||new n,o=e._origin,a=e._capacity,s=o+t,u=void 0===r?a:r<0?a+r:o+r;if(s===o&&u===a)return e;if(s>=u)return e.clear();for(var c=e._level,l=e._root,f=0;s+f<0;)l=new Dr(l&&l.array.length?[void 0,l]:[],i),c+=St,f+=1<<c;f&&(s+=f,o+=f,u+=f,a+=f);for(var h=Je(a),p=Je(u);p>=1<<c+St;)l=new Dr(l&&l.array.length?[l]:[],i),c+=St;var d=e._tail,v=p<h?Ve(e,u-1):p>h?new Dr([],i):d;if(d&&p>h&&s<a&&d.array.length){l=Xe(l,i);for(var y=l,g=c;g>St;g-=St){var m=h>>>g&It;y=y.array[m]=Xe(y.array[m],i)}y.array[h>>>St&It]=d}if(u<a&&(v=v&&v.removeAfter(i,0,u)),s>=p)s-=p,u-=p,c=St,l=null,v=v&&v.removeBefore(i,0,s);else if(s>o||p<h){for(f=0;l;){var b=s>>>c&It;if(b!==p>>>c&It)break;b&&(f+=(1<<c)*b),c-=St,l=l.array[b]}l&&s>o&&(l=l.removeBefore(i,c,s-f)),l&&p<h&&(l=l.removeAfter(i,c,p-f)),f&&(s-=f,u-=f)}return e.__ownerID?(e.size=u-s,e._origin=s,e._capacity=u,e._level=c,e._root=l,e._tail=v,e.__hash=void 0,e.__altered=!0,e):Fe(s,u,c,l,v)}function Ge(e,t,r){for(var n=[],i=0,o=0;o<r.length;o++){var a=r[o],s=qt(a);s.size>i&&(i=s.size),p(a)||(s=s.map(function(e){return L(e)})),n.push(s)}return i>e.size&&(e=e.setSize(i)),Ce(e,t,n)}function Je(e){return e<Nt?0:e-1>>>St<<St}function Qe(e){return ge(e)&&g(e)}function $e(e,t,r,n){var i=Object.create(Pr.prototype);return i.size=e?e.size:0,i._map=e,i._list=t,i.__ownerID=r,i.__hash=n,i}function Ye(){return qr||(qr=$e(_e(),ze()))}function Ke(e,t,r){var n,i,o=e._map,a=e._list,s=o.get(t),u=void 0!==s;if(r===Ot){if(!u)return e;a.size>=Nt&&a.size>=2*o.size?(i=a.filter(function(e,t){return void 0!==e&&s!==t}),n=i.toKeyedSeq().map(function(e){return e[0]}).flip().toMap(),e.__ownerID&&(n.__ownerID=i.__ownerID=e.__ownerID)):(n=o.remove(t),i=s===a.size-1?a.pop():a.set(s,void 0))}else if(u){if(r===a.get(s)[1])return e;n=o,i=a.set(s,[t,r])}else n=o.set(t,a.size),i=a.set(a.size,[t,r]);return e.__ownerID?(e.size=n.size,e._map=n,e._list=i,e.__hash=void 0,e):$e(n,i)}function Ze(e){return!(!e||!e[zr])}function et(e,t,r,n){var i=Object.create(Br);return i.size=e,i._head=t,i.__ownerID=r,i.__hash=n,i.__altered=!1,i}function tt(){return Hr||(Hr=et(0))}function rt(e,t){if(e===t)return!0;if(!p(t)||void 0!==e.size&&void 0!==t.size&&e.size!==t.size||void 0!==e.__hash&&void 0!==t.__hash&&e.__hash!==t.__hash||d(e)!==d(t)||v(e)!==v(t)||g(e)!==g(t))return!1;if(0===e.size&&0===t.size)return!0;var r=!y(e);if(g(e)){var n=e.entries();return t.every(function(e,t){var i=n.next().value;return i&&A(i[1],e)&&(r||A(i[0],t))})&&n.next().done}var i=!1;if(void 0===e.size)if(void 0===t.size)"function"==typeof e.cacheResult&&e.cacheResult();else{i=!0;var o=e;e=t,t=o}var a=!0,s=t.__iterate(function(t,n){if(r?!e.has(t):i?!A(t,e.get(n,Ot)):!A(e.get(n,Ot),t))return a=!1,!1});return a&&e.size===s}function nt(e,t){var r=function(r){e.prototype[r]=t[r]};return Object.keys(t).forEach(r),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(t).forEach(r),e}function it(e){return!(!e||!e[Vr])}function ot(e,t){return e.__ownerID?(e.size=t.size,e._map=t,e):t===e._map?e:0===t.size?e.__empty():e.__make(t)}function at(e,t){var r=Object.create(Wr);return r.size=e?e.size:0,r._map=e,r.__ownerID=t,r}function st(){return Gr||(Gr=at(_e()))}function ut(e,t,r,n,i,o){return ve(e.size),e.__iterate(function(e,o,a){i?(i=!1,r=e):r=t.call(n,r,e,o,a)},o),r}function ct(e,t){return t}function lt(e,t){return[t,e]}function ft(e){return e&&"function"==typeof e.toJS?e.toJS():e}function ht(e){return function(){return!e.apply(this,arguments)}}function pt(e){return function(){return-e.apply(this,arguments)}}function dt(){return i(arguments)}function vt(e,t){return e<t?1:e>t?-1:0}function yt(e){if(1/0===e.size)return 0;var t=g(e),r=d(e),n=t?1:0;return gt(e.__iterate(r?t?function(e,t){n=31*n+mt(q(e),q(t))|0}:function(e,t){n=n+mt(q(e),q(t))|0}:t?function(e){n=31*n+q(e)|0}:function(e){n=n+q(e)|0}),n)}function gt(e,t){return t=or(t,3432918353),t=or(t<<15|t>>>-15,461845907),t=or(t<<13|t>>>-13,5),t=(t+3864292196|0)^e,t=or(t^t>>>16,2246822507),t=or(t^t>>>13,3266489909),t=P(t^t>>>16)}function mt(e,t){return e^t+2654435769+(e<<6)+(e>>2)|0}function bt(e){return it(e)&&g(e)}function wt(e,t){var r=Object.create(en);return r.size=e?e.size:0,r._map=e,r.__ownerID=t,r}function _t(){return tn||(tn=wt(Ye()))}function xt(e,t,r){var n=Object.create(Object.getPrototypeOf(e));return n._values=t,n.__ownerID=r,n}function kt(e){return e._name||e.constructor.name||"Record"}function Tt(e){return O(e._keys.map(function(t){return[t,e.get(t)]}))}function Et(e,t){try{Object.defineProperty(e,t,{get:function(){return this.get(t)},set:function(e){de(this.__ownerID,"Cannot set on an immutable record."),this.set(t,e)}})}catch(e){}}var St=5,Nt=1<<St,It=Nt-1,Ot={},Rt={value:!1},jt={value:!1},Ct="@@__IMMUTABLE_ITERABLE__@@",At="@@__IMMUTABLE_KEYED__@@",Lt="@@__IMMUTABLE_INDEXED__@@",Dt="@@__IMMUTABLE_ORDERED__@@",Mt="@@__IMMUTABLE_RECORD__@@",Ut=function(e){return p(e)?e:Jt(e)},Pt=function(e){function t(e){return d(e)?e:Qt(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Ut),qt=function(e){function t(e){return v(e)?e:$t(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Ut),Ft=function(e){function t(e){return p(e)&&!y(e)?e:Yt(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Ut);Ut.Keyed=Pt,Ut.Indexed=qt,Ut.Set=Ft;var zt=0,Bt=1,Ht=2,Xt="function"==typeof Symbol&&Symbol.iterator,Vt="@@iterator",Wt=Xt||Vt,Gt=function(e){this.next=e};Gt.prototype.toString=function(){return"[Iterator]"},Gt.KEYS=zt,Gt.VALUES=Bt,Gt.ENTRIES=Ht,Gt.prototype.inspect=Gt.prototype.toSource=function(){return this.toString()},Gt.prototype[Wt]=function(){return this};var Jt=function(e){function t(e){return null===e||void 0===e?I():p(e)||m(e)?e.toSeq():j(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq {","}")},t.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},t.prototype.__iterate=function(e,t){var r=this,n=this._cache;if(n){for(var i=n.length,o=0;o!==i;){var a=n[t?i-++o:o++];if(e(a[1],a[0],r)===!1)break}return o}return this.__iterateUncached(e,t)},t.prototype.__iterator=function(e,t){var r=this._cache;if(r){var n=r.length,i=0;return new Gt(function(){if(i===n)return _();var o=r[t?n-++i:i++];return w(e,o[0],o[1])})}return this.__iteratorUncached(e,t)},t}(Ut),Qt=function(e){function t(e){return null===e||void 0===e?I().toKeyedSeq():p(e)?d(e)?e.toSeq():e.fromEntrySeq():m(e)?e.toSeq():O(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toKeyedSeq=function(){return this},t}(Jt),$t=function(e){function t(e){return null===e||void 0===e?I():p(e)?d(e)?e.entrySeq():e.toIndexedSeq():m(e)?e.toSeq().entrySeq():R(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toIndexedSeq=function(){return this},t.prototype.toString=function(){return this.__toString("Seq [","]")},t}(Jt),Yt=function(e){function t(e){return(p(e)&&!y(e)?e:$t(e)).toSetSeq()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return t(arguments)},t.prototype.toSetSeq=function(){return this},t}(Jt);Jt.isSeq=N,Jt.Keyed=Qt,Jt.Set=Yt,Jt.Indexed=$t;var Kt="@@__IMMUTABLE_SEQ__@@";Jt.prototype[Kt]=!0;var Zt=function(e){function t(e){this._array=e,this.size=e.length}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e,t){return this.has(e)?this._array[a(this,e)]:t},t.prototype.__iterate=function(e,t){for(var r=this,n=this._array,i=n.length,o=0;o!==i;){var a=t?i-++o:o++;if(e(n[a],a,r)===!1)break}return o},t.prototype.__iterator=function(e,t){var r=this._array,n=r.length,i=0;return new Gt(function(){if(i===n)return _();var o=t?n-++i:i++;return w(e,o,r[o])})},t}($t),er=function(e){function t(e){var t=Object.keys(e);this._object=e,this._keys=t,this.size=t.length}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e,t){return void 0===t||this.has(e)?this._object[e]:t},t.prototype.has=function(e){return this._object.hasOwnProperty(e)},t.prototype.__iterate=function(e,t){for(var r=this,n=this._object,i=this._keys,o=i.length,a=0;a!==o;){var s=i[t?o-++a:a++];if(e(n[s],s,r)===!1)break}return a},t.prototype.__iterator=function(e,t){var r=this._object,n=this._keys,i=n.length,o=0;return new Gt(function(){if(o===i)return _();var a=n[t?i-++o:o++];return w(e,a,r[a])})},t}(Qt);er.prototype[Dt]=!0;var tr,rr,nr=function(e){function t(e){this._collection=e,this.size=e.length||e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.__iterateUncached=function(e,t){var r=this;if(t)return this.cacheResult().__iterate(e,t);var n=this._collection,i=T(n),o=0;if(k(i))for(var a;!(a=i.next()).done&&e(a.value,o++,r)!==!1;);return o},t.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var r=this._collection,n=T(r);if(!k(n))return new Gt(_);var i=0;return new Gt(function(){var t=n.next();return t.done?t:w(e,i++,t.value)})},t}($t),ir=function(e){function t(e){this._iterator=e,this._iteratorCache=[]}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.__iterateUncached=function(e,t){var r=this;if(t)return this.cacheResult().__iterate(e,t);for(var n=this._iterator,i=this._iteratorCache,o=0;o<i.length;)if(e(i[o],o++,r)===!1)return o;for(var a;!(a=n.next()).done;){var s=a.value;if(i[o]=s,e(s,o++,r)===!1)break}return o},t.prototype.__iteratorUncached=function(e,t){if(t)return this.cacheResult().__iterator(e,t);var r=this._iterator,n=this._iteratorCache,i=0;return new Gt(function(){if(i>=n.length){var t=r.next();if(t.done)return t;n[i]=t.value}return w(e,i,n[i++])})},t}($t),or="function"==typeof Math.imul&&Math.imul(4294967295,2)===-2?Math.imul:function(e,t){e|=0,t|=0;var r=65535&e,n=65535&t;return r*n+((e>>>16)*n+r*(t>>>16)<<16>>>0)|0},ar=Object.isExtensible,sr=function(){try{return Object.defineProperty({},"@",{}),!0}catch(e){return!1}}(),ur="function"==typeof WeakMap;ur&&(rr=new WeakMap);var cr=0,lr="__immutablehash__";"function"==typeof Symbol&&(lr=Symbol(lr));var fr=16,hr=255,pr=0,dr={},vr=function(e){function t(e,t){this._iter=e,this._useKeys=t,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e,t){return this._iter.get(e,t)},t.prototype.has=function(e){return this._iter.has(e)},t.prototype.valueSeq=function(){return this._iter.valueSeq()},t.prototype.reverse=function(){var e=this,t=W(this,!0);return this._useKeys||(t.valueSeq=function(){return e._iter.toSeq().reverse()}),t},t.prototype.map=function(e,t){var r=this,n=V(this,e,t);return this._useKeys||(n.valueSeq=function(){return r._iter.toSeq().map(e,t)}),n},t.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate(function(t,n){return e(t,n,r)},t)},t.prototype.__iterator=function(e,t){return this._iter.__iterator(e,t)},t}(Qt);vr.prototype[Dt]=!0;var yr=function(e){function t(e){this._iter=e,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.includes=function(e){return this._iter.includes(e)},t.prototype.__iterate=function(e,t){var r=this,n=0;return t&&o(this),this._iter.__iterate(function(i){return e(i,t?r.size-++n:n++,r)},t)},t.prototype.__iterator=function(e,t){var r=this,n=this._iter.__iterator(Bt,t),i=0;return t&&o(this),new Gt(function(){var o=n.next();return o.done?o:w(e,t?r.size-++i:i++,o.value,o)})},t}($t),gr=function(e){function t(e){this._iter=e,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.has=function(e){return this._iter.includes(e)},t.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate(function(t){return e(t,t,r)},t)},t.prototype.__iterator=function(e,t){var r=this._iter.__iterator(Bt,t);return new Gt(function(){var t=r.next();return t.done?t:w(e,t.value,t.value,t)})},t}(Yt),mr=function(e){function t(e){this._iter=e,this.size=e.size}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.entrySeq=function(){return this._iter.toSeq()},t.prototype.__iterate=function(e,t){var r=this;return this._iter.__iterate(function(t){if(t){ue(t);var n=p(t);return e(n?t.get(1):t[1],n?t.get(0):t[0],r)}},t)},t.prototype.__iterator=function(e,t){var r=this._iter.__iterator(Bt,t);return new Gt(function(){for(;;){var t=r.next();if(t.done)return t;var n=t.value;if(n){ue(n);var i=p(n);return w(e,i?n.get(0):n[0],i?n.get(1):n[1],t)}}})},t}(Qt);yr.prototype.cacheResult=vr.prototype.cacheResult=gr.prototype.cacheResult=mr.prototype.cacheResult=fe;var br=function(e){function t(t){return null===t||void 0===t?_e():ge(t)&&!g(t)?t:_e().withMutations(function(r){var n=e(t);ve(n.size),n.forEach(function(e,t){return r.set(t,e)})})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return _e().withMutations(function(t){for(var r=0;r<e.length;r+=2){if(r+1>=e.length)throw new Error("Missing value for key: "+e[r]);t.set(e[r],e[r+1])}})},t.prototype.toString=function(){return this.__toString("Map {","}")},t.prototype.get=function(e,t){return this._root?this._root.get(0,void 0,e,t):t},t.prototype.set=function(e,t){return xe(this,e,t)},t.prototype.setIn=function(e,t){return this.updateIn(e,Ot,function(){return t})},t.prototype.remove=function(e){return xe(this,e,Ot)},t.prototype.deleteIn=function(e){if(e=[].concat(pe(e)),e.length){var t=e.pop();return this.updateIn(e,function(e){return e&&e.remove(t)})}},t.prototype.deleteAll=function(e){var t=Ut(e);return 0===t.size?this:this.withMutations(function(e){t.forEach(function(t){return e.remove(t)})})},t.prototype.update=function(e,t,r){return 1===arguments.length?e(this):this.updateIn([e],t,r)},t.prototype.updateIn=function(e,t,r){r||(r=t,t=void 0);var n=Ae(this,pe(e),0,t,r);return n===Ot?t:n},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):_e()},t.prototype.merge=function(){return Oe(this,void 0,arguments)},t.prototype.mergeWith=function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return Oe(this,e,t)},t.prototype.mergeIn=function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return this.updateIn(e,_e(),function(e){return"function"==typeof e.merge?e.merge.apply(e,t):t[t.length-1]})},t.prototype.mergeDeep=function(){return Oe(this,Re,arguments)},t.prototype.mergeDeepWith=function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return Oe(this,je(e),t)},t.prototype.mergeDeepIn=function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return this.updateIn(e,_e(),function(e){return"function"==typeof e.mergeDeep?e.mergeDeep.apply(e,t):t[t.length-1]})},t.prototype.sort=function(e){return Pr(ne(this,e))},t.prototype.sortBy=function(e,t){return Pr(ne(this,t,e))},t.prototype.withMutations=function(e){var t=this.asMutable();return e(t),t.wasAltered()?t.__ensureOwner(this.__ownerID):this},t.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new n)},t.prototype.asImmutable=function(){return this.__ensureOwner()},t.prototype.wasAltered=function(){return this.__altered},t.prototype.__iterator=function(e,t){return new Ir(this,e,t)},t.prototype.__iterate=function(e,t){var r=this,n=0;return this._root&&this._root.iterate(function(t){return n++,e(t[1],t[0],r)},t),n},t.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?we(this.size,this._root,e,this.__hash):0===this.size?_e():(this.__ownerID=e,this.__altered=!1,this)},t}(Pt);br.isMap=ge;var wr="@@__IMMUTABLE_MAP__@@",_r=br.prototype;_r[wr]=!0,_r.delete=_r.remove,_r.removeIn=_r.deleteIn,_r.removeAll=_r.deleteAll;var xr=function(e,t){this.ownerID=e,this.entries=t};xr.prototype.get=function(e,t,r,n){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(A(r,i[o][0]))return i[o][1];return n},xr.prototype.update=function(e,t,n,o,a,s,u){for(var c=a===Ot,l=this.entries,f=0,h=l.length;f<h&&!A(o,l[f][0]);f++);var p=f<h;if(p?l[f][1]===a:c)return this;if(r(u),(c||!p)&&r(s),!c||1!==l.length){if(!p&&!c&&l.length>=Or)return Se(e,l,o,a);var d=e&&e===this.ownerID,v=d?l:i(l);return p?c?f===h-1?v.pop():v[f]=v.pop():v[f]=[o,a]:v.push([o,a]),d?(this.entries=v,this):new xr(e,v)}};var kr=function(e,t,r){this.ownerID=e,this.bitmap=t,this.nodes=r};kr.prototype.get=function(e,t,r,n){void 0===t&&(t=q(r));var i=1<<((0===e?t:t>>>e)&It),o=this.bitmap;return 0==(o&i)?n:this.nodes[Le(o&i-1)].get(e+St,t,r,n)},kr.prototype.update=function(e,t,r,n,i,o,a){void 0===r&&(r=q(n));var s=(0===t?r:r>>>t)&It,u=1<<s,c=this.bitmap,l=0!=(c&u);if(!l&&i===Ot)return this;var f=Le(c&u-1),h=this.nodes,p=l?h[f]:void 0,d=ke(p,e,t+St,r,n,i,o,a);if(d===p)return this;if(!l&&d&&h.length>=Rr)return Ie(e,h,c,s,d);if(l&&!d&&2===h.length&&Te(h[1^f]))return h[1^f];if(l&&d&&1===h.length&&Te(d))return d;var v=e&&e===this.ownerID,y=l?d?c:c^u:c|u,g=l?d?De(h,f,d,v):Ue(h,f,v):Me(h,f,d,v);return v?(this.bitmap=y,this.nodes=g,this):new kr(e,y,g)};var Tr=function(e,t,r){this.ownerID=e,this.count=t,this.nodes=r};Tr.prototype.get=function(e,t,r,n){void 0===t&&(t=q(r));var i=(0===e?t:t>>>e)&It,o=this.nodes[i];return o?o.get(e+St,t,r,n):n},Tr.prototype.update=function(e,t,r,n,i,o,a){void 0===r&&(r=q(n));var s=(0===t?r:r>>>t)&It,u=i===Ot,c=this.nodes,l=c[s];if(u&&!l)return this;var f=ke(l,e,t+St,r,n,i,o,a);if(f===l)return this;var h=this.count;if(l){if(!f&&--h<jr)return Ne(e,c,h,s)}else h++;var p=e&&e===this.ownerID,d=De(c,s,f,p);return p?(this.count=h,this.nodes=d,this):new Tr(e,h,d)};var Er=function(e,t,r){this.ownerID=e,this.keyHash=t,this.entries=r};Er.prototype.get=function(e,t,r,n){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(A(r,i[o][0]))return i[o][1];return n},Er.prototype.update=function(e,t,n,o,a,s,u){void 0===n&&(n=q(o));var c=a===Ot;if(n!==this.keyHash)return c?this:(r(u),r(s),Ee(this,e,t,n,[o,a]));for(var l=this.entries,f=0,h=l.length;f<h&&!A(o,l[f][0]);f++);var p=f<h;if(p?l[f][1]===a:c)return this;if(r(u),(c||!p)&&r(s),c&&2===h)return new Sr(e,this.keyHash,l[1^f]);var d=e&&e===this.ownerID,v=d?l:i(l);return p?c?f===h-1?v.pop():v[f]=v.pop():v[f]=[o,a]:v.push([o,a]),d?(this.entries=v,this):new Er(e,this.keyHash,v)};var Sr=function(e,t,r){this.ownerID=e,this.keyHash=t,this.entry=r};Sr.prototype.get=function(e,t,r,n){return A(r,this.entry[0])?this.entry[1]:n},Sr.prototype.update=function(e,t,n,i,o,a,s){var u=o===Ot,c=A(i,this.entry[0]);return(c?o===this.entry[1]:u)?this:(r(s),u?void r(a):c?e&&e===this.ownerID?(this.entry[1]=o,this):new Sr(e,this.keyHash,[i,o]):(r(a),Ee(this,e,t,q(i),[i,o])))},xr.prototype.iterate=Er.prototype.iterate=function(e,t){for(var r=this.entries,n=0,i=r.length-1;n<=i;n++)if(e(r[t?i-n:n])===!1)return!1},kr.prototype.iterate=Tr.prototype.iterate=function(e,t){for(var r=this.nodes,n=0,i=r.length-1;n<=i;n++){var o=r[t?i-n:n];if(o&&o.iterate(e,t)===!1)return!1}},Sr.prototype.iterate=function(e,t){return e(this.entry)};var Nr,Ir=function(e){function t(e,t,r){this._type=t,this._reverse=r,this._stack=e._root&&be(e._root)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.next=function(){for(var e=this,t=this._type,r=this._stack;r;){var n=r.node,i=r.index++,o=void 0;if(n.entry){if(0===i)return me(t,n.entry)}else if(n.entries){if(o=n.entries.length-1,i<=o)return me(t,n.entries[e._reverse?o-i:i])}else if(o=n.nodes.length-1,i<=o){var a=n.nodes[e._reverse?o-i:i];if(a){if(a.entry)return me(t,a.entry);r=e._stack=be(a,r)}continue}r=e._stack=e._stack.__prev}return _()},t}(Gt),Or=Nt/4,Rr=Nt/2,jr=Nt/4,Cr=function(e){function t(t){var r=ze();if(null===t||void 0===t)return r;if(Pe(t))return t;var n=e(t),i=n.size;return 0===i?r:(ve(i),i>0&&i<Nt?Fe(0,i,St,null,new Dr(n.toArray())):r.withMutations(function(e){e.setSize(i),n.forEach(function(t,r){return e.set(r,t)})}))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("List [","]")},t.prototype.get=function(e,t){if((e=a(this,e))>=0&&e<this.size){e+=this._origin;var r=Ve(this,e);return r&&r.array[e&It]}return t},t.prototype.set=function(e,t){return Be(this,e,t)},t.prototype.remove=function(e){return this.has(e)?0===e?this.shift():e===this.size-1?this.pop():this.splice(e,1):this},t.prototype.insert=function(e,t){return this.splice(e,0,t)},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=St,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):ze()},t.prototype.push=function(){var e=arguments,t=this.size;return this.withMutations(function(r){We(r,0,t+e.length);for(var n=0;n<e.length;n++)r.set(t+n,e[n])})},t.prototype.pop=function(){return We(this,0,-1)},t.prototype.unshift=function(){var e=arguments;return this.withMutations(function(t){We(t,-e.length);for(var r=0;r<e.length;r++)t.set(r,e[r])})},t.prototype.shift=function(){return We(this,1)},t.prototype.merge=function(){return Ge(this,void 0,arguments)},t.prototype.mergeWith=function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return Ge(this,e,t)},t.prototype.mergeDeep=function(){return Ge(this,Re,arguments)},t.prototype.mergeDeepWith=function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return Ge(this,je(e),t)},t.prototype.setSize=function(e){return We(this,0,e)},t.prototype.slice=function(e,t){var r=this.size;return u(e,t,r)?this:We(this,c(e,r),l(t,r))},t.prototype.__iterator=function(e,t){var r=t?this.size:0,n=qe(this,t);return new Gt(function(){var i=n();return i===Ur?_():w(e,t?--r:r++,i)})},t.prototype.__iterate=function(e,t){for(var r,n=this,i=t?this.size:0,o=qe(this,t);(r=o())!==Ur&&e(r,t?--i:i++,n)!==!1;);return i},t.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?Fe(this._origin,this._capacity,this._level,this._root,this._tail,e,this.__hash):0===this.size?ze():(this.__ownerID=e,this)},t}(qt);Cr.isList=Pe;var Ar="@@__IMMUTABLE_LIST__@@",Lr=Cr.prototype;Lr[Ar]=!0,Lr.delete=Lr.remove,Lr.setIn=_r.setIn,Lr.deleteIn=Lr.removeIn=_r.removeIn,Lr.update=_r.update,Lr.updateIn=_r.updateIn,Lr.mergeIn=_r.mergeIn,Lr.mergeDeepIn=_r.mergeDeepIn,Lr.withMutations=_r.withMutations,Lr.asMutable=_r.asMutable,Lr.asImmutable=_r.asImmutable,Lr.wasAltered=_r.wasAltered;var Dr=function(e,t){this.array=e,this.ownerID=t};Dr.prototype.removeBefore=function(e,t,r){if(r===t?1<<t:0===this.array.length)return this;var n=r>>>t&It;if(n>=this.array.length)return new Dr([],e);var i,o=0===n;if(t>0){var a=this.array[n];if((i=a&&a.removeBefore(e,t-St,r))===a&&o)return this}if(o&&!i)return this;var s=Xe(this,e);if(!o)for(var u=0;u<n;u++)s.array[u]=void 0;return i&&(s.array[n]=i),s},Dr.prototype.removeAfter=function(e,t,r){if(r===(t?1<<t:0)||0===this.array.length)return this;var n=r-1>>>t&It;if(n>=this.array.length)return this;var i;if(t>0){var o=this.array[n];if((i=o&&o.removeAfter(e,t-St,r))===o&&n===this.array.length-1)return this}var a=Xe(this,e);return a.array.splice(n+1),i&&(a.array[n]=i),a};var Mr,Ur={},Pr=function(e){function t(e){return null===e||void 0===e?Ye():Qe(e)?e:Ye().withMutations(function(t){var r=Pt(e);ve(r.size),r.forEach(function(e,r){return t.set(r,e)})})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("OrderedMap {","}")},t.prototype.get=function(e,t){var r=this._map.get(e);return void 0!==r?this._list.get(r)[1]:t},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Ye()},t.prototype.set=function(e,t){return Ke(this,e,t)},t.prototype.remove=function(e){return Ke(this,e,Ot)},t.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},t.prototype.__iterate=function(e,t){var r=this;return this._list.__iterate(function(t){return t&&e(t[1],t[0],r)},t)},t.prototype.__iterator=function(e,t){return this._list.fromEntrySeq().__iterator(e,t)},t.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e),r=this._list.__ensureOwner(e);return e?$e(t,r,e,this.__hash):0===this.size?Ye():(this.__ownerID=e,this._map=t,this._list=r,this)},t}(br);Pr.isOrderedMap=Qe,Pr.prototype[Dt]=!0,Pr.prototype.delete=Pr.prototype.remove;var qr,Fr=function(e){function t(e){return null===e||void 0===e?tt():Ze(e)?e:tt().pushAll(e)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.prototype.toString=function(){return this.__toString("Stack [","]")},t.prototype.get=function(e,t){var r=this._head;for(e=a(this,e);r&&e--;)r=r.next;return r?r.value:t},t.prototype.peek=function(){return this._head&&this._head.value},t.prototype.push=function(){var e=arguments;if(0===arguments.length)return this;for(var t=this.size+arguments.length,r=this._head,n=arguments.length-1;n>=0;n--)r={value:e[n],next:r};return this.__ownerID?(this.size=t,this._head=r,this.__hash=void 0,this.__altered=!0,this):et(t,r)},t.prototype.pushAll=function(t){if(t=e(t),0===t.size)return this;if(0===this.size&&Ze(t))return t;ve(t.size);var r=this.size,n=this._head;return t.__iterate(function(e){r++,n={value:e,next:n}},!0),this.__ownerID?(this.size=r,this._head=n,this.__hash=void 0,this.__altered=!0,this):et(r,n)},t.prototype.pop=function(){return this.slice(1)},t.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):tt()},t.prototype.slice=function(t,r){if(u(t,r,this.size))return this;var n=c(t,this.size);if(l(r,this.size)!==this.size)return e.prototype.slice.call(this,t,r);for(var i=this.size-n,o=this._head;n--;)o=o.next;return this.__ownerID?(this.size=i,this._head=o,this.__hash=void 0,this.__altered=!0,this):et(i,o)},t.prototype.__ensureOwner=function(e){return e===this.__ownerID?this:e?et(this.size,this._head,e,this.__hash):0===this.size?tt():(this.__ownerID=e,this.__altered=!1,this)},t.prototype.__iterate=function(e,t){var r=this;if(t)return new Zt(this.toArray()).__iterate(function(t,n){return e(t,n,r)},t);for(var n=0,i=this._head;i&&e(i.value,n++,r)!==!1;)i=i.next;return n},t.prototype.__iterator=function(e,t){if(t)return new Zt(this.toArray()).__iterator(e,t);var r=0,n=this._head;return new Gt(function(){if(n){var t=n.value;return n=n.next,w(e,r++,t)}return _()})},t}(qt);Fr.isStack=Ze;var zr="@@__IMMUTABLE_STACK__@@",Br=Fr.prototype;Br[zr]=!0,Br.withMutations=_r.withMutations,Br.asMutable=_r.asMutable,Br.asImmutable=_r.asImmutable,Br.wasAltered=_r.wasAltered,Br.shift=Br.pop,Br.unshift=Br.push,Br.unshiftAll=Br.pushAll;var Hr,Xr=function(e){function t(t){return null===t||void 0===t?st():it(t)&&!g(t)?t:st().withMutations(function(r){var n=e(t);ve(n.size),n.forEach(function(e){return r.add(e)})})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(e){return this(Pt(e).keySeq())},t.intersect=function(e){return e=Ut(e).toArray(),e.length?Wr.intersect.apply(t(e.pop()),e):st()},t.union=function(e){return e=Ut(e).toArray(),e.length?Wr.union.apply(t(e.pop()),e):st()},t.prototype.toString=function(){return this.__toString("Set {","}")},t.prototype.has=function(e){return this._map.has(e)},t.prototype.add=function(e){return ot(this,this._map.set(e,!0))},t.prototype.remove=function(e){return ot(this,this._map.remove(e))},t.prototype.clear=function(){return ot(this,this._map.clear())},t.prototype.union=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return t=t.filter(function(e){return 0!==e.size}),0===t.length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations(function(r){for(var n=0;n<t.length;n++)e(t[n]).forEach(function(e){return r.add(e)})}):this.constructor(t[0])},t.prototype.intersect=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(0===t.length)return this;t=t.map(function(t){return e(t)});var n=[];return this.forEach(function(e){t.every(function(t){return t.includes(e)})||n.push(e)}),this.withMutations(function(e){n.forEach(function(t){e.remove(t)})})},t.prototype.subtract=function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(0===e.length)return this;var r=[];return this.forEach(function(t){e.some(function(e){return e.includes(t)})&&r.push(t)}),this.withMutations(function(e){r.forEach(function(t){e.remove(t)})})},t.prototype.merge=function(){return this.union.apply(this,arguments)},t.prototype.mergeWith=function(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return this.union.apply(this,t)},t.prototype.sort=function(e){return Zr(ne(this,e))},t.prototype.sortBy=function(e,t){return Zr(ne(this,t,e))},t.prototype.wasAltered=function(){return this._map.wasAltered()},t.prototype.__iterate=function(e,t){var r=this;return this._map.__iterate(function(t,n){return e(n,n,r)},t)},t.prototype.__iterator=function(e,t){return this._map.map(function(e,t){return t}).__iterator(e,t)},t.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._map.__ensureOwner(e);return e?this.__make(t,e):0===this.size?st():(this.__ownerID=e,this._map=t,this)},t}(Ft);Xr.isSet=it;var Vr="@@__IMMUTABLE_SET__@@",Wr=Xr.prototype;Wr[Vr]=!0,Wr.delete=Wr.remove,Wr.mergeDeep=Wr.merge,Wr.mergeDeepWith=Wr.mergeWith,Wr.withMutations=_r.withMutations,Wr.asMutable=_r.asMutable,Wr.asImmutable=_r.asImmutable,Wr.__empty=st,Wr.__make=at;var Gr,Jr,Qr=function(e){function t(e,r,n){if(!(this instanceof t))return new t(e,r,n);if(de(0!==n,"Cannot step a Range by 0"),e=e||0,void 0===r&&(r=1/0),n=void 0===n?1:Math.abs(n),r<e&&(n=-n),this._start=e,this._end=r,this._step=n,this.size=Math.max(0,Math.ceil((r-e)/n-1)+1),0===this.size){if(Jr)return Jr;Jr=this}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},t.prototype.get=function(e,t){return this.has(e)?this._start+a(this,e)*this._step:t},t.prototype.includes=function(e){var t=(e-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},t.prototype.slice=function(e,r){return u(e,r,this.size)?this:(e=c(e,this.size),r=l(r,this.size),r<=e?new t(0,0):new t(this.get(e,this._end),this.get(r,this._end),this._step))},t.prototype.indexOf=function(e){var t=e-this._start;if(t%this._step==0){var r=t/this._step;if(r>=0&&r<this.size)return r}return-1},t.prototype.lastIndexOf=function(e){return this.indexOf(e)},t.prototype.__iterate=function(e,t){for(var r=this,n=this.size,i=this._step,o=t?this._start+(n-1)*i:this._start,a=0;a!==n&&e(o,t?n-++a:a++,r)!==!1;)o+=t?-i:i;return a},t.prototype.__iterator=function(e,t){var r=this.size,n=this._step,i=t?this._start+(r-1)*n:this._start,o=0;return new Gt(function(){if(o===r)return _();var a=i;return i+=t?-n:n,w(e,t?r-++o:o++,a)})},t.prototype.equals=function(e){return e instanceof t?this._start===e._start&&this._end===e._end&&this._step===e._step:rt(this,e)},t}($t);Ut.isIterable=p,Ut.isKeyed=d,Ut.isIndexed=v,Ut.isAssociative=y,Ut.isOrdered=g,Ut.Iterator=Gt,nt(Ut,{toArray:function(){ve(this.size);var e=new Array(this.size||0);return this.valueSeq().__iterate(function(t,r){e[r]=t}),e},toIndexedSeq:function(){return new yr(this)},toJS:function(){return this.toSeq().map(ft).toJSON()},toKeyedSeq:function(){return new vr(this,!0)},toMap:function(){return br(this.toKeyedSeq())},toObject:function(){ve(this.size);var e={};return this.__iterate(function(t,r){e[r]=t}),e},toOrderedMap:function(){return Pr(this.toKeyedSeq())},toOrderedSet:function(){return Zr(d(this)?this.valueSeq():this)},toSet:function(){return Xr(d(this)?this.valueSeq():this)},toSetSeq:function(){return new gr(this)},toSeq:function(){return v(this)?this.toIndexedSeq():d(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Fr(d(this)?this.valueSeq():this)},toList:function(){return Cr(d(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(e,t){return 0===this.size?e+t:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+t},concat:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return se(this,Z(this,e))},includes:function(e){return this.some(function(t){return A(t,e)})},entries:function(){return this.__iterator(Ht)},every:function(e,t){ve(this.size);var r=!0;return this.__iterate(function(n,i,o){if(!e.call(t,n,i,o))return r=!1,!1}),r},filter:function(e,t){return se(this,G(this,e,t,!0))},find:function(e,t,r){var n=this.findEntry(e,t);return n?n[1]:r},forEach:function(e,t){return ve(this.size),this.__iterate(t?e.bind(t):e)},join:function(e){ve(this.size),e=void 0!==e?""+e:",";var t="",r=!0;return this.__iterate(function(n){r?r=!1:t+=e,t+=null!==n&&void 0!==n?n.toString():""}),t},keys:function(){return this.__iterator(zt)},map:function(e,t){return se(this,V(this,e,t))},reduce:function(e,t,r){return ut(this,e,t,r,arguments.length<2,!1)},reduceRight:function(e,t,r){return ut(this,e,t,r,arguments.length<2,!0)},reverse:function(){return se(this,W(this,!0))},slice:function(e,t){return se(this,$(this,e,t,!0))},some:function(e,t){return!this.every(ht(e),t)},sort:function(e){return se(this,ne(this,e))},values:function(){return this.__iterator(Bt)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(e,t){return o(e?this.toSeq().filter(e,t):this)},countBy:function(e,t){return J(this,e,t)},equals:function(e){return rt(this,e)},entrySeq:function(){var e=this;if(e._cache)return new Zt(e._cache);var t=e.toSeq().map(lt).toIndexedSeq();return t.fromEntrySeq=function(){return e.toSeq()},t.toJS=function(){return this.map(function(e){return[ft(e[0]),ft(e[1])]}).toJSON()},t},filterNot:function(e,t){return this.filter(ht(e),t)},findEntry:function(e,t,r){var n=r;return this.__iterate(function(r,i,o){if(e.call(t,r,i,o))return n=[i,r],!1}),n},findKey:function(e,t){var r=this.findEntry(e,t);return r&&r[0]},findLast:function(e,t,r){return this.toKeyedSeq().reverse().find(e,t,r)},findLastEntry:function(e,t,r){return this.toKeyedSeq().reverse().findEntry(e,t,r)},findLastKey:function(e,t){return this.toKeyedSeq().reverse().findKey(e,t)},first:function(){return this.find(s)},flatMap:function(e,t){return se(this,te(this,e,t))},flatten:function(e){return se(this,ee(this,e,!0))},fromEntrySeq:function(){return new mr(this)},get:function(e,t){return this.find(function(t,r){return A(r,e)},void 0,t)},getIn:function(e,t){for(var r=this,n=pe(e),i=0;i!==n.length;){if(!r||!r.get)throw new TypeError("Invalid keyPath: Value at ["+n.slice(0,i).map(ye)+"] does not have a .get() method: "+r);if((r=r.get(n[i++],Ot))===Ot)return t}return r},groupBy:function(e,t){return Q(this,e,t)},has:function(e){return this.get(e,Ot)!==Ot},hasIn:function(e){return this.getIn(e,Ot)!==Ot},isSubset:function(e){return e="function"==typeof e.includes?e:Ut(e),this.every(function(t){return e.includes(t)})},isSuperset:function(e){return e="function"==typeof e.isSubset?e:Ut(e),e.isSubset(this)},keyOf:function(e){return this.findKey(function(t){return A(t,e)})},keySeq:function(){return this.toSeq().map(ct).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function(e){return ie(this,e)},maxBy:function(e,t){return ie(this,t,e)},min:function(e){return ie(this,e?pt(e):vt)},minBy:function(e,t){return ie(this,t?pt(t):vt,e)},rest:function(){return this.slice(1)},skip:function(e){return 0===e?this:this.slice(Math.max(0,e))},skipLast:function(e){return 0===e?this:this.slice(0,-Math.max(0,e))},skipWhile:function(e,t){return se(this,K(this,e,t,!0))},skipUntil:function(e,t){return this.skipWhile(ht(e),t)},sortBy:function(e,t){return se(this,ne(this,t,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return this.slice(-Math.max(0,e))},takeWhile:function(e,t){return se(this,Y(this,e,t))},takeUntil:function(e,t){return this.takeWhile(ht(e),t)},update:function(e){return e(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=yt(this))}});var $r=Ut.prototype;$r[Ct]=!0,$r[Wt]=$r.values,$r.toJSON=$r.toArray,$r.__toStringMapper=ye,$r.inspect=$r.toSource=function(){return this.toString()},$r.chain=$r.flatMap,$r.contains=$r.includes,nt(Pt,{flip:function(){return se(this,X(this))},mapEntries:function(e,t){var r=this,n=0;return se(this,this.toSeq().map(function(i,o){return e.call(t,[o,i],n++,r)}).fromEntrySeq())},mapKeys:function(e,t){var r=this;return se(this,this.toSeq().flip().map(function(n,i){return e.call(t,n,i,r)}).flip())}});var Yr=Pt.prototype;Yr[At]=!0,Yr[Wt]=$r.entries,Yr.toJSON=$r.toObject,Yr.__toStringMapper=function(e,t){return ye(t)+": "+ye(e)},nt(qt,{toKeyedSeq:function(){return new vr(this,!1)},filter:function(e,t){return se(this,G(this,e,t,!1))},findIndex:function(e,t){var r=this.findEntry(e,t);return r?r[0]:-1},indexOf:function(e){var t=this.keyOf(e);return void 0===t?-1:t},lastIndexOf:function(e){var t=this.lastKeyOf(e);return void 0===t?-1:t},reverse:function(){return se(this,W(this,!1))},slice:function(e,t){return se(this,$(this,e,t,!1))},splice:function(e,t){var r=arguments.length;if(t=Math.max(t||0,0),0===r||2===r&&!t)return this;e=c(e,e<0?this.count():this.size);var n=this.slice(0,e);return se(this,1===r?n:n.concat(i(arguments,2),this.slice(e+t)))},findLastIndex:function(e,t){var r=this.findLastEntry(e,t);return r?r[0]:-1},first:function(){return this.get(0)},flatten:function(e){return se(this,ee(this,e,!1))},get:function(e,t){return e=a(this,e),e<0||1/0===this.size||void 0!==this.size&&e>this.size?t:this.find(function(t,r){return r===e},void 0,t)},has:function(e){return(e=a(this,e))>=0&&(void 0!==this.size?1/0===this.size||e<this.size:this.indexOf(e)!==-1)},interpose:function(e){return se(this,re(this,e))},interleave:function(){var e=[this].concat(i(arguments)),t=ae(this.toSeq(),$t.of,e),r=t.flatten(!0);return t.size&&(r.size=t.size*e.length),se(this,r)},keySeq:function(){return Qr(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(e,t){return se(this,K(this,e,t,!1))},zip:function(){return se(this,ae(this,dt,[this].concat(i(arguments))))},zipWith:function(e){var t=i(arguments);return t[0]=this,se(this,ae(this,e,t))}});var Kr=qt.prototype;Kr[Lt]=!0,Kr[Dt]=!0,nt(Ft,{get:function(e,t){return this.has(e)?e:t},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}}),Ft.prototype.has=$r.includes,Ft.prototype.contains=Ft.prototype.includes,nt(Qt,Pt.prototype),nt($t,qt.prototype),nt(Yt,Ft.prototype);var Zr=function(e){function t(e){return null===e||void 0===e?_t():bt(e)?e:_t().withMutations(function(t){var r=Ft(e);ve(r.size),r.forEach(function(e){return t.add(e)})})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.of=function(){return this(arguments)},t.fromKeys=function(e){return this(Pt(e).keySeq())},t.prototype.toString=function(){return this.__toString("OrderedSet {","}")},t}(Xr);Zr.isOrderedSet=bt;var en=Zr.prototype;en[Dt]=!0,en.zip=Kr.zip,en.zipWith=Kr.zipWith,en.__empty=_t,en.__make=wt;var tn,rn=function(e,t){var r,n=function(o){var a=this;if(o instanceof n)return o;if(!(this instanceof n))return new n(o);if(!r){r=!0;var s=Object.keys(e),u=i._indices={};i._name=t,i._keys=s,i._defaultValues=e;for(var c=0;c<s.length;c++){var l=s[c];u[l]=c,i[l]?"object"==typeof console&&console.warn&&console.warn("Cannot define "+kt(a)+' with property "'+l+'" since that property name is part of the Record API.'):Et(i,l)}}this.__ownerID=void 0,this._values=Cr().withMutations(function(e){e.setSize(a._keys.length),Pt(o).forEach(function(t,r){e.set(a._indices[r],t===a._defaultValues[r]?void 0:t)})})},i=n.prototype=Object.create(nn);return i.constructor=n,n};rn.prototype.toString=function(){for(var e,t=this,r=kt(this)+" { ",n=this._keys,i=0,o=n.length;i!==o;i++)e=n[i],r+=(i?", ":"")+e+": "+ye(t.get(e));return r+" }"},rn.prototype.equals=function(e){return this===e||this._keys===e._keys&&Tt(this).equals(Tt(e))},rn.prototype.hashCode=function(){return Tt(this).hashCode()},rn.prototype.has=function(e){return this._indices.hasOwnProperty(e)},rn.prototype.get=function(e,t){if(!this.has(e))return t;var r=this._indices[e],n=this._values.get(r);return void 0===n?this._defaultValues[e]:n},rn.prototype.set=function(e,t){if(this.has(e)){var r=this._values.set(this._indices[e],t===this._defaultValues[e]?void 0:t);if(r!==this._values&&!this.__ownerID)return xt(this,r)}return this},rn.prototype.remove=function(e){return this.set(e)},rn.prototype.clear=function(){var e=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:xt(this,e)},rn.prototype.wasAltered=function(){return this._values.wasAltered()},rn.prototype.toSeq=function(){return Tt(this)},rn.prototype.toJS=function(){return Tt(this).toJS()},rn.prototype.__iterator=function(e,t){return Tt(this).__iterator(e,t)},rn.prototype.__iterate=function(e,t){return Tt(this).__iterate(e,t)},rn.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var t=this._values.__ensureOwner(e);return e?xt(this,t,e):(this.__ownerID=e,this._values=t,this)},rn.isRecord=m,rn.getDescriptiveName=kt;var nn=rn.prototype;nn[Mt]=!0,nn.delete=nn.remove,nn.getIn=$r.getIn,nn.hasIn=$r.hasIn,nn.merge=_r.merge,nn.mergeWith=_r.mergeWith,nn.mergeIn=_r.mergeIn,nn.mergeDeep=_r.mergeDeep,nn.mergeDeepWith=_r.mergeDeepWith,nn.mergeDeepIn=_r.mergeDeepIn,nn.setIn=_r.setIn,nn.update=_r.update,nn.updateIn=_r.updateIn,nn.withMutations=_r.withMutations,nn.asMutable=_r.asMutable,nn.asImmutable=_r.asImmutable,nn[Wt]=$r.entries,nn.toJSON=nn.toObject=$r.toObject,nn.inspect=nn.toSource=$r.toSource;var on,an=function(e){function t(e,r){if(!(this instanceof t))return new t(e,r);if(this._value=e,this.size=void 0===r?1/0:Math.max(0,r),0===this.size){if(on)return on;on=this}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},t.prototype.get=function(e,t){return this.has(e)?this._value:t},t.prototype.includes=function(e){return A(this._value,e)},t.prototype.slice=function(e,r){var n=this.size;return u(e,r,n)?this:new t(this._value,l(r,n)-c(e,n))},t.prototype.reverse=function(){return this},t.prototype.indexOf=function(e){return A(this._value,e)?0:-1},t.prototype.lastIndexOf=function(e){return A(this._value,e)?this.size:-1},t.prototype.__iterate=function(e,t){for(var r=this,n=this.size,i=0;i!==n&&e(r._value,t?n-++i:i++,r)!==!1;);return i},t.prototype.__iterator=function(e,t){var r=this,n=this.size,i=0;return new Gt(function(){return i===n?_():w(e,t?n-++i:i++,r._value)})},t.prototype.equals=function(e){return e instanceof t?A(this._value,e._value):rt(e)},t}($t),sn={Collection:Ut,Iterable:Ut,Seq:Jt,Map:br,OrderedMap:Pr,List:Cr,Stack:Fr,Set:Xr,OrderedSet:Zr,Record:rn,Range:Qr,Repeat:an,is:A,fromJS:L,hash:q,isImmutable:h,isCollection:p,isKeyed:d,isIndexed:v,isAssociative:y,isOrdered:g,isValueObject:b},un=Ut;e.default=sn,e.Collection=Ut,e.Iterable=un,e.Seq=Jt,e.Map=br,e.OrderedMap=Pr,e.List=Cr,e.Stack=Fr,e.Set=Xr,e.OrderedSet=Zr,e.Record=rn,e.Range=Qr,e.Repeat=an,e.is=A,e.fromJS=L,e.hash=q,e.isImmutable=h,e.isCollection=p,e.isKeyed=d,e.isIndexed=v,e.isAssociative=y,e.isOrdered=g,e.isValueObject=b,Object.defineProperty(e,"__esModule",{value:!0})})},function(e,t,r){function n(e){return r(i(e))}function i(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./N3Lexer":87,"./N3Lexer.js":87,"./N3Parser":88,"./N3Parser.js":88,"./N3Store":131,"./N3Store.js":131,"./N3StreamParser":132,"./N3StreamParser.js":132,"./N3StreamWriter":133,"./N3StreamWriter.js":133,"./N3Util":89,"./N3Util.js":89,"./N3Writer":90,"./N3Writer.js":90};n.keys=function(){return Object.keys(o)},n.resolve=i,e.exports=n,n.id=226},function(e,t,r){(function(e,n){var i;!function(o){function a(e){throw new RangeError(C[e])}function s(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function u(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),e=e.replace(j,"."),n+s(e.split("."),t).join(".")}function c(e){for(var t,r,n=[],i=0,o=e.length;i<o;)t=e.charCodeAt(i++),t>=55296&&t<=56319&&i<o?(r=e.charCodeAt(i++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--)):n.push(t);return n}function l(e){return s(e,function(e){var t="";return e>65535&&(e-=65536,t+=D(e>>>10&1023|55296),e=56320|1023&e),t+=D(e)}).join("")}function f(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:_}function h(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function p(e,t,r){var n=0;for(e=r?L(e/E):e>>1,e+=L(e/t);e>A*k>>1;n+=_)e=L(e/A);return L(n+(A+1)*e/(e+T))}function d(e){var t,r,n,i,o,s,u,c,h,d,v=[],y=e.length,g=0,m=N,b=S;for(r=e.lastIndexOf(I),r<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&a("not-basic"),v.push(e.charCodeAt(n));for(i=r>0?r+1:0;i<y;){for(o=g,s=1,u=_;i>=y&&a("invalid-input"),c=f(e.charCodeAt(i++)),(c>=_||c>L((w-g)/s))&&a("overflow"),g+=c*s,h=u<=b?x:u>=b+k?k:u-b,!(c<h);u+=_)d=_-h,s>L(w/d)&&a("overflow"),s*=d;t=v.length+1,b=p(g-o,t,0==o),L(g/t)>w-m&&a("overflow"),m+=L(g/t),g%=t,v.splice(g++,0,m)}return l(v)}function v(e){var t,r,n,i,o,s,u,l,f,d,v,y,g,m,b,T=[];for(e=c(e),y=e.length,t=N,r=0,o=S,s=0;s<y;++s)(v=e[s])<128&&T.push(D(v));for(n=i=T.length,i&&T.push(I);n<y;){for(u=w,s=0;s<y;++s)(v=e[s])>=t&&v<u&&(u=v);for(g=n+1,u-t>L((w-r)/g)&&a("overflow"),r+=(u-t)*g,t=u,s=0;s<y;++s)if(v=e[s],v<t&&++r>w&&a("overflow"),v==t){for(l=r,f=_;d=f<=o?x:f>=o+k?k:f-o,!(l<d);f+=_)b=l-d,m=_-d,T.push(D(h(d+b%m,0))),l=L(b/m);T.push(D(h(l,0))),o=p(r,g,n==i),r=0,++n}++r,++t}return T.join("")}function y(e){return u(e,function(e){return O.test(e)?d(e.slice(4).toLowerCase()):e})}function g(e){return u(e,function(e){return R.test(e)?"xn--"+v(e):e})}var m=("object"==typeof t&&t&&t.nodeType,"object"==typeof e&&e&&e.nodeType,"object"==typeof n&&n);m.global!==m&&m.window!==m&&m.self;var b,w=2147483647,_=36,x=1,k=26,T=38,E=700,S=72,N=128,I="-",O=/^xn--/,R=/[^\x20-\x7E]/,j=/[\x2E\u3002\uFF0E\uFF61]/g,C={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},A=_-x,L=Math.floor,D=String.fromCharCode;b={version:"1.4.1",ucs2:{decode:c,encode:l},decode:d,encode:v,toASCII:g,toUnicode:y},void 0!==(i=function(){return b}.call(t,r,t,e))&&(e.exports=i)}()}).call(t,r(102)(e),r(2))},function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,o){t=t||"&",r=r||"=";var a={};if("string"!=typeof e||0===e.length)return a;e=e.split(t);var s=1e3;o&&"number"==typeof o.maxKeys&&(s=o.maxKeys);var u=e.length;s>0&&u>s&&(u=s);for(var c=0;c<u;++c){var l,f,h,p,d=e[c].replace(/\+/g,"%20"),v=d.indexOf(r);v>=0?(l=d.substr(0,v),f=d.substr(v+1)):(l=d,f=""),h=decodeURIComponent(l),p=decodeURIComponent(f),n(a,h)?i(a[h])?a[h].push(p):a[h]=[a[h],p]:a[h]=p}return a};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){"use strict";function n(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,s){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?n(a(e),function(a){var s=encodeURIComponent(i(a))+r;return o(e[a])?n(e[a],function(e){return s+encodeURIComponent(i(e))}).join(t):s+encodeURIComponent(i(e[a]))}).join(t):s?encodeURIComponent(i(s))+r+encodeURIComponent(i(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},function(e,t,r){"use strict";t.decode=t.parse=r(228),t.encode=t.stringify=r(229)},function(e,t,r){"use strict";function n(e){this.rdf=e}function i(e){return new n(e)}e.exports=i,n.prototype.base=function(e){var t=this;return function(r){return t.rdf?t.rdf.namedNode(e+r):e+r}}},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(6),u=function(e){function t(){n(this,t);var e=i(this,Object.getPrototypeOf(t).call(this));return e.termType="DefaultGraph",e.value="",e}return o(t,e),a(t,[{key:"toCanonical",value:function(){return this.value}}]),t}(s);e.exports=u},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=r(6),u=function(e){function t(){n(this,t);var e=i(this,Object.getPrototypeOf(t).call(this));return e.termType=t.termType,e}return o(t,e),a(t,[{key:"toString",value:function(){return"()"}}]),t}(s);u.termType="empty",e.exports=u},function(e,t,r){"use strict";var n=function(){return{parseJSON:function(e,t,r){var n,i,o,a={},s=r.sym(t);for(var u in e){0===u.indexOf("_:")?a[u]?n=a[u]:(n=r.bnode(u),a[u]=n):n=r.sym(u);var c=e[u];for(var l in c){var f=c[l];i=r.sym(l);for(var h in f){var p=f[h];if("uri"===p.type)o=r.sym(p.value),r.add(n,i,o,s);else if("BlankNode"===p.type)a[p.value]?o=a[p.value]:(o=r.bnode(p.value),a[p.value]=o),r.add(n,i,o,s);else{if("Literal"!==p.type)throw new Error("error: unexpected termtype: "+h.type);o=p.datatype?r.literal(p.value,void 0,r.sym(p.datatype)):p.lang?r.literal(p.value,p.lang):r.literal(p.value),r.add(n,i,o,s)}}}}}}}();e.exports=n},function(e,t,r){"use strict";function n(e){function t(e){for(var t=s()+"SELECT ",r=0;r<e.vars.length;r++)t+=e.vars[r]+" ";return t+="\n"}function r(e){var t="",r=e.statements;for(var n in r)i.debug("Found statement: "+r),t+=s()+r[n]+"\n";return t}function n(e){var t="";for(var r in e.constraints){var n=e.constraints[r];t+=s()+"FILTER ( "+n.describe(r)+" ) \n"}return t}function o(e){for(var t="",a=0;a<e.optional.length;a++)i.debug("Found optional query"),t+=s()+"OPTIONAL { \n",u++,t+=r(e.optional[a]),t+=n(e.optional[a]),t+=o(e.optional[a]),u--,t+=s()+"}\n";return t}function a(e){var t=s()+"WHERE \n{ \n";return u++,t+=r(e),t+=n(e),t+=o(e),u--,t+="}"}function s(){for(var e="",t=0;t<u;t++)e+="    ";return e}var u=0;return function(e){return t(e)+a(e.pat)}(e)}var i=r(24);e.exports=n},function(e,t,r){"use strict";function n(e,t,r){function n(e){if(O[e])return O[e];var t=r.variable(e);return O[e]=t,t}function a(e){return"string"==typeof e&&e.match(/[^ \n\t]/)}function s(e){return"string"==typeof e&&e.match(/^[\?\$]/)}function u(e){return"string"==typeof e?e.replace(/^&lt;/,"<").replace(/&gt;$/,">"):e}function c(e){return"string"==typeof e&&e.match(/^<[^>]*>$/)}function l(e){return"string"==typeof e&&(e.match(/^_:/)||e.match(/^$/))}function f(e){return"string"==typeof e&&e.match(/:$/)}function h(e){return"string"==typeof e&&e.match(/^:|^[^_][^:]*:/)}function p(e){return e.split(":")[0]}function d(e){return e.split(":")[1]}function v(e){return c(e)?e.slice(1,e.length-1):e}function y(e){var t=e.indexOf("'")===-1?null:e.indexOf("'"),n=e.indexOf('"')===-1?null:e.indexOf('"');if(!t&&!n){var o=new Array(1);return o[0]=e,o}var a,s,u=new Array(2);if(!t||n&&n<t)a='"',s=n;else{if(n&&!(t&&t<n))return i.error("SQARQL QUERY OOPS!"),u;a="'",s=t}u[0]=e.slice(0,s);var c=e.slice(s+1).indexOf(a);if(c===-1)return i.error("SPARQL parsing error: no matching parentheses in literal "+e),e;var l;return e.slice(c+s+2).match(/^\^\^/)?(l=e.slice(c+s+2).indexOf(" "),u[1]=r.literal(e.slice(s+1,s+1+c),"",r.sym(v(e.slice(s+4+c,s+2+c+l)))),u=u.concat(y(e.slice(c+s+3+l)))):e.slice(c+s+2).match(/^@/)?(l=e.slice(c+s+2).indexOf(" "),u[1]=r.literal(e.slice(s+1,s+1+c),e.slice(s+3+c,s+2+c+l),null),u=u.concat(y(e.slice(c+s+2+l)))):(u[1]=r.literal(e.slice(s+1,s+1+c),"",null),i.info("Literal found: "+u[1]),u=u.concat(y(e.slice(c+s+2)))),u}function g(e){e=e.replace(/\(/g," ( ").replace(/\)/g," ) ").replace(/</g," <").replace(/>/g,"> ").replace(/{/g," { ").replace(/}/g," } ").replace(/[\t\n\r]/g," ").replace(/; /g," ; ").replace(/\. /g," . ").replace(/, /g," , "),i.info("New str into spaceDelimit: \n"+e);var t=[],r=e.split(" ");for(var n in r)a(r[n])&&(t=t.concat(r[n]));return t}function m(e){for(var t=e,r=0;r<t.length;r++)if("a"===t[r]&&(t[r]="<http://www.w3.org/1999/02/22-rdf-syntax-ns#type>"),"is"===t[r]&&"of"===t[r+2]){t.splice(r,1),t.splice(r+1,1);var n=t[r-1];t[r-1]=t[r+1],t[r+1]=n}return t}function b(e){for(var t=[],o=0;o<e.length;o++)"string"==typeof e[o]?(e[o]=u(e[o]),s(e[o])?t[o]=n(e[o].slice(1)):l(e[o])?(i.info(e[o]+" was identified as a bnode."),t[o]=r.bnode()):c(e[o])?(i.info(e[o]+" was identified as a symbol."),t[o]=r.sym(v(e[o]))):h(e[o])?(i.info(e[o]+" was identified as a prefixed symbol"),C[p(e[o])]?t[o]=r.sym(e[o]=C[p(e[o])]+d(e[o])):(i.error("SPARQL error: "+e[o]+" with prefix "+p(e[o])+" does not have a correct prefix entry."),t[o]=e[o])):t[o]=e[o]):t[o]=e[o];return t}function w(e,t){for(var r=0;r<t.length;r++)if("string"==typeof t[r]&&t[r].toLowerCase()===e.toLowerCase())return r;return null}function _(e,t){for(var r=[],n=0;n<t.length;n++)"string"==typeof t[n]&&t[n].toLowerCase()===e.toLowerCase()&&r.push(n);return r}function x(e,t,r){i.info("Looking for a close bracket of type "+r+" in "+e);for(var n=0,o=0;o<e.length;o++)if(e[o]===t&&n++,e[o]===r&&n--,n<0)return o;return i.error("Statement had no close parenthesis in SPARQL query"),0}function k(e){return this.describe=function(t){return t+" = "+e.toNT()},this.test=function(t){return e.sameTerm(t)},this}function T(e){this.describe=function(t){return"REGEXP( '"+e+"' , "+t+" )"},this.test=function(t){var r=e,n=new RegExp(r);return!!t.value&&n.test(t.value)}}function E(e,t){3!==e.length||"Variable"!==e[0].termType||"NamedNode"!==e[2].termType&&"Literal"!==e[2].termType?6===e.length&&"string"==typeof e[0]&&"regexp"===e[0].toLowerCase()&&"("===e[1]&&")"===e[5]&&","===e[3]&&"Variable"===e[4].termType&&"Literal"===e[2].termType&&(i.debug("Constraint added: "+e),t.constraints[e[4]]=new T(e[2].value)):"="===e[1]?(i.debug("Constraint added: "+e),t.constraints[e[0]]=new k(e[2])):">"===e[1]?(i.debug("Constraint added: "+e),t.constraints[e[0]]=new k(e[2])):"<"===e[1]?(i.debug("Constraint added: "+e),t.constraints[e[0]]=new k(e[2])):i.warn("I don't know how to handle the constraint: "+e)}function S(e,t){i.debug("Optional query: "+e+" not yet implemented.");var n=r.formula();N(e,n),t.optional.push(n)}function N(e,t){var r,n=b(e);i.debug("WHERE: "+n);for(var o;w("OPTIONAL",n);)o=w("OPTIONAL",n),i.debug("OPT: "+o+" "+n[o]+" in "+n),"{"!==n[o+1]&&i.warn("Bad optional opening bracket in word "+o),r=x(n.slice(o+2),"{","}"),r===-1?i.error("No matching bracket in word "+o):(S(n.slice(o+2,o+2+r),t),o=w("OPTIONAL",n),r=x(n.slice(o+2),"{","}"),n.splice(o,r+3));for(i.debug("WHERE after optionals: "+n);w("FILTER",n);){var a=w("FILTER",n);"("!==n[a+1]&&i.warn("Bad filter opening bracket in word "+a),r=x(n.slice(a+2),"(",")"),r===-1?i.error("No matching bracket in word "+a):(E(n.slice(a+2,a+2+r),t),a=w("FILTER",n),r=x(n.slice(a+2),"(",")"),n.splice(a,r+3))}i.debug("WHERE after filters and optionals: "+n),I(n,t)}function I(e,t){var r=new Array(1);r[0]=-1;for(var n=r.concat(_(".",e)),o=[],a=0;a<n.length-1;a++)o[a]=e.slice(n[a]+1,n[a+1]);for(a in o){i.info("s+p+o "+a+" = "+o[a]);var s=o[a][0];o[a].splice(0,1);var u=r.concat(_(";",o[a]));u.push(o[a].length);for(var c=[],l=0;l<u.length-1;l++)c[l]=o[a].slice(u[l]+1,u[l+1]);for(a in c){i.info("p+o "+a+" = "+o[a]);var f=c[a][0];c[a].splice(0,1);var h=r.concat(_(",",c[a]));h.push(c[a].length);var p=[];for(l=0;l<h.length-1;l++)p[l]=c[a].slice(h[l]+1,h[l+1]);for(a in p){var d=p[a][0];i.info("Subj="+s+" Pred="+f+" Obj="+d),t.add(s,f,d)}}}}var O=[];i.info("SPARQL input: \n"+e);var R=new o,j=function(e){var t=y(e),r=[];for(var n in t)r="string"==typeof t[n]?r.concat(g(t[n])):r.concat(t[n]);return r=m(r),i.info("SPARQL Tokens: "+r),r}(e),C=function(e){var t=_("PREFIX",e),r=[];for(var n in t){var o=e[t[n]+1],a=e[t[n]+2];if(f(o))if(c(a)){i.info("Prefix found: "+o+" -> "+a);var s=p(o),u=v(a);r[s]=u}else i.error("Invalid SPARQL symbol: "+a);else i.error("Invalid SPARQL prefix: "+o)}return r}(j);C.rdf||(C.rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"),C.rdfs||(C.rdfs="http://www.w3.org/2000/01/rdf-schema#");var A=w("SELECT",j),L=w("WHERE",j);if(A<0||L<0||A>L)return i.error("Invalid or nonexistent SELECT and WHERE tags in SPARQL query"),!1;if(function(e,t){i.info("SPARQL vars: "+e);for(var r in e)if(s(e[r])){i.info("Added "+e[r]+" to query variables from SPARQL");var o=n(e[r].slice(1));t.vars.push(o),o.label=e[r].slice(1)}else i.warn("Incorrect SPARQL variable in SELECT: "+e[r])}(j.slice(A+1,L),R),N(j.slice(L+2,j.length-1),R.pat),t)return R;for(var D in R.pat.statements){var M=R.pat.statements[D];"NamedNode"===M.subject.termType&&r.fetcher&&r.fetcher.lookUpThing(M.subject,"sparql:"+M.subject),"NamedNode"===M.object.termType&&r.fetcher&&r.fetcher.lookUpThing(M.object,"sparql:"+M.object)}return R}var i=r(24),o=r(58).Query;e.exports=n},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},i=r(56),o=function(e){return e&&e.__esModule?e:{default:e}}(i),a=r(7).docpart,s=r(92),u=r(39).graph,c=r(39).namedNode,l=r(40),f=r(97),h=r(7).join,p=r(13),d=function(){var e=function(e){if(this.store=e,e.updater)throw new Error("You can't have two UpdateManagers for the same store");e.fetcher||new s(e),e.updater=this,this.ifps={},this.fps={},this.ns={},this.ns.link=l("http://www.w3.org/2007/ont/link#"),this.ns.http=l("http://www.w3.org/2007/ont/http#"),this.ns.httph=l("http://www.w3.org/2007/ont/httph#"),this.ns.ldp=l("http://www.w3.org/ns/ldp#"),this.ns.rdf=l("http://www.w3.org/1999/02/22-rdf-syntax-ns#"),this.ns.rdfs=l("http://www.w3.org/2000/01/rdf-schema#"),this.ns.rdf=l("http://www.w3.org/1999/02/22-rdf-syntax-ns#"),this.ns.owl=l("http://www.w3.org/2002/07/owl#"),this.patchControl=[]};return e.prototype.patchControlFor=function(e){return this.patchControl[e.uri]||(this.patchControl[e.uri]=[]),this.patchControl[e.uri]},e.prototype.editable=function(e,t){if(!e)return!1;if(t||(t=this.store),"file:///"===e.slice(0,8)){if(t.holds(t.sym(e),c("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),c("http://www.w3.org/2007/ont/link#MachineEditableDocument")))return"LOCALFILE";var r=t.statementsMatching(t.sym(e),void 0,void 0);return console.log("sparql.editable: Not MachineEditableDocument file "+e+"\n"),console.log(r.map(function(e){return e.toNT()}).join("\n")),!1}var n,i=!1,o=t.each(void 0,this.ns.link("requestedURI"),a(e));if(t.holds(c(e),this.ns.rdf("type"),this.ns.ldp("Resource")))return"SPARQL";for(var s,u,l=0;l<o.length;l++)if(void 0!==(n=o[l])){var f=t.any(n,this.ns.link("response"));if(void 0!==n){var h=t.each(f,this.ns.httph("accept-patch"));if(h.length)for(s=0;s<h.length;s++)if(u=h[s].value.trim(),u.indexOf("application/sparql-update")>=0)return"SPARQL";var p=t.each(f,this.ns.httph("ms-author-via"));if(p.length)for(s=0;s<p.length;s++){if(u=p[s].value.trim(),u.indexOf("SPARQL")>=0)return"SPARQL";if(u.indexOf("DAV")>=0)return"DAV"}var d=t.each(f,this.ns.http("status"));if(d.length)for(s=0;s<d.length;s++)200!==d[s]&&404!==d[s]||(i=!0)}else console.log("sparql.editable: No response for "+e+"\n")}if(0===o.length)console.log("sparql.editable: No request for "+e+"\n");else if(i)return!1;console.log("sparql.editable: inconclusive for "+e+"\n")},e.prototype.anonymize=function(e){return"_:"===e.toNT().substr(0,2)&&this._mentioned(e)?"?"+e.toNT().substr(2):e.toNT()},e.prototype.anonymizeNT=function(e){return this.anonymize(e.subject)+" "+this.anonymize(e.predicate)+" "+this.anonymize(e.object)+" ."},e.prototype._statement_bnodes=function(e){return[e.subject,e.predicate,e.object].filter(function(e){return e.isBlank})},e.prototype._statement_array_bnodes=function(e){for(var t=[],r=0;r<e.length;r++)t=t.concat(this._statement_bnodes(e[r]));t.sort();for(var n=[],i=0;i<t.length;i++)0!==i&&t[i].sameTerm(t[i-1])||n.push(t[i]);return n},e.prototype._cache_ifps=function(){this.ifps={};for(var e=this.store.each(void 0,this.ns.rdf("type"),this.ns.owl("InverseFunctionalProperty")),t=0;t<e.length;t++)this.ifps[e[t].uri]=!0;for(this.fps={},e=this.store.each(void 0,this.ns.rdf("type"),this.ns.owl("FunctionalProperty")),t=0;t<e.length;t++)this.fps[e[t].uri]=!0},e.prototype._bnode_context2=function(e,t,r){for(var n,i,o=this.store.statementsMatching(void 0,void 0,e,t),a=0;a<o.length;a++)if(this.fps[o[a].predicate.uri]){if(n=o[a].subject,!n.isBlank)return[o[a]];if(r&&(i=this._bnode_context2(n,t,r-1)))return i.concat([o[a]])}for(o=this.store.statementsMatching(e,void 0,void 0,t),a=0;a<o.length;a++)if(this.ifps[o[a].predicate.uri]){if(n=o[a].object,!n.isBlank)return[o[a]];if(r&&(i=this._bnode_context2(n,t,r-1)))return i.concat([o[a]])}return null},e.prototype._bnode_context_1=function(e,t){for(var r=0;r<3;r++){var n=this._bnode_context2(e,t,r);if(null!==n)return n}return this.store.connectedStatements(e,t)},e.prototype._mentioned=function(e){return 0!==this.store.statementsMatching(e).length||0!==this.store.statementsMatching(void 0,e).length||0!==this.store.statementsMatching(void 0,void 0,e).length},e.prototype._bnode_context=function(e,t){var r=[];if(e.length){this._cache_ifps();for(var n=0;n<e.length;n++){var i=e[n];this._mentioned(i)&&(r=r.concat(this._bnode_context_1(i,t)))}}return r},e.prototype._statement_context=function(e){var t=this._statement_bnodes(e);return this._bnode_context(t,e.why)},e.prototype._context_where=function(e){var t=this;return e&&0!==e.length?"WHERE { "+e.map(function(e){return t.anonymizeNT(e)}).join("\n")+" }\n":""},e.prototype._fire=function(e,t,r){if(!e)throw new Error("No URI given for remote editing operation: "+t);console.log("sparql: sending update to <"+e+">");var n=p.XMLHTTPFactory();n.options={},n.onreadystatechange=function(){if(4===n.readyState){var i=!n.status||n.status>=200&&n.status<300;i?console.log("sparql: update Ok for <"+e+">"):console.log("sparql: update failed for <"+e+"> status="+n.status+", "+n.statusText+", body length="+n.responseText.length+"\n   for query: "+t),r(e,i,n.responseText,n)}},n.open("PATCH",e,!0),n.setRequestHeader("Content-type","application/sparql-update"),n.send(t)},e.prototype.update_statement=function(e){if(!e||e.why){var t=this,r=this._statement_context(e);return{statement:e?[e.subject,e.predicate,e.object,e.why]:void 0,statementNT:e?this.anonymizeNT(e):void 0,where:t._context_where(r),set_object:function(e,r){var n=this.where;n+="DELETE DATA { "+this.statementNT+" } ;\n",n+="INSERT DATA { "+this.anonymize(this.statement[0])+" "+this.anonymize(this.statement[1])+" "+this.anonymize(e)+"  . }\n",t._fire(this.statement[3].uri,n,r)}}}},e.prototype.insert_statement=function(e,t){var r=e instanceof Array?e[0]:e,n=this._context_where(this._statement_context(r));if(e instanceof Array){for(var i="",o=0;o<e.length;o++)i+=e[o]+"\n";n+="INSERT DATA { "+i+" }\n"}else n+="INSERT DATA { "+this.anonymize(e.subject)+" "+this.anonymize(e.predicate)+" "+this.anonymize(e.object)+"  . }\n";this._fire(r.why.uri,n,t)},e.prototype.delete_statement=function(e,t){var r=e instanceof Array?e[0]:e,n=this._context_where(this._statement_context(r));if(e instanceof Array){for(var i="",o=0;o<e.length;o++)i+=e[o]+"\n";n+="DELETE DATA { "+i+" }\n"}else n+="DELETE DATA { "+this.anonymize(e.subject)+" "+this.anonymize(e.predicate)+" "+this.anonymize(e.object)+"  . }\n";this._fire(r.why.uri,n,t)},e.prototype.requestDownstreamAction=function(e,t){var r=this.patchControlFor(e);if(r.pendingUpstream){if(r.downstreamAction){if(r.downstreamAction===t)return;throw new Error("Can't wait for > 1 differnt downstream actions")}r.downstreamAction=t}else t(e)},e.prototype.clearUpstreamCount=function(e){this.patchControlFor(e).upstreamCount=0},e.prototype.getUpdatesVia=function(e){var t=this.store.fetcher.getHeader(e,"updates-via");return t&&t.length?t[0].trim():null},e.prototype.addDownstreamChangeListener=function(e,t){var r=this.patchControlFor(e);r.downstreamChangeListeners||(r.downstreamChangeListeners=[]),r.downstreamChangeListeners.push(t);var n=this;this.setRefreshHandler(e,function(e){n.reloadAndSync(e)})},e.prototype.reloadAndSync=function(e){var t=this.patchControlFor(e),r=this;if(t.reloading)return void console.log("   Already reloading - stop");t.reloading=!0;var n=1e3;!function i(){console.log("try reload - timeout = "+n),r.reload(r.store,e,function(r,o,a){if(t.reloading=!1,r){if(t.downstreamChangeListeners)for(var s=0;s<t.downstreamChangeListeners.length;s++)console.log("        Calling downstream listener "+s),t.downstreamChangeListeners[s]()}else 0===a.status?(console.log("Network error refreshing the data. Retrying in "+n/1e3),t.reloading=!0,n*=2,setTimeout(i,n)):console.log("Error "+a.status+"refreshing the data:"+o+". Stopped"+e)})}()},e.prototype.setRefreshHandler=function(e,t){var r=this.getUpdatesVia(e),n=t,i=this,o=this,a=1500,s=0;if(!r)return console.log("Server doies not support live updates thoughUpdates-Via :-("),!1;r=h(r,e.uri),r=r.replace(/^http:/,"ws:").replace(/^https:/,"wss:"),console.log("Web socket URI "+r);return function t(){var u;if("undefined"!=typeof WebSocket)u=new WebSocket(r);else if("undefined"!=typeof Services)u=Services.wm.getMostRecentWindow("navigator:browser").WebSocket(r);else{if("undefined"==typeof window||!window.WebSocket)return void console.log("Live update disabled, as WebSocket not supported by platform :-(");u=window.WebSocket(r)}u.onopen=function(){console.log("    websocket open"),a=1500,this.send("sub "+e.uri),s&&(console.log("Web socket has been down, better check for any news."),o.requestDownstreamAction(e,n))};var c=i.patchControlFor(e);c.upstreamCount=0,u.onclose=function(e){console.log("*** Websocket closed with code "+e.code+", reason '"+e.reason+"' clean = "+e.clean),a*=2,s+=1,console.log("Retrying in "+a+"ms"),setTimeout(function(){console.log("Trying websocket again"),t()},a)},u.onmessage=function(t){if(t.data&&"pub"===t.data.slice(0,3)){if("upstreamCount"in c&&(c.upstreamCount-=1,c.upstreamCount>=0))return void console.log("just an echo: "+c.upstreamCount);console.log("Assume a real downstream change: "+c.upstreamCount+" -> 0"),c.upstreamCount=0,i.requestDownstreamAction(e,n)}}}(),!0},e.prototype.update=function(e,t,r){try{var i=this.store,a=e?e instanceof o.default?e.statements:e instanceof Array?e:[e]:[],s=t?t instanceof o.default?t.statements:t instanceof Array?t:[t]:[];if(!(a instanceof Array))throw new Error("Type Error "+(void 0===a?"undefined":n(a))+": "+a);if(!(s instanceof Array))throw new Error("Type Error "+(void 0===s?"undefined":n(s))+": "+s);if(0===a.length&&0===s.length)return r(null,!0);var u=a.length?a[0].why:s[0].why,c=this.patchControlFor(u),l=Date.now(),d=["subject","predicate","object","why"],v={delete:a,insert:s};["insert","delete"].map(function(e){v[e].map(function(e){if(!u.sameTerm(e.why))throw new Error("update: destination "+u+" inconsistent with delete quad "+e.why);d.map(function(t){if(void 0===e[t])throw new Error("update: undefined "+t+" of statement.")})})});var y=this.editable(u.uri,i);if(!y)throw new Error("Can't make changes in uneditable "+u);var g,m,b,w;if(y.indexOf("SPARQL")>=0){var _=[];a.length&&(_=this._statement_array_bnodes(a)),s.length&&(_=_.concat(this._statement_array_bnodes(s)));var x=this._bnode_context(_,u),k=this._context_where(x),T="";if(k.length){if(a.length){for(T+="DELETE { ",g=0;g<a.length;g++)T+=this.anonymizeNT(a[g])+"\n";T+=" }\n"}if(s.length){for(T+="INSERT { ",g=0;g<s.length;g++)T+=this.anonymizeNT(s[g])+"\n";T+=" }\n"}T+=k}else{if(a.length){for(T+="DELETE DATA { ",g=0;g<a.length;g++)T+=this.anonymizeNT(a[g])+"\n";T+=" } \n"}if(s.length){for(a.length&&(T+=" ; "),T+="INSERT DATA { ",g=0;g<s.length;g++)T+=this.anonymizeNT(s[g])+"\n";T+=" }\n"}}c.pendingUpstream=c.pendingUpstream?c.pendingUpstream+1:1,"upstreamCount"in c&&(c.upstreamCount+=1,console.log("upstream count up to : "+c.upstreamCount)),this._fire(u.uri,T,function(e,t,n,o){if(o.elapsedTime_ms=Date.now()-l,console.log("    sparql: Return "+(t?"success":"FAILURE "+o.status)+" elapsed "+o.elapsedTime_ms+"ms"),t){try{i.remove(a)}catch(e){t=!1,n="Remote Ok BUT error deleting "+a.length+" from store!!! "+e}for(var f=0;f<s.length;f++)i.add(s[f].subject,s[f].predicate,s[f].object,u)}if(r(e,t,n,o),c.pendingUpstream-=1,0===c.pendingUpstream&&c.downstreamAction){var h=c.downstreamAction;delete c.downstreamAction,console.log("delayed downstream action:"),h(u)}})}else if(y.indexOf("DAV")>=0){var E=i.any(u,this.ns.link("request"));if(!E)throw new Error("No record of our HTTP GET request for document: "+u);var S=i.any(E,this.ns.link("response"));if(!S)return null;var N=i.the(S,this.ns.httph("content-type")).value;for(m=i.statementsMatching(void 0,void 0,void 0,u).slice(),g=0;g<a.length;g++)p.RDFArrayRemove(m,a[g]);for(g=0;g<s.length;g++)m.push(s[g]);switch(w=f(i),w.suggestNamespaces(i.namespaces),w.setBase(u.uri),N){case"application/rdf+xml":b=w.statementsToXML(m);break;case"text/n3":case"text/turtle":case"application/x-turtle":case"application/n3":b=w.statementsToN3(m);break;default:throw new Error("Content-type "+N+" not supported for data write")}var I,O=i.the(S,this.ns.httph("content-location"));O&&(I=h(O.value,I));var R=p.XMLHTTPFactory();R.options={},R.onreadystatechange=function(){if(4===R.readyState){var e=!R.status||R.status>=200&&R.status<300;if(e){for(var t=0;t<a.length;t++)i.remove(a[t]);for(t=0;t<s.length;t++)i.add(s[t].subject,s[t].predicate,s[t].object,u)}r(u.uri,e,R.responseText)}},R.open("PUT",I,!0),R.setRequestHeader("Content-type",N),R.send(b)}else{if(!(y.indexOf("LOCALFILE")>=0))throw new Error("Unhandled edit method: '"+y+"' for "+u);try{for(console.log("Writing back to local file\n"),m=i.statementsMatching(void 0,void 0,void 0,u).slice(),g=0;g<a.length;g++)p.RDFArrayRemove(m,a[g]);for(g=0;g<s.length;g++)m.push(s[g]);w=f(i),w.suggestNamespaces(i.namespaces),w.setBase(u.uri);var j=u.uri.lastIndexOf(".");if(j<1)throw new Error("Rewriting file: No filename extension: "+u.uri);var C=u.uri.slice(j+1);switch(C){case"rdf":case"owl":case"xml":b=w.statementsToXML(m);break;case"n3":case"nt":case"ttl":b=w.statementsToN3(m);break;default:throw new Error("File extension ."+C+" not supported for data write")}console.log("Writing back: <<<"+b+">>>");var A=u.uri.slice(7),L=Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile);if(L.initWithPath(A),!L.exists())throw new Error("Rewriting file <"+u.uri+"> but it does not exist!");var D=Components.classes["@mozilla.org/network/file-output-stream;1"].createInstance(Components.interfaces.nsIFileOutputStream);for(D.init(L,42,parseInt("0666",8),0),D.write(b,b.length),D.close(),g=0;g<a.length;g++)i.remove(a[g]);for(g=0;g<s.length;g++)i.add(s[g].subject,s[g].predicate,s[g].object,u);r(u.uri,!0,"")}catch(e){r(u.uri,!1,"Exception trying to write back file <"+u.uri+">\n")}}}catch(e){r(void 0,!1,"Exception in update: "+e+"\n"+$rdf.Util.stackString(e))}},e.prototype.put=function(e,t,r,i){var o,a=this.store;if((void 0===t?"undefined":n(t))===n(""))o=t;else{var s=f(a);switch(s.suggestNamespaces(a.namespaces),s.setBase(e.uri),r){case"application/rdf+xml":o=s.statementsToXML(t);break;case"text/n3":case"text/turtle":case"application/x-turtle":case"application/n3":o=s.statementsToN3(t);break;default:throw new Error("Content-type "+r+" not supported for data PUT")}}var u=p.XMLHTTPFactory();u.options={},u.onreadystatechange=function(){if(4===u.readyState){var r=!u.status||u.status>=200&&u.status<300;r&&"string"!=typeof t&&t.map(function(e){a.addStatement(e)}),r&&(delete a.fetcher.nonexistant[e.uri],delete a.fetcher.requested[e.uri]),i(e.uri,r,u.responseText,u)}},u.open("PUT",e.uri,!0),u.setRequestHeader("Content-type",r),u.send(o)},e.prototype.reload=function(e,t,r){var n=Date.now();e.fetcher.nowOrWhenFetched(t.uri,{force:!0,noMeta:!0,clearPreviousData:!0},function(e,i,o){if(e)if(o.onErrorWasCalled||200!==o.status)console.log("    Non-HTTP error reloading data! onErrorWasCalled="+o.onErrorWasCalled+" status: "+o.status),r(!1,"Non-HTTP error reloading data: "+i,o);else{var a=Date.now()-n;t.reloadTime_total||(t.reloadTime_total=0),t.reloadTime_count||(t.reloadTime_count=0),t.reloadTime_total+=a,t.reloadTime_count+=1,console.log("    Fetch took "+a+"ms, av. of "+t.reloadTime_count+" = "+t.reloadTime_total/t.reloadTime_count+"ms."),r(!0)}else console.log("    ERROR reloading data: "+i),r(!1,"Error reloading data: "+i,o)})},e.prototype.oldReload=function(e,t,r){var n=u(),i=fetcher(n),o=Date.now();i.nowOrWhenFetched(t.uri,{force:!0,noMeta:!0,clearPreviousData:!0},function(i,a,s){if(i)if(s.onErrorWasCalled||200!==s.status)console.log("    Non-HTTP error reloading data! onErrorWasCalled="+s.onErrorWasCalled+" status: "+s.status),r(!1,"Non-HTTP error reloading data: "+a,s);else{var u=e.statementsMatching(void 0,void 0,void 0,t).slice(),c=n.statementsMatching(void 0,void 0,void 0,t).slice();console.log("    replacing "+u.length+" with "+c.length+" out of total statements "+e.statements.length),e.remove(u),e.add(c);var l=Date.now()-o;0===c.length&&console.log("????????????????? 0000000"),t.reloadTime_total||(t.reloadTime_total=0),t.reloadTime_count||(t.reloadTime_count=0),t.reloadTime_total+=l,t.reloadTime_count+=1,console.log("    fetch took "+l+"ms, av. of "+t.reloadTime_count+" = "+t.reloadTime_total/t.reloadTime_count+"ms."),r(!0)}else console.log("    ERROR reloading data: "+a),r(!1,"Error reloading data: "+a,s)})},e}();e.exports=d},function(e,t,r){e.exports=r(25)},function(e,t,r){"use strict";function n(){this.head=null,this.tail=null,this.length=0}var i=(r(10).Buffer,r(67));e.exports=n,n.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},n.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},n.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},n.prototype.clear=function(){this.head=this.tail=null,this.length=0},n.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},n.prototype.concat=function(e){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var t=i.allocUnsafe(e>>>0),r=this.head,n=0;r;)r.data.copy(t,n),n+=r.data.length,r=r.next;return t}},function(e,t,r){e.exports=r(140)},function(e,t,r){e.exports=r(98)},function(e,t,r){e.exports=r(99)},function(e,t,r){(function(t){var n="object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this,i=n.regeneratorRuntime&&Object.getOwnPropertyNames(n).indexOf("regeneratorRuntime")>=0,o=i&&n.regeneratorRuntime;if(n.regeneratorRuntime=void 0,e.exports=r(244),i)n.regeneratorRuntime=o;else try{delete n.regeneratorRuntime}catch(e){n.regeneratorRuntime=void 0}}).call(t,r(2))},function(e,t,r){(function(t,r){!function(t){"use strict";function n(e,t,r,n){var i=t&&t.prototype instanceof o?t:o,a=Object.create(i.prototype),s=new d(n||[]);return a._invoke=l(e,r,s),a}function i(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function o(){}function a(){}function s(){}function u(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function c(e){function t(r,n,o,a){var s=i(e[r],e,n);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&b.call(c,"__await")?Promise.resolve(c.__await).then(function(e){t("next",e,o,a)},function(e){t("throw",e,o,a)}):Promise.resolve(c).then(function(e){u.value=e,o(u)},a)}a(s.arg)}function n(e,r){function n(){return new Promise(function(n,i){t(e,r,n,i)})}return o=o?o.then(n,n):n()}"object"==typeof r&&r.domain&&(t=r.domain.bind(t));var o;this._invoke=n}function l(e,t,r){var n=E;return function(o,a){if(n===N)throw new Error("Generator is already running");if(n===I){if("throw"===o)throw a;return y()}for(r.method=o,r.arg=a;;){var s=r.delegate;if(s){var u=f(s,r);if(u){if(u===O)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===E)throw n=I,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=N;var c=i(e,t,r);if("normal"===c.type){if(n=r.done?I:S,c.arg===O)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=I,r.method="throw",r.arg=c.arg)}}}function f(e,t){var r=e.iterator[t.method];if(r===g){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=g,f(e,t),"throw"===t.method))return O;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return O}var n=i(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,O;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=g),t.delegate=null,O):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,O)}function h(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function p(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function d(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(h,this),this.reset(!0)}function v(e){if(e){var t=e[_];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(b.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=g,t.done=!0,t};return n.next=n}}return{next:y}}function y(){return{value:g,done:!0}}var g,m=Object.prototype,b=m.hasOwnProperty,w="function"==typeof Symbol?Symbol:{},_=w.iterator||"@@iterator",x=w.toStringTag||"@@toStringTag",k="object"==typeof e,T=t.regeneratorRuntime;if(T)return void(k&&(e.exports=T));T=t.regeneratorRuntime=k?e.exports:{},T.wrap=n;var E="suspendedStart",S="suspendedYield",N="executing",I="completed",O={},R={};R[_]=function(){return this};var j=Object.getPrototypeOf,C=j&&j(j(v([])));C&&C!==m&&b.call(C,_)&&(R=C);var A=s.prototype=o.prototype=Object.create(R);a.prototype=A.constructor=s,s.constructor=a,s[x]=a.displayName="GeneratorFunction",T.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===a||"GeneratorFunction"===(t.displayName||t.name))},T.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,x in e||(e[x]="GeneratorFunction")),e.prototype=Object.create(A),e},T.awrap=function(e){return{__await:e}},u(c.prototype),T.AsyncIterator=c,T.async=function(e,t,r,i){var o=new c(n(e,t,r,i));return T.isGeneratorFunction(t)?o:o.next().then(function(e){return e.done?e.value:o.next()})},u(A),A[x]="Generator",A.toString=function(){return"[object Generator]"},T.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},T.values=v,d.prototype={constructor:d,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(p),!e)for(var t in this)"t"===t.charAt(0)&&b.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=g)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,n){return o.type="throw",o.arg=e,r.next=t,n&&(r.method="next",r.arg=g),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=b.call(i,"catchLoc"),s=b.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&b.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,O):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),O},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),p(r),O}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;p(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:v(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=g),O}}}("object"==typeof t?t:"object"==typeof window?window:"object"==typeof self?self:this)}).call(t,r(2),r(4))},function(e,t,r){(function(e,t){!function(e,r){"use strict";function n(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var n={callback:e,args:t};return c[u]=n,s(u),u++}function i(e){delete c[e]}function o(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(r,n)}}function a(e){if(l)setTimeout(a,0,e);else{var t=c[e];if(t){l=!0;try{o(t)}finally{i(e),l=!1}}}}if(!e.setImmediate){var s,u=1,c={},l=!1,f=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?function(){s=function(e){t.nextTick(function(){a(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?function(){var t="setImmediate$"+Math.random()+"$",r=function(r){r.source===e&&"string"==typeof r.data&&0===r.data.indexOf(t)&&a(+r.data.slice(t.length))};e.addEventListener?e.addEventListener("message",r,!1):e.attachEvent("onmessage",r),s=function(r){e.postMessage(t+r,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){a(e.data)},s=function(t){e.port2.postMessage(t)}}():f&&"onreadystatechange"in f.createElement("script")?function(){var e=f.documentElement;s=function(t){var r=f.createElement("script");r.onreadystatechange=function(){a(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r)}}():function(){s=function(e){setTimeout(a,0,e)}}(),h.setImmediate=n,h.clearImmediate=i}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,r(2),r(4))},function(e,t,r){"use strict";e.exports={proxyUrl:"https://databox.me/,proxy?uri={uri}",timeout:5e4}},function(e,t,r){"use strict";function n(e,t){this.rdf=e,this.vocab=l(e),this.config=t||o}function i(e,t){return new n(e,t)}var o=r(246),a=r(144).composePatchQuery,s=r(249),u=r(250),c=r(253),l=r(142);n.prototype.createContainer=function(e,t,r,n){return this.post(e,n,t,!0)},n.prototype.createResponse=function(e,t){return new s(this.rdf,e,t)},n.prototype.currentUrl=function(){return"undefined"!=typeof window?window.location.href:null},n.prototype.del=function(e){return this.solidRequest(e,"DELETE")},n.prototype.get=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return t.headers=t.headers||{},t.headers.Accept||(t.headers.Accept="text/turtle;q=0.8,*/*;q=0.5"),this.solidRequest(e,"GET",t)},n.prototype.head=function(e,t){return this.solidRequest(e,"HEAD",t)},n.prototype.loadParsedGraphs=function(e,t){var r=this,n=e.map(function(e){var n;return r.get(e,t).then(function(e){return n=e.url,e.parsedGraph()}).catch(function(){return null}).then(function(e){return{uri:n,value:e}})});return Promise.all(n)},n.prototype.needsProxy=function(e){var t=this.currentUrl(),r=t&&"https:"===t.slice(0,6),n=e&&"http:"===e.slice(0,5);return r&&n},n.prototype.options=function(e){return this.solidRequest(e,"OPTIONS")},n.prototype.patch=function(e,t,r,n){var i=a(t,r);return n=n||{},n.headers=n.headers||{},n.headers["Content-Type"]="application/sparql-update",this.solidRequest(e,"PATCH",n,i)},n.prototype.post=function(e,t,r,n,i){var o;n?(o=this.vocab.ldp("BasicContainer"),i="text/turtle"):(o=this.vocab.ldp("Resource"),i=i||"text/turtle");var a={};return a.headers={},a.headers.Link=o+'; rel="type"',a.headers["Content-Type"]=i,r&&r.length>0&&(a.headers.Slug=r),this.solidRequest(e,"POST",a,t)},n.prototype.proxyUrl=function(e,t){return t=t||this.config.proxyUrl,t.replace("{uri}",encodeURIComponent(e))},n.prototype.put=function(e,t,r,n){return n=n||{},n.headers=n.headers||{},r=r||"text/turtle",n.headers["Content-Type"]=r,this.solidRequest(e,"PUT",n,t)},n.prototype.solidRequest=function(e,t,r,n){r=r||{},r.headers=r.headers||{},r.proxyUrl=r.proxyUrl||this.config.proxyUrl,r.timeout=r.timeout||this.config.timeout,(this.needsProxy(e)||r.forceProxy)&&(e=this.proxyUrl(e));var i=this;return new Promise(function(o,a){var s=new u;s.open(t,e),r.noCredentials||(s.withCredentials=!0);for(var l in r.headers)s.setRequestHeader(l,r.headers[l]);r.timeout&&(s.timeout=r.timeout),s.onload=function(){this.status>=200&&this.status<300?o(i.createResponse(this,t)):a(new c(this.status,this.statusText,{xhr:this}))},s.onerror=function(){a(new c(this.status,this.statusText,{xhr:this}))},void 0!==n&&n?s.send(n):s.send()})},e.exports=i,e.exports.SolidWebClient=n},function(e,t,r){"use strict";function n(e,t,r){s.call(this,e,t,r),this.containers={},this.contentsUris=[],this.resources={},this.vocab=a(e),this.parsedGraph&&this.appendFromGraph(this.parsedGraph,this.uri)}e.exports=n;var i=r(101),o=i.parseLinks,a=r(142),s=r(143);n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.appendFromGraph=function(e,t){var r=this.rdf.namedNode(this.uri);this.types=Object.keys(e.findTypeURIs(r));var i=o(e,null,this.vocab.ldp("contains"));this.contentsUris=this.contentsUris.concat(i.sort());var a,u=e.each(null,null,this.vocab.ldp("Container")),c=this;u.forEach(function(t){t.uri!==c.uri&&(a=new n(c.rdf,t.uri),a.types=Object.keys(e.findTypeURIs(t)),c.containers[a.uri]=a)});var l,f,h,p;i.forEach(function(t){f=t in c.containers,(l=t!==c.uri&&!f)&&(h=new s(c.rdf,t),p=c.rdf.namedNode(t),h.types=Object.keys(e.findTypeURIs(p)),c.resources[t]=h)})},n.prototype.findByType=function(e){var t,r,n=[];for(t in this.containers)r=this.containers[t],r.isType(e)&&n.push(r);var i;for(t in this.resources)i=this.resources[t],i.isType(e)&&n.push(i);return n},s.prototype.isContainer=function(){return!0},n.prototype.isEmpty=function(){return 0===this.contentsUris.length}},function(e,t,r){"use strict";function n(e,t,r){if(!t)return this.xhr=null,this.user="",this.method=null,this.types=[],void(this.graph=null);this.rdf=e;var n=t.getResponseHeader("Link");this.linkHeaders=s.parseLinkHeader(n)||{},r=r?r.toLowerCase():"",this.method=r,this.acl=this.linkHeaders.acl,this.acl&&(this.acl=this.acl[0]),this.allowedMethods=this.parseAllowedMethods(t,r),this.graph=null,this.meta=this.linkHeaders.meta||this.linkHeaders.describedBy,this.meta&&(this.meta=this.meta[0]),this.types=this.typeLinkHeaders(),this.url=t.getResponseHeader("Location")?s.absoluteUrl(s.hostname(t.responseURL),t.getResponseHeader("Location")):t.responseURL,this.user=t.getResponseHeader("User")||"",this.websocket=t.getResponseHeader("Updates-Via")||"",this.xhr=t,this.resource=null,"get"===this.method&&(this.resource=this.isContainer()?new o(this.rdf,this.url,this):new a(this.rdf,this.url,this))}e.exports=n;var i=r(101),o=r(248),a=r(143),s=r(144);n.prototype.aclAbsoluteUrl=function(){return this.acl?this.resolveMetaOrAclUrl("acl"):null},n.prototype.contentType=function(){return this.xhr?this.xhr.getResponseHeader("Content-Type").split(";")[0]:null},n.prototype.exists=function(){return this.xhr&&this.xhr.status>=200&&this.xhr.status<400},n.prototype.isContainer=function(){return this.isType("http://www.w3.org/ns/ldp#Container")||this.isType("http://www.w3.org/ns/ldp#BasicContainer")},n.prototype.isLoggedIn=function(){return this.user},n.prototype.isType=function(e){return this.types.indexOf(e)!==-1},n.prototype.metaAbsoluteUrl=function(){return this.meta?this.resolveMetaOrAclUrl("meta"):null},n.prototype.parseAllowedMethods=function(e,t){return"get"===t?{}:s.parseAllowedMethods(e.getResponseHeader("Allow"),e.getResponseHeader("Accept-Patch"))},n.prototype.parsedGraph=function(){return this.graph||(this.graph=i.parseGraph(this.rdf,this.url,this.raw(),this.contentType())),this.graph},n.prototype.raw=function(){return this.xhr?this.xhr.response:null},n.prototype.resolveMetaOrAclUrl=function(e){if(!this.url)return null;var t=this[e],r=this.url.slice(0,this.url.lastIndexOf("/")+1);return s.absoluteUrl(r,t)},n.prototype.typeLinkHeaders=function(){if(!Array.isArray(this.linkHeaders.type))return[];var e=new Set(this.linkHeaders.type||[]);return Array.from(e)}},function(e,t,r){"use strict";var n;n="undefined"!=typeof tabulator&&tabulator.isExtension?Components.classes["@mozilla.org/xmlextras/xmlhttprequest;1"].createInstance().QueryInterface(Components.interfaces.nsIXMLHttpRequest):"undefined"!=typeof window&&"XMLHttpRequest"in window?window.XMLHttpRequest:r(263),e.exports=n},function(e,t){function r(e,t){if(e&&"object"==typeof e?(t=e,e=void 0):this.message=e,t)for(var r in t)this[r]=t[r];n.call(this,"name")||(this.name=n.call(i(this),"name")?this.name:this.constructor.name),!o||"stack"in this||o(this,this.constructor)}var n=Object.hasOwnProperty,i=Object.getPrototypeOf,o=Error.captureStackTrace;e.exports=r,r.prototype=Object.create(Error.prototype,{constructor:{value:r,configurable:!0,writable:!0}}),r.prototype.name="StandardError"},function(e,t){e.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(e,t,r){function n(e,t,r){if("string"==typeof e&&(e=s[e]),"number"!=typeof e)throw new TypeError("Non-numeric HTTP code");"object"==typeof t&&null!=t&&(r=t,t=null),o.call(this,t||a[e],r),this.code=e}function i(e){return{configurable:!0,get:function(){return this[e]},set:function(t){return this[e]=t}}}t=e.exports=n;var o=r(251),a=r(252),s=t;n.prototype=Object.create(o.prototype,{constructor:{value:n,configurable:!0,writable:!0}}),n.prototype.name="HttpError",Object.defineProperties(n.prototype,{statusCode:i("code"),statusMessage:i("message"),status:{configurable:!0,get:function(){return this.code},set:function(e){Object.defineProperty(this,"status",{value:e,configurable:!0,enumerable:!0,writable:!0})}}}),n.prototype.toString=function(){return this.name+": "+this.code+" "+this.message};for(var u in a){t[a[u].replace("'","").replace(/[- ]/g,"_").toUpperCase()]=+u}},function(e,t,r){(function(t,n,i){function o(e,t){return s.fetch&&t?"fetch":s.mozchunkedarraybuffer?"moz-chunked-arraybuffer":s.msstream?"ms-stream":s.arraybuffer&&e?"arraybuffer":s.vbArray&&e?"text:vbarray":"text"}function a(e){try{var t=e.status;return null!==t&&0!==t}catch(e){return!1}}var s=r(146),u=r(19),c=r(255),l=r(100),f=r(256),h=c.IncomingMessage,p=c.readyStates,d=e.exports=function(e){var r=this;l.Writable.call(r),r._opts=e,r._body=[],r._headers={},e.auth&&r.setHeader("Authorization","Basic "+new t(e.auth).toString("base64")),Object.keys(e.headers).forEach(function(t){r.setHeader(t,e.headers[t])});var n,i=!0;if("disable-fetch"===e.mode||"timeout"in e)i=!1,n=!0;else if("prefer-streaming"===e.mode)n=!1;else if("allow-wrong-content-type"===e.mode)n=!s.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");n=!0}r._mode=o(n,i),r.on("finish",function(){r._onFinish()})};u(d,l.Writable),d.prototype.setHeader=function(e,t){var r=this,n=e.toLowerCase();v.indexOf(n)===-1&&(r._headers[n]={name:e,value:t})},d.prototype.getHeader=function(e){return this._headers[e.toLowerCase()].value},d.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},d.prototype._onFinish=function(){var e=this;if(!e._destroyed){var r=e._opts,o=e._headers,a=null;if("POST"!==r.method&&"PUT"!==r.method&&"PATCH"!==r.method&&"MERGE"!==r.method||(a=s.blobConstructor?new n.Blob(e._body.map(function(e){return f(e)}),{type:(o["content-type"]||{}).value||""}):t.concat(e._body).toString()),"fetch"===e._mode){var u=Object.keys(o).map(function(e){return[o[e].name,o[e].value]});n.fetch(e._opts.url,{method:e._opts.method,headers:u,body:a||void 0,mode:"cors",credentials:r.withCredentials?"include":"same-origin"}).then(function(t){e._fetchResponse=t,e._connect()},function(t){e.emit("error",t)})}else{var c=e._xhr=new n.XMLHttpRequest;try{c.open(e._opts.method,e._opts.url,!0)}catch(t){return void i.nextTick(function(){e.emit("error",t)})}"responseType"in c&&(c.responseType=e._mode.split(":")[0]),"withCredentials"in c&&(c.withCredentials=!!r.withCredentials),"text"===e._mode&&"overrideMimeType"in c&&c.overrideMimeType("text/plain; charset=x-user-defined"),"timeout"in r&&(c.timeout=r.timeout,c.ontimeout=function(){e.emit("timeout")}),Object.keys(o).forEach(function(e){c.setRequestHeader(o[e].name,o[e].value)}),e._response=null,c.onreadystatechange=function(){switch(c.readyState){case p.LOADING:case p.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(c.onprogress=function(){e._onXHRProgress()}),c.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{c.send(a)}catch(t){return void i.nextTick(function(){e.emit("error",t)})}}}},d.prototype._onXHRProgress=function(){var e=this;a(e._xhr)&&!e._destroyed&&(e._response||e._connect(),e._response._onXHRProgress())},d.prototype._connect=function(){var e=this;e._destroyed||(e._response=new h(e._xhr,e._fetchResponse,e._mode),e._response.on("error",function(t){e.emit("error",t)}),e.emit("response",e._response))},d.prototype._write=function(e,t,r){this._body.push(e),r()},d.prototype.abort=d.prototype.destroy=function(){var e=this;e._destroyed=!0,e._response&&(e._response._destroyed=!0),e._xhr&&e._xhr.abort()},d.prototype.end=function(e,t,r){var n=this;"function"==typeof e&&(r=e,e=void 0),l.Writable.prototype.end.call(n,e,t,r)},d.prototype.flushHeaders=function(){},d.prototype.setTimeout=function(){},d.prototype.setNoDelay=function(){},d.prototype.setSocketKeepAlive=function(){};var v=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"]}).call(t,r(10).Buffer,r(2),r(4))},function(e,t,r){(function(e,n,i){var o=r(146),a=r(19),s=r(100),u=t.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},c=t.IncomingMessage=function(t,r,i){function a(){c.read().then(function(e){if(!u._destroyed){if(e.done)return void u.push(null);u.push(new n(e.value)),a()}}).catch(function(e){u.emit("error",e)})}var u=this;if(s.Readable.call(u),u._mode=i,u.headers={},u.rawHeaders=[],u.trailers={},u.rawTrailers=[],u.on("end",function(){e.nextTick(function(){u.emit("close")})}),"fetch"===i){u._fetchResponse=r,u.url=r.url,u.statusCode=r.status,u.statusMessage=r.statusText,r.headers.forEach(function(e,t){u.headers[t.toLowerCase()]=e,u.rawHeaders.push(t,e)});var c=r.body.getReader();a()}else{u._xhr=t,u._pos=0,u.url=t.responseURL,u.statusCode=t.status,u.statusMessage=t.statusText;if(t.getAllResponseHeaders().split(/\r?\n/).forEach(function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var r=t[1].toLowerCase();"set-cookie"===r?(void 0===u.headers[r]&&(u.headers[r]=[]),u.headers[r].push(t[2])):void 0!==u.headers[r]?u.headers[r]+=", "+t[2]:u.headers[r]=t[2],u.rawHeaders.push(t[1],t[2])}}),u._charset="x-user-defined",!o.overrideMimeType){var l=u.rawHeaders["mime-type"];if(l){var f=l.match(/;\s*charset=([^;])(;|$)/);f&&(u._charset=f[1].toLowerCase())}u._charset||(u._charset="utf-8")}}};a(c,s.Readable),c.prototype._read=function(){},c.prototype._onXHRProgress=function(){var e=this,t=e._xhr,r=null;switch(e._mode){case"text:vbarray":if(t.readyState!==u.DONE)break;try{r=new i.VBArray(t.responseBody).toArray()}catch(e){}if(null!==r){e.push(new n(r));break}case"text":try{r=t.responseText}catch(t){e._mode="text:vbarray";break}if(r.length>e._pos){var o=r.substr(e._pos);if("x-user-defined"===e._charset){for(var a=new n(o.length),s=0;s<o.length;s++)a[s]=255&o.charCodeAt(s);e.push(a)}else e.push(o,e._charset);e._pos=r.length}break;case"arraybuffer":if(t.readyState!==u.DONE||!t.response)break;r=t.response,e.push(new n(new Uint8Array(r)));break;case"moz-chunked-arraybuffer":if(r=t.response,t.readyState!==u.LOADING||!r)break;e.push(new n(new Uint8Array(r)));break;case"ms-stream":if(r=t.response,t.readyState!==u.LOADING)break;var c=new i.MSStreamReader;c.onprogress=function(){c.result.byteLength>e._pos&&(e.push(new n(new Uint8Array(c.result.slice(e._pos)))),e._pos=c.result.byteLength)},c.onload=function(){e.push(null)},c.readAsArrayBuffer(r)}e._xhr.readyState===u.DONE&&"ms-stream"!==e._mode&&e.push(null)}}).call(t,r(4),r(10).Buffer,r(2))},function(e,t,r){var n=r(10).Buffer;e.exports=function(e){if(e instanceof Uint8Array){if(0===e.byteOffset&&e.byteLength===e.buffer.byteLength)return e.buffer;if("function"==typeof e.buffer.slice)return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(n.isBuffer(e)){for(var t=new Uint8Array(e.length),r=e.length,i=0;i<r;i++)t[i]=e[i];return t.buffer}throw new Error("Argument must be a Buffer")}},function(e,t,r){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,r){(function(t){function r(e,t){function r(){if(!i){if(n("throwDeprecation"))throw new Error(t);n("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}if(n("noDeprecation"))return e;var i=!1;return r}function n(e){try{if(!t.localStorage)return!1}catch(e){return!1}var r=t.localStorage[e];return null!=r&&"true"===String(r).toLowerCase()}e.exports=r}).call(t,r(2))},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t,r){(function(e){!function(e){"use strict";function t(e){if(e&&!/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(e)&&!/%[^0-9a-f]/i.test(e)&&!/%[0-9a-f](:?[^0-9a-f]|$)/i.test(e)){var t=[],r="",n="",i="",a="",s="",u="";if(t=o(e),r=t[1],n=t[2],i=t[3],a=t[4],s=t[5],r&&r.length&&i.length>=0){if(n&&n.length){if(0!==i.length&&!/^\//.test(i))return}else if(/^\/\//.test(i))return;if(/^[a-z][a-z0-9\+\-\.]*$/.test(r.toLowerCase()))return u+=r+":",n&&n.length&&(u+="//"+n),u+=i,a&&a.length&&(u+="?"+a),s&&s.length&&(u+="#"+s),u}}}function r(e,r){if(t(e)){var n=[],i="",a="",s="",u="",c="",l="",f="";if(n=o(e),i=n[1],a=n[2],s=n[3],c=n[4],l=n[5],i){if(r){if("https"!=i.toLowerCase())return}else if("http"!=i.toLowerCase())return;if(a)return/:(\d+)$/.test(a)&&(u=a.match(/:(\d+)$/)[0],a=a.replace(/:\d+$/,"")),f+=i+":",f+="//"+a,u&&(f+=u),f+=s,c&&c.length&&(f+="?"+c),l&&l.length&&(f+="#"+l),f}}}function n(e){return r(e,!0)}function i(e){return r(e)||n(e)}e.exports.is_uri=t,e.exports.is_http_uri=r,e.exports.is_https_uri=n,e.exports.is_web_uri=i,e.exports.isUri=t,e.exports.isHttpUri=r,e.exports.isHttpsUri=n,e.exports.isWebUri=i;var o=function(e){return e.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/)}}(e)}).call(t,r(102)(e))},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t){e.exports=XMLHttpRequest},function(e,t,r){function n(e){this.options=e||{locator:{}}}function i(e,t,r){function n(t){var n=e[t];!n&&a&&(n=2==e.length?function(r){e(t,r)}:e),i[t]=n&&function(e){n("[xmldom "+t+"]\t"+e+s(r))}||function(){}}if(!e){if(t instanceof o)return t;e=t}var i={},a=e instanceof Function;return r=r||{},n("warning"),n("error"),n("fatalError"),i}function o(){this.cdata=!1}function a(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function s(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function u(e,t,r){return"string"==typeof e?e.substr(t,r):e.length>=t+r||t?new java.lang.String(e,t,r)+"":e}function c(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}n.prototype.parseFromString=function(e,t){var r=this.options,n=new l,a=r.domBuilder||new o,s=r.errorHandler,u=r.locator,c=r.xmlns||{},f={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return u&&a.setDocumentLocator(u),n.errorHandler=i(s,a,u),n.domBuilder=r.domBuilder||a,/\/x?html?$/.test(t)&&(f.nbsp=" ",f.copy="©",c[""]="http://www.w3.org/1999/xhtml"),c.xml=c.xml||"http://www.w3.org/XML/1998/namespace",e?n.parse(e,c,f):n.errorHandler.error("invalid doc source"),a.doc},o.prototype={startDocument:function(){this.doc=(new f).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,r,n){var i=this.doc,o=i.createElementNS(e,r||t),s=n.length;c(this,o),this.currentElement=o,this.locator&&a(this.locator,o);for(var u=0;u<s;u++){var e=n.getURI(u),l=n.getValue(u),r=n.getQName(u),f=i.createAttributeNS(e,r);this.locator&&a(n.getLocator(u),f),f.value=f.nodeValue=l,o.setAttributeNode(f)}},endElement:function(e,t,r){var n=this.currentElement;n.tagName;this.currentElement=n.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var r=this.doc.createProcessingInstruction(e,t);this.locator&&a(this.locator,r),c(this,r)},ignorableWhitespace:function(e,t,r){},characters:function(e,t,r){if(e=u.apply(this,arguments)){if(this.cdata)var n=this.doc.createCDATASection(e);else var n=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(e)&&this.doc.appendChild(n),this.locator&&a(this.locator,n)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,r){e=u.apply(this,arguments);var n=this.doc.createComment(e);this.locator&&a(this.locator,n),c(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,r){var n=this.doc.implementation;if(n&&n.createDocumentType){var i=n.createDocumentType(e,t,r);this.locator&&a(this.locator,i),c(this,i)}},warning:function(e){console.warn("[xmldom warning]\t"+e,s(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,s(this.locator))},fatalError:function(e){throw console.error("[xmldom fatalError]\t"+e,s(this.locator)),e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e){o.prototype[e]=function(){return null}});var l=r(265).XMLReader,f=t.DOMImplementation=r(150).DOMImplementation;t.XMLSerializer=r(150).XMLSerializer,t.DOMParser=n},function(e,t){function r(){}function n(e,t,r,n,c){function p(e){if(e>65535){e-=65536;var t=55296+(e>>10),r=56320+(1023&e);return String.fromCharCode(t,r)}return String.fromCharCode(e)}function d(e){var t=e.slice(1,-1);return t in r?r[t]:"#"===t.charAt(0)?p(parseInt(t.substr(1).replace("x","0x"))):(c.error("entity not found:"+e),e)}function v(t){if(t>k){var r=e.substring(k,t).replace(/&#?\w+;/g,d);w&&y(k),n.characters(r,0,t-k),k=t}}function y(t,r){for(;t>=m&&(r=b.exec(e));)g=r.index,m=g+r[0].length,w.lineNumber++;w.columnNumber=t-g+1}for(var g=0,m=0,b=/.*(?:\r\n?|\n)|.*$/g,w=n.locator,_=[{currentNSMap:t}],x={},k=0;;){try{var T=e.indexOf("<",k);if(T<0){if(!e.substr(k).match(/^\s*$/)){var E=n.doc,S=E.createTextNode(e.substr(k));E.appendChild(S),n.currentElement=S}return}switch(T>k&&v(T),e.charAt(T+1)){case"/":var N=e.indexOf(">",T+3),I=e.substring(T+2,N),O=_.pop();N<0?(I=e.substring(T+2).replace(/[\s<].*/,""),c.error("end tag name: "+I+" is not complete:"+O.tagName),N=T+1+I.length):I.match(/\s</)&&(I=I.replace(/[\s<].*/,""),c.error("end tag name: "+I+" maybe not complete"),N=T+1+I.length);var R=O.localNSMap,j=O.tagName==I;if(j||O.tagName&&O.tagName.toLowerCase()==I.toLowerCase()){if(n.endElement(O.uri,O.localName,I),R)for(var C in R)n.endPrefixMapping(C);j||c.fatalError("end tag name: "+I+" is not match the current start tagName:"+O.tagName)}else _.push(O);N++;break;case"?":w&&y(T),N=f(e,T,n);break;case"!":w&&y(T),N=l(e,T,n,c);break;default:w&&y(T);var A=new h,L=_[_.length-1].currentNSMap,N=o(e,T,A,L,d,c),D=A.length;if(!A.closed&&u(e,N,A.tagName,x)&&(A.closed=!0,r.nbsp||c.warning("unclosed xml attribute")),w&&D){for(var M=i(w,{}),U=0;U<D;U++){var P=A[U];y(P.offset),P.locator=i(w,{})}n.locator=M,a(A,n,L)&&_.push(A),n.locator=w}else a(A,n,L)&&_.push(A);"http://www.w3.org/1999/xhtml"!==A.uri||A.closed?N++:N=s(e,N,A.tagName,d,n)}}catch(e){c.error("element parse error: "+e),N=-1}N>k?k=N:v(Math.max(T,k)+1)}}function i(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function o(e,t,r,n,i,o){for(var a,s,u=++t,c=m;;){var l=e.charAt(u);switch(l){case"=":if(c===b)a=e.slice(t,u),c=_;else{if(c!==w)throw new Error("attribute equal must after attrName");c=_}break;case"'":case'"':if(c===_||c===b){if(c===b&&(o.warning('attribute value must after "="'),a=e.slice(t,u)),t=u+1,!((u=e.indexOf(l,t))>0))throw new Error("attribute value no end '"+l+"' match");s=e.slice(t,u).replace(/&#?\w+;/g,i),r.add(a,s,t-1),c=k}else{if(c!=x)throw new Error('attribute value must after "="');s=e.slice(t,u).replace(/&#?\w+;/g,i),r.add(a,s,t),o.warning('attribute "'+a+'" missed start quot('+l+")!!"),t=u+1,c=k}break;case"/":switch(c){case m:r.setTagName(e.slice(t,u));case k:case T:case E:c=E,r.closed=!0;case x:case b:case w:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return o.error("unexpected end of input"),c==m&&r.setTagName(e.slice(t,u)),u;case">":switch(c){case m:r.setTagName(e.slice(t,u));case k:case T:case E:break;case x:case b:s=e.slice(t,u),"/"===s.slice(-1)&&(r.closed=!0,s=s.slice(0,-1));case w:c===w&&(s=a),c==x?(o.warning('attribute "'+s+'" missed quot(")!!'),r.add(a,s.replace(/&#?\w+;/g,i),t)):("http://www.w3.org/1999/xhtml"===n[""]&&s.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+s+'" missed value!! "'+s+'" instead!!'),r.add(s,s,t));break;case _:throw new Error("attribute value missed!!")}return u;case"":l=" ";default:if(l<=" ")switch(c){case m:r.setTagName(e.slice(t,u)),c=T;break;case b:a=e.slice(t,u),c=w;break;case x:var s=e.slice(t,u).replace(/&#?\w+;/g,i);o.warning('attribute "'+s+'" missed quot(")!!'),r.add(a,s,t);case k:c=T}else switch(c){case w:r.tagName;"http://www.w3.org/1999/xhtml"===n[""]&&a.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+a+'" missed value!! "'+a+'" instead2!!'),r.add(a,a,t),t=u,c=b;break;case k:o.warning('attribute space is required"'+a+'"!!');case T:c=b,t=u;break;case _:c=x,t=u;break;case E:throw new Error("elements closed character '/' and '>' must be connected to")}}u++}}function a(e,t,r){for(var n=e.tagName,i=null,o=e.length;o--;){var a=e[o],s=a.qName,u=a.value,l=s.indexOf(":");if(l>0)var f=a.prefix=s.slice(0,l),h=s.slice(l+1),p="xmlns"===f&&h;else h=s,f=null,p="xmlns"===s&&"";a.localName=h,p!==!1&&(null==i&&(i={},c(r,r={})),r[p]=i[p]=u,a.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(p,u))}for(var o=e.length;o--;){a=e[o];var f=a.prefix;f&&("xml"===f&&(a.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==f&&(a.uri=r[f||""]))}var l=n.indexOf(":");l>0?(f=e.prefix=n.slice(0,l),h=e.localName=n.slice(l+1)):(f=null,h=e.localName=n);var d=e.uri=r[f||""];if(t.startElement(d,h,n,e),!e.closed)return e.currentNSMap=r,e.localNSMap=i,!0;if(t.endElement(d,h,n),i)for(f in i)t.endPrefixMapping(f)}function s(e,t,r,n,i){if(/^(?:script|textarea)$/i.test(r)){var o=e.indexOf("</"+r+">",t),a=e.substring(t+1,o);if(/[&<]/.test(a))return/^script$/i.test(r)?(i.characters(a,0,a.length),o):(a=a.replace(/&#?\w+;/g,n),i.characters(a,0,a.length),o)}return t+1}function u(e,t,r,n){var i=n[r];return null==i&&(i=e.lastIndexOf("</"+r+">"),i<t&&(i=e.lastIndexOf("</"+r)),n[r]=i),i<t}function c(e,t){for(var r in e)t[r]=e[r]}function l(e,t,r,n){switch(e.charAt(t+2)){case"-":if("-"===e.charAt(t+3)){var i=e.indexOf("-->",t+4);return i>t?(r.comment(e,t+4,i-t-4),i+3):(n.error("Unclosed comment"),-1)}return-1;default:if("CDATA["==e.substr(t+3,6)){var i=e.indexOf("]]>",t+9);return r.startCDATA(),r.characters(e,t+9,i-t-9),r.endCDATA(),i+3}var o=d(e,t),a=o.length;if(a>1&&/!doctype/i.test(o[0][0])){var s=o[1][0],u=a>3&&/^public$/i.test(o[2][0])&&o[3][0],c=a>4&&o[4][0],l=o[a-1];return r.startDTD(s,u&&u.replace(/^(['"])(.*?)\1$/,"$2"),c&&c.replace(/^(['"])(.*?)\1$/,"$2")),r.endDTD(),l.index+l[0].length}}return-1}function f(e,t,r){var n=e.indexOf("?>",t);if(n){var i=e.substring(t,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(i){i[0].length;return r.processingInstruction(i[1],i[2]),n+2}return-1}return-1}function h(e){}function p(e,t){return e.__proto__=t,e}function d(e,t){var r,n=[],i=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(i.lastIndex=t,i.exec(e);r=i.exec(e);)if(n.push(r),r[1])return n}var v=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,y=new RegExp("[\\-\\.0-9"+v.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),g=new RegExp("^"+v.source+y.source+"*(?::"+v.source+y.source+"*)?$"),m=0,b=1,w=2,_=3,x=4,k=5,T=6,E=7;r.prototype={parse:function(e,t,r){var i=this.domBuilder;i.startDocument(),c(t,t={}),n(e,t,r,i,this.errorHandler),i.endDocument()}},h.prototype={setTagName:function(e){if(!g.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,r){if(!g.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:r}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},p({},p.prototype)instanceof p||(p=function(e,t){function r(){}r.prototype=t,r=new r;for(t in e)r[t]=e[t];return r}),t.XMLReader=r},function(e,t,r){(function(e,n){/**
 * Wrapper for built-in http.js to emulate the browser XMLHttpRequest object.
 *
 * This can be used with JS designed for browsers to improve reuse of code and
 * allow the use of existing libraries.
 *
 * Usage: include("XMLHttpRequest.js") and use XMLHttpRequest per W3C specs.
 *
 * @author Dan DeFelippi <dan@driverdan.com>
 * @contributor David Ellis <d.f.ellis@ieee.org>
 * @license MIT
 */
var i=r(148),o=r(268).spawn,a=r(269);t.XMLHttpRequest=function(){"use strict";var t,s,u=this,c=r(145),l=r(223),f={},h=!1,p={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},d={},v={},y=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],g=["TRACE","TRACK","CONNECT"],m=!1,b=!1,w={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText="",this.responseXML="",this.status=null,this.statusText=null,this.withCredentials=!1;var _=function(e){return h||e&&y.indexOf(e.toLowerCase())===-1},x=function(e){return e&&g.indexOf(e)===-1};this.open=function(e,t,r,n,i){if(this.abort(),b=!1,!x(e))throw new Error("SecurityError: Request method not allowed");f={method:e,url:t.toString(),async:"boolean"!=typeof r||r,user:n||null,password:i||null},k(this.OPENED)},this.setDisableHeaderCheck=function(e){h=e},this.setRequestHeader=function(e,t){if(this.readyState!==this.OPENED)throw new Error("INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN");if(!_(e))return void console.warn('Refused to set unsafe header "'+e+'"');if(m)throw new Error("INVALID_STATE_ERR: send flag is true");e=v[e.toLowerCase()]||e,v[e.toLowerCase()]=e,d[e]=d[e]?d[e]+", "+t:t},this.getResponseHeader=function(e){return"string"==typeof e&&this.readyState>this.OPENED&&s&&s.headers&&s.headers[e.toLowerCase()]&&!b?s.headers[e.toLowerCase()]:null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||b)return"";var e="";for(var t in s.headers)"set-cookie"!==t&&"set-cookie2"!==t&&(e+=t+": "+s.headers[t]+"\r\n");return e.substr(0,e.length-2)},this.getRequestHeader=function(e){return"string"==typeof e&&v[e.toLowerCase()]?d[v[e.toLowerCase()]]:""},this.send=function(r){if(this.readyState!==this.OPENED)throw new Error("INVALID_STATE_ERR: connection must be opened before send() is called");if(m)throw new Error("INVALID_STATE_ERR: send has already been called");var h,y=!1,g=!1,w=i.parse(f.url);switch(w.protocol){case"https:":y=!0;case"http:":h=w.hostname;break;case"file:":g=!0;break;case void 0:case null:case"":h="localhost";break;default:throw new Error("Protocol not supported.")}if(g){if("GET"!==f.method)throw new Error("XMLHttpRequest: Only GET method is supported");if(f.async)a.readFile(w.pathname,"utf8",function(e,t){e?u.handleError(e):(u.status=200,u.responseText=t,k(u.DONE))});else try{this.responseText=a.readFileSync(w.pathname,"utf8"),this.status=200,k(u.DONE)}catch(e){this.handleError(e)}}else{var _=w.port||(y?443:80),x=w.pathname+(w.search?w.search:"");for(var T in p)v[T.toLowerCase()]||(d[T]=p[T]);if(d.Host=h,y&&443===_||80===_||(d.Host+=":"+w.port),f.user){void 0===f.password&&(f.password="");var E=new e(f.user+":"+f.password);d.Authorization="Basic "+E.toString("base64")}"GET"===f.method||"HEAD"===f.method?r=null:r?(d["Content-Length"]=e.isBuffer(r)?r.length:e.byteLength(r),d["Content-Type"]||(d["Content-Type"]="text/plain;charset=UTF-8")):"POST"===f.method&&(d["Content-Length"]=0);var S={host:h,port:_,path:x,method:f.method,headers:d,agent:!1,withCredentials:u.withCredentials};if(b=!1,f.async){var N=y?l.request:c.request;m=!0,u.dispatchEvent("readystatechange");var I=function e(r){if(s=r,301===s.statusCode||302===s.statusCode||303===s.statusCode||307===s.statusCode){f.url=s.headers.location;var n=i.parse(f.url);h=n.hostname;var o={hostname:n.hostname,port:n.port,path:n.path,method:303===s.statusCode?"GET":f.method,headers:d,withCredentials:u.withCredentials};return t=N(o,e).on("error",O),void t.end()}s.setEncoding("utf8"),k(u.HEADERS_RECEIVED),u.status=s.statusCode,s.on("data",function(e){e&&(u.responseText+=e),m&&k(u.LOADING)}),s.on("end",function(){m&&(k(u.DONE),m=!1)}),s.on("error",function(e){u.handleError(e)})},O=function(e){u.handleError(e)};t=N(S,I).on("error",O),r&&t.write(r),t.end(),u.dispatchEvent("loadstart")}else{var R=".node-xmlhttprequest-content-"+n.pid,j=".node-xmlhttprequest-sync-"+n.pid;a.writeFileSync(j,"","utf8");for(var C="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(y?"s":"")+".request;var options = "+JSON.stringify(S)+";var responseText = '';var req = doRequest(options, function(response) {response.setEncoding('utf8');response.on('data', function(chunk) {  responseText += chunk;});response.on('end', function() {fs.writeFileSync('"+R+"', JSON.stringify({err: null, data: {statusCode: response.statusCode, headers: response.headers, text: responseText}}), 'utf8');fs.unlinkSync('"+j+"');});response.on('error', function(error) {fs.writeFileSync('"+R+"', JSON.stringify({err: error}), 'utf8');fs.unlinkSync('"+j+"');});}).on('error', function(error) {fs.writeFileSync('"+R+"', JSON.stringify({err: error}), 'utf8');fs.unlinkSync('"+j+"');});"+(r?"req.write('"+JSON.stringify(r).slice(1,-1).replace(/'/g,"\\'")+"');":"")+"req.end();",A=o(n.argv[0],["-e",C]);a.existsSync(j););var L=JSON.parse(a.readFileSync(R,"utf8"));A.stdin.end(),a.unlinkSync(R),L.err?u.handleError(L.err):(s=L.data,u.status=L.data.statusCode,u.responseText=L.data.text,k(u.DONE))}}},this.handleError=function(e){this.status=0,this.statusText=e,this.responseText=e.stack,b=!0,k(this.DONE),this.dispatchEvent("error")},this.abort=function(){t&&(t.abort(),t=null),d=p,this.status=0,this.responseText="",this.responseXML="",b=!0,this.readyState===this.UNSENT||this.readyState===this.OPENED&&!m||this.readyState===this.DONE||(m=!1,k(this.DONE)),this.readyState=this.UNSENT,this.dispatchEvent("abort")},this.addEventListener=function(e,t){e in w||(w[e]=[]),w[e].push(t)},this.removeEventListener=function(e,t){e in w&&(w[e]=w[e].filter(function(e){return e!==t}))},this.dispatchEvent=function(e){if("function"==typeof u["on"+e]&&u["on"+e](),e in w)for(var t=0,r=w[e].length;t<r;t++)w[e][t].call(u)};var k=function(e){e!=u.LOADING&&u.readyState===e||(u.readyState=e,(f.async||u.readyState<u.OPENED||u.readyState===u.DONE)&&u.dispatchEvent("readystatechange"),u.readyState!==u.DONE||b||(u.dispatchEvent("load"),u.dispatchEvent("loadend")))}}}).call(t,r(10).Buffer,r(4))},function(e,t){function r(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var i in r)n.call(r,i)&&(e[i]=r[i])}return e}e.exports=r;var n=Object.prototype.hasOwnProperty},function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t){},function(e,t){}])});